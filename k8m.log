I0228 15:39:51.978727   90330 conn.go:89] å·²è¿æ¥æ•°æ®åº“[./data/k8m.db].

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.249ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="custom_templates"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.067ms] [34;1m[rows:11][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "custom_templates" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.135ms] [34;1m[rows:-][0m SELECT * FROM `custom_templates` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.012ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "custom_templates" AND name = "idx_custom_template_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.009ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "custom_templates" AND name = "idx_custom_template_kind"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "custom_templates" AND name = "idx_custom_template_cluster"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "custom_templates" AND name = "idx_custom_template_is_global"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "custom_templates" AND name = "idx_custom_template_created_by"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="kube_configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.039ms] [34;1m[rows:8][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "kube_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.020ms] [34;1m[rows:-][0m SELECT * FROM `kube_configs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_server"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_user"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_cluster"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_namespace"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_display_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_cluster_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "kube_configs" AND name = "idx_kube_config_region"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="users"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.033ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "users" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.014ms] [34;1m[rows:-][0m SELECT * FROM `users` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_user_username"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="cluster_user_roles"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.037ms] [34;1m[rows:7][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "cluster_user_roles" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.010ms] [34;1m[rows:-][0m SELECT * FROM `cluster_user_roles` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "cluster_user_roles" AND name = "idx_cluster_user_role_cluster"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "cluster_user_roles" AND name = "idx_cluster_user_role_username"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "cluster_user_roles" AND name = "idx_cluster_user_role_role"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="operation_logs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.036ms] [34;1m[rows:10][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "operation_logs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.011ms] [34;1m[rows:-][0m SELECT * FROM `operation_logs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_username"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_role"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_cluster"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_namespace"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_group"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_kind"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "operation_logs" AND name = "idx_operation_log_action"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="shell_logs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.033ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "shell_logs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.009ms] [34;1m[rows:-][0m SELECT * FROM `shell_logs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "shell_logs" AND name = "idx_shell_log_username"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "shell_logs" AND name = "idx_shell_log_cluster"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "shell_logs" AND name = "idx_shell_log_namespace"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "shell_logs" AND name = "idx_shell_log_pod_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="user_groups"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.060ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "user_groups" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.011ms] [34;1m[rows:-][0m SELECT * FROM `user_groups` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "user_groups" AND name = "idx_user_group_group_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "user_groups" AND name = "idx_user_group_role"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.030ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.019ms] [34;1m[rows:-][0m SELECT * FROM `configs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="condition_reverses"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.063ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "condition_reverses" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT * FROM `condition_reverses` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "condition_reverses" AND name = "idx_condition_reverse_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="sso_configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.029ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "sso_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.014ms] [34;1m[rows:-][0m SELECT * FROM `sso_configs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "sso_configs" AND name = "idx_sso_config_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.017ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="ldap_configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.044ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "ldap_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.015ms] [34;1m[rows:-][0m SELECT * FROM `ldap_configs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "ldap_configs" AND name = "idx_ldap_config_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="menus"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.036ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "menus" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT * FROM `menus` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="plugin_configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.033ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "plugin_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.009ms] [34;1m[rows:-][0m SELECT * FROM `plugin_configs` LIMIT 1

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:293
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "plugin_configs" AND name = "idx_plugin_config_name"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:32
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="plugin_configs"

2026/02/28 15:39:51 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:71
[0m[33m[0.018ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "users" AND (sql LIKE "%""Role"" %" OR sql LIKE "%Role %" OR sql LIKE "%`Role`%" OR sql LIKE "%[Role]%" OR sql LIKE "%	Role	%")
I0228 15:39:51.986553   90330 migrate.go:18] æ•°æ®åº“è‡ªåŠ¨è¿ç§»å®Œæˆ

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:137
[0m[33m[0.398ms] [34;1m[rows:0][0m UPDATE `kube_configs` SET `display_name`=cluster,`updated_at`="2026-02-28 15:39:51.986" WHERE display_name = ""

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:117
[0m[33m[0.273ms] [34;1m[rows:1][0m UPDATE `user_groups` SET `role`="guest",`updated_at`="2026-02-28 15:39:51.986" WHERE role != "platform_admin"

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:147
[0m[33m[0.179ms] [34;1m[rows:1][0m SELECT count(*) FROM `configs`

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:168
[0m[33m[0.141ms] [34;1m[rows:1][0m SELECT count(*) FROM `condition_reverses`

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:127
[0m[33m[0.174ms] [34;1m[rows:0][0m UPDATE `cluster_user_roles` SET `authorization_type`="user",`updated_at`="2026-02-28 15:39:51.987" WHERE authorization_type = '' or authorization_type is null

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:234
[0m[33m[0.014ms] [34;1m[rows:1][0m SELECT count(*) FROM `user_groups` WHERE group_name = "å¹³å°ç®¡ç†å‘˜ç»„"
I0228 15:39:51.987801   90330 migrate.go:249] é»˜è®¤å¹³å°ç®¡ç†å‘˜ç»„å·²å­˜åœ¨

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/models/migrate.go:196
[0m[33m[0.163ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
I0228 15:39:51.987977   90330 migrate.go:201] å·²å­˜åœ¨ç”¨æˆ·ï¼Œä¸å†æ·»åŠ é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·
I0228 15:39:51.988896   90330 lua_scripts_image_config_risk_builtin.go:253] è‡ªåŠ¨æ³¨å†Œé•œåƒé…ç½®é£é™©å·¡æ£€å†…ç½®è„šæœ¬
I0228 15:39:51.988906   90330 lua_scripts_pod_probe_compliance_builtin.go:276] è‡ªåŠ¨æ³¨å†Œ Pod æ¢é’ˆé…ç½®åˆè§„æ€§æ£€æŸ¥å†…ç½®è„šæœ¬
I0228 15:39:51.988911   90330 lua_scripts_pod_probe_compliance_builtin.go:278] è‡ªåŠ¨æ³¨å†Œ Prometheus æŸ¥è¯¢ç¤ºä¾‹å†…ç½®è„šæœ¬

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/service/config.go:23
[0m[33m[0.154ms] [34;1m[rows:1][0m SELECT * FROM `configs` ORDER BY `configs`.`id` LIMIT 1
I0228 15:39:51.997522   90330 callbacks.go:9] RegisterInit
I0228 15:39:51.997531   90330 callbacks.go:11] Register RegisterDefaultCallbacks func  to clusters

2026/02/28 15:39:51 [32m/Users/weibh/projects/go/k8m/pkg/service/config.go:23
[0m[33m[0.052ms] [34;1m[rows:1][0m SELECT * FROM `configs` ORDER BY `configs`.`id` LIMIT 1
I0228 15:39:51.997954   90330 main.go:85] ç‰ˆæœ¬: v1.0.0
I0228 15:39:51.997960   90330 main.go:86] Git Commit: c07d33d4
I0228 15:39:51.998362   90330 callbacks.go:9] RegisterInit
I0228 15:39:51.998368   90330 callbacks.go:11] Register RegisterDefaultCallbacks func  to clusters
I0228 15:39:51.998372   90330 main.go:99] å¯ç”¨InClusteræ¨¡å¼ï¼Œè‡ªåŠ¨æ³¨å†Œçº³ç®¡å®¿ä¸»é›†ç¾¤
E0228 15:39:51.998377   90330 clusters.go:863] è·å–InClusterçš„é…ç½®å¤±è´¥,InClusteræ¨¡å¼å…³é—­.é”™è¯¯ï¼šunable to load in-cluster configuration, KUBERNETES_SERVICE_HOST and KUBERNETES_SERVICE_PORT must be defined
I0228 15:39:51.998951   90330 manager.go:82] æ³¨å†Œæ’ä»¶: demoï¼ˆç‰ˆæœ¬: 1.0.12ï¼‰
I0228 15:39:51.999075   90330 registrar.go:35] æ³¨å†Œdemoæ’ä»¶æˆåŠŸ
I0228 15:39:51.999081   90330 manager.go:82] æ³¨å†Œæ’ä»¶: leaderï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999086   90330 registrar.go:40] æ³¨å†Œleaderæ’ä»¶æˆåŠŸ
I0228 15:39:51.999090   90330 manager.go:82] æ³¨å†Œæ’ä»¶: webhookï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999096   90330 registrar.go:45] æ³¨å†Œwebhookæ’ä»¶æˆåŠŸ
I0228 15:39:51.999100   90330 manager.go:82] æ³¨å†Œæ’ä»¶: eventhandlerï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999104   90330 registrar.go:50] æ³¨å†Œeventhandleræ’ä»¶æˆåŠŸ
I0228 15:39:51.999146   90330 manager.go:82] æ³¨å†Œæ’ä»¶: inspectionï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999152   90330 registrar.go:55] æ³¨å†Œinspectionæ’ä»¶æˆåŠŸ
I0228 15:39:51.999156   90330 manager.go:82] æ³¨å†Œæ’ä»¶: helmï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999161   90330 registrar.go:60] æ³¨å†Œhelmæ’ä»¶æˆåŠŸ
I0228 15:39:51.999165   90330 manager.go:82] æ³¨å†Œæ’ä»¶: gllogï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999169   90330 registrar.go:65] æ³¨å†Œgllogæ’ä»¶æˆåŠŸ
I0228 15:39:51.999172   90330 manager.go:82] æ³¨å†Œæ’ä»¶: swaggerï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999177   90330 registrar.go:70] æ³¨å†Œswaggeræ’ä»¶æˆåŠŸ
I0228 15:39:51.999182   90330 manager.go:82] æ³¨å†Œæ’ä»¶: mcp_runtimeï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999187   90330 registrar.go:75] æ³¨å†Œmcpæ’ä»¶æˆåŠŸ
I0228 15:39:51.999192   90330 manager.go:82] æ³¨å†Œæ’ä»¶: openapiï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999198   90330 registrar.go:80] æ³¨å†Œopenapiæ’ä»¶æˆåŠŸ
I0228 15:39:51.999202   90330 manager.go:82] æ³¨å†Œæ’ä»¶: k8m_mcp_serverï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999208   90330 registrar.go:85] æ³¨å†Œk8m_mcp_serveræ’ä»¶æˆåŠŸ
I0228 15:39:51.999211   90330 manager.go:82] æ³¨å†Œæ’ä»¶: k8sgptï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999218   90330 registrar.go:90] æ³¨å†Œk8sgptæ’ä»¶æˆåŠŸ
I0228 15:39:51.999222   90330 manager.go:82] æ³¨å†Œæ’ä»¶: aiï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999228   90330 registrar.go:95] æ³¨å†Œaiæ’ä»¶æˆåŠŸ
I0228 15:39:51.999233   90330 manager.go:82] æ³¨å†Œæ’ä»¶: heartbeatï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999239   90330 registrar.go:100] æ³¨å†Œheartbeatæ’ä»¶æˆåŠŸ
I0228 15:39:51.999246   90330 manager.go:82] æ³¨å†Œæ’ä»¶: k8swatchï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999253   90330 registrar.go:105] æ³¨å†Œk8swatchæ’ä»¶æˆåŠŸ
I0228 15:39:51.999258   90330 manager.go:82] æ³¨å†Œæ’ä»¶: gatewayapiï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999264   90330 registrar.go:110] æ³¨å†Œgatewayapiæ’ä»¶æˆåŠŸ
I0228 15:39:51.999268   90330 manager.go:82] æ³¨å†Œæ’ä»¶: istioï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999276   90330 registrar.go:115] æ³¨å†Œistioæ’ä»¶æˆåŠŸ
I0228 15:39:51.999279   90330 manager.go:82] æ³¨å†Œæ’ä»¶: openkruiseï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999287   90330 registrar.go:120] æ³¨å†Œopenkruiseæ’ä»¶æˆåŠŸ
I0228 15:39:51.999291   90330 manager.go:82] æ³¨å†Œæ’ä»¶: yaml_editorï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999308   90330 registrar.go:125] æ³¨å†Œyaml-editoræ’ä»¶æˆåŠŸ
I0228 15:39:51.999312   90330 manager.go:82] æ³¨å†Œæ’ä»¶: kubeconfig_exportï¼ˆç‰ˆæœ¬: 1.0.0ï¼‰
I0228 15:39:51.999320   90330 registrar.go:130] æ³¨å†Œkubeconfig-exportæ’ä»¶æˆåŠŸ

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/pkg/service/clusters.go:543
[0m[33m[2.571ms] [34;1m[rows:8][0m SELECT * FROM `kube_configs`

2026/02/28 15:39:52 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[2.310ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "plugin_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:52 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.012ms] [34;1m[rows:-][0m SELECT * FROM `plugin_configs` LIMIT 1

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.017ms] [34;1m[rows:1][0m SELECT count(*) FROM `plugin_configs`

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.084ms] [34;1m[rows:20][0m SELECT * FROM `plugin_configs` ORDER BY  id desc LIMIT 1000000
I0228 15:39:52.002085   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: gllog
I0228 15:39:52.002090   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: k8sgpt
I0228 15:39:52.002093   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: yaml_editor
I0228 15:39:52.002097   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: kubeconfig_export
I0228 15:39:52.002100   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: webhook
I0228 15:39:52.002103   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: inspection
I0228 15:39:52.002107   90330 manager_dao.go:53] å¯åŠ¨æ—¶æ ‡è®°æ’ä»¶ä¸ºå·²å®‰è£…: ai
I0228 15:39:52.002135   90330 manager_dao.go:67] å¯åŠ¨æ—¶åº”ç”¨æ’ä»¶é…ç½®å®Œæˆ {
  "ai": 4,
  "demo": 5,
  "eventhandler": 5,
  "gatewayapi": 5,
  "gllog": 4,
  "heartbeat": 5,
  "helm": 5,
  "inspection": 4,
  "istio": 5,
  "k8m_mcp_server": 5,
  "k8sgpt": 4,
  "k8swatch": 5,
  "kubeconfig_export": 4,
  "leader": 5,
  "mcp_runtime": 5,
  "openapi": 5,
  "openkruise": 5,
  "swagger": 5,
  "webhook": 4,
  "yaml_editor": 4
}
I0228 15:39:52.002793   90330 lifecycle.go:36] å¯åŠ¨å…¨å±€æ—¥å¿—æ’ä»¶
I0228 15:39:52.002801   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.002809   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: gllog
I0228 15:39:52.002813   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: gllog
I0228 15:39:52.002828   90330 lifecycle.go:47] å¯åŠ¨Kubeconfigå¯¼å‡ºæ’ä»¶åå°ä»»åŠ¡
I0228 15:39:52.002833   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.002838   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: kubeconfig_export
I0228 15:39:52.002841   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: kubeconfig_export
I0228 15:39:52.003438   90330 lifecycle.go:61] å¯åŠ¨ AI æ’ä»¶åå°ä»»åŠ¡
I0228 15:39:52.003445   90330 lifecycle.go:62] æ›´æ–° AI æ’ä»¶ è¿è¡Œé…ç½®

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/ai/models/ai_run_config.go:43
[0m[33m[0.183ms] [34;1m[rows:1][0m SELECT * FROM `ai_run_configs` ORDER BY `ai_run_configs`.`id` LIMIT 1

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.220ms] [34;1m[rows:1][0m SELECT * FROM `ai_model_configs` WHERE `ai_model_configs`.`id` = 1 ORDER BY `ai_model_configs`.`id` LIMIT 1
I0228 15:39:52.004685   90330 clusters.go:334] è¿æ¥é›†ç¾¤ config/rancher-desktop å¼€å§‹
I0228 15:39:52.004697   90330 clusters.go:345] é›†ç¾¤[config/rancher-desktop] å½“å‰çŠ¶æ€ä¸º[disconnected]ï¼Œå¼€å§‹è¿æ¥æ“ä½œ
I0228 15:39:52.004703   90330 clusters.go:375] Disconnect å¼€å§‹æ¸…ç†é›†ç¾¤ config/rancher-desktop åŸå§‹ä¿¡æ¯ï¼ˆåœæ­¢è‡ªåŠ¨é‡è¿ï¼šfalseï¼‰
I0228 15:39:52.004713   90330 clusters.go:407] Disconnect å®Œæˆæ¸…ç†é›†ç¾¤ config/rancher-desktop
I0228 15:39:52.004728   90330 clusters.go:718] å¼€å§‹æ³¨å†Œé›†ç¾¤ config/rancher-desktop [æ¥æºï¼šFile]
I0228 15:39:52.004746   90330 ai.go:139] ChatGPT çŠ¶æ€:false
I0228 15:39:52.004759   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.004889   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: ai
I0228 15:39:52.004955   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: ai
I0228 15:39:52.005126   90330 lifecycle.go:51] å¯åŠ¨ YAML ç¼–è¾‘å™¨æ’ä»¶åå°ä»»åŠ¡
I0228 15:39:52.005137   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.005142   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: yaml_editor
I0228 15:39:52.005147   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: yaml_editor
I0228 15:39:52.005432   90330 lifecycle.go:58] å¯åŠ¨Webhookæ’ä»¶æˆåŠŸ
I0228 15:39:52.005446   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.005451   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: webhook
I0228 15:39:52.005455   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: webhook
I0228 15:39:52.006061   90330 lifecycle.go:38] å¯åŠ¨K8sGPTæ’ä»¶æˆåŠŸ
I0228 15:39:52.006068   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.006073   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: k8sgpt
I0228 15:39:52.006076   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: k8sgpt

2026/02/28 15:39:52 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.668ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "inspection_schedules" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:39:52 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT * FROM `inspection_schedules` LIMIT 1

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.029ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_schedules` WHERE enabled is true

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.052ms] [34;1m[rows:2][0m SELECT * FROM `inspection_schedules` WHERE enabled is true ORDER BY id desc LIMIT 15

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.037ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE enabled is true AND `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:39:52.007309   90330 lua_schedule.go:361] æ·»åŠ å·¡æ£€ä»»åŠ¡[id=8]

2026/02/28 15:39:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.050ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE enabled is true AND `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:39:52.007387   90330 lua_schedule.go:361] æ·»åŠ å·¡æ£€ä»»åŠ¡[id=7]
I0228 15:39:52.007392   90330 lua_schedule.go:295] å¯åŠ¨é›†ç¾¤å·¡æ£€ä»»åŠ¡å®Œæˆï¼Œå…±å¯åŠ¨2ä¸ª
I0228 15:39:52.007396   90330 lua_schedule.go:52] æ–°å¢ é›†ç¾¤å·¡æ£€ å®šæ—¶ä»»åŠ¡ 
I0228 15:39:52.007905   90330 lifecycle.go:91] å¯åŠ¨é›†ç¾¤å·¡æ£€æ’ä»¶åå°ä»»åŠ¡
I0228 15:39:52.007912   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.007916   90330 manager.go:277] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: inspection
I0228 15:39:52.007920   90330 manager.go:451] å¯åŠ¨æ’ä»¶åå°ä»»åŠ¡æˆåŠŸ: inspection
I0228 15:39:52.007923   90330 manager.go:504] è·¯ç”±é‡å»ºè·³è¿‡: atomicHandler=false, routerBuilder=true
I0228 15:39:52.008671   90330 envvar.go:172] "Feature gate default state" feature="InformerResourceVersion" enabled=false
I0228 15:39:52.008680   90330 envvar.go:172] "Feature gate default state" feature="WatchListClient" enabled=false
I0228 15:39:52.008686   90330 envvar.go:172] "Feature gate default state" feature="ClientsAllowCBOR" enabled=false
I0228 15:39:52.008690   90330 envvar.go:172] "Feature gate default state" feature="ClientsPreferCBOR" enabled=false
I0228 15:39:52.008729   90330 envvar.go:172] "Feature gate default state" feature="InOrderInformers" enabled=true
I0228 15:39:52.010537   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: k8sgpt
I0228 15:39:52.011005   90330 cluster_api.go:18] æ³¨å†Œk8sgptæ’ä»¶é›†ç¾¤è·¯ç”±(cluster)
I0228 15:39:52.011013   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: yaml_editor
I0228 15:39:52.011020   90330 route.go:17] æ³¨å†Œ YAML ç¼–è¾‘å™¨æ’ä»¶é›†ç¾¤è·¯ç”±
I0228 15:39:52.011024   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: kubeconfig_export
I0228 15:39:52.011034   90330 cluster_api.go:19] æ³¨å†Œkubeconfig_exportæ’ä»¶è·¯ç”±(cluster)
I0228 15:39:52.011039   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: ai
I0228 15:39:52.011284   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: ai
I0228 15:39:52.011786   90330 mgm_api.go:31] æ³¨å†Œ AI æ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.011792   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: gllog
I0228 15:39:52.011798   90330 admin_api.go:17] æ³¨å†Œå…¨å±€æ—¥å¿—æ’ä»¶ç®¡ç†è·¯ç”±(mgm)
I0228 15:39:52.011801   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: k8sgpt
I0228 15:39:52.011805   90330 mgm_api.go:13] æ³¨å†Œk8sgptæ’ä»¶ç®¡ç†è·¯ç”±(mgm)
I0228 15:39:52.011808   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: yaml_editor
I0228 15:39:52.011816   90330 route.go:27] æ³¨å†Œ YAML ç¼–è¾‘å™¨æ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.011821   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: kubeconfig_export
I0228 15:39:52.011838   90330 mgm_api.go:22] æ³¨å†Œkubeconfig_exportæ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.012165   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: kubeconfig_export
I0228 15:39:52.012171   90330 mgm_api.go:32] æ³¨å†Œkubeconfig_exportæ’ä»¶ç®¡ç†å‘˜è·¯ç”±
I0228 15:39:52.012175   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: webhook
I0228 15:39:52.012202   90330 admin_api.go:26] æ³¨å†Œwebhookæ’ä»¶ç®¡ç†è·¯ç”±(admin)
I0228 15:39:52.012206   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: inspection
I0228 15:39:52.012226   90330 admin_api.go:42] æ³¨å†Œé›†ç¾¤å·¡æ£€æ’ä»¶ç®¡ç†è·¯ç”±(admin)
I0228 15:39:52.012231   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: ai
I0228 15:39:52.012255   90330 mgm_api.go:63] æ³¨å†Œ AI æ’ä»¶ adminç®¡ç†è·¯ç”±
I0228 15:39:52.013242   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: yaml_editor
I0228 15:39:52.013250   90330 route.go:17] æ³¨å†Œ YAML ç¼–è¾‘å™¨æ’ä»¶é›†ç¾¤è·¯ç”±
I0228 15:39:52.013255   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: kubeconfig_export
I0228 15:39:52.013260   90330 cluster_api.go:19] æ³¨å†Œkubeconfig_exportæ’ä»¶è·¯ç”±(cluster)
I0228 15:39:52.013265   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: ai
I0228 15:39:52.013269   90330 manager_router.go:23] æ³¨å†Œæ’ä»¶ é›†ç¾¤ è·¯ç”±: k8sgpt
I0228 15:39:52.013279   90330 cluster_api.go:18] æ³¨å†Œk8sgptæ’ä»¶é›†ç¾¤è·¯ç”±(cluster)
I0228 15:39:52.013296   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: ai
I0228 15:39:52.013307   90330 mgm_api.go:31] æ³¨å†Œ AI æ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.013312   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: gllog
I0228 15:39:52.013316   90330 admin_api.go:17] æ³¨å†Œå…¨å±€æ—¥å¿—æ’ä»¶ç®¡ç†è·¯ç”±(mgm)
I0228 15:39:52.013321   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: k8sgpt
I0228 15:39:52.013325   90330 mgm_api.go:13] æ³¨å†Œk8sgptæ’ä»¶ç®¡ç†è·¯ç”±(mgm)
I0228 15:39:52.013330   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: yaml_editor
I0228 15:39:52.013335   90330 route.go:27] æ³¨å†Œ YAML ç¼–è¾‘å™¨æ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.013338   90330 manager_router.go:44] æ³¨å†Œæ’ä»¶ ç®¡ç† è·¯ç”±: kubeconfig_export
I0228 15:39:52.013344   90330 mgm_api.go:22] æ³¨å†Œkubeconfig_exportæ’ä»¶ç®¡ç†è·¯ç”±
I0228 15:39:52.013392   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: kubeconfig_export
I0228 15:39:52.013397   90330 mgm_api.go:32] æ³¨å†Œkubeconfig_exportæ’ä»¶ç®¡ç†å‘˜è·¯ç”±
I0228 15:39:52.013408   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: webhook
I0228 15:39:52.013415   90330 admin_api.go:26] æ³¨å†Œwebhookæ’ä»¶ç®¡ç†è·¯ç”±(admin)
I0228 15:39:52.013420   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: inspection
I0228 15:39:52.013441   90330 admin_api.go:42] æ³¨å†Œé›†ç¾¤å·¡æ£€æ’ä»¶ç®¡ç†è·¯ç”±(admin)
I0228 15:39:52.013447   90330 manager_router.go:63] æ³¨å†Œæ’ä»¶ æ’ä»¶ç®¡ç† è·¯ç”±: ai
I0228 15:39:52.013460   90330 mgm_api.go:63] æ³¨å†Œ AI æ’ä»¶ adminç®¡ç†è·¯ç”±
I0228 15:39:52.013468   90330 manager.go:512] è·¯ç”±æ ‘å·²é‡æ–°æ„å»º
k8m v1.0.0  å¯åŠ¨æˆåŠŸ
âœ  Local:    http://localhost:3618/
âœ  Network:  http://192.168.0.124:3618/
âœ  Network:  http://192.168.211.1:3618/
âœ  Network:  http://26.26.26.1:3618/
I0228 15:39:52.028056   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/version" status="200 OK" milliseconds=10
I0228 15:39:52.028133   90330 clusters.go:850] LoadRestConfig è·å–é›†ç¾¤ ç‰ˆæœ¬æˆåŠŸ config/rancher-desktop
I0228 15:39:52.028140   90330 clusters.go:1003] å¼€å§‹æ„å»ºé›†ç¾¤ config/rancher-desktop çš„æ³¨å†Œé€‰é¡¹é…ç½®
I0228 15:39:52.028144   90330 clusters.go:1011] é›†ç¾¤ config/rancher-desktop æœªè®¾ç½®ä»£ç†URL
I0228 15:39:52.028150   90330 clusters.go:1019] é›†ç¾¤ config/rancher-desktop ä½¿ç”¨é»˜è®¤è¶…æ—¶æ—¶é—´
I0228 15:39:52.028155   90330 clusters.go:1027] é›†ç¾¤ config/rancher-desktop ä½¿ç”¨é»˜è®¤ QPS é™åˆ¶
I0228 15:39:52.028162   90330 clusters.go:1035] é›†ç¾¤ config/rancher-desktop ä½¿ç”¨é»˜è®¤ Burst é™åˆ¶
I0228 15:39:52.028168   90330 clusters.go:1038] é›†ç¾¤ config/rancher-desktop æ³¨å†Œé€‰é¡¹é…ç½®å®Œæˆï¼Œå…±é…ç½® 0 ä¸ªé€‰é¡¹
I0228 15:39:52.028807   90330 kubectl.go:23] k8s init æœåŠ¡å™¨åœ°å€ï¼šhttps://127.0.0.1:6443
I0228 15:39:52.029818   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/version" status="200 OK" milliseconds=0
I0228 15:39:52.035367   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/openapi/v2" status="200 OK" milliseconds=5
I0228 15:39:52.092623   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/openapi/v2" status="200 OK" milliseconds=3
I0228 15:39:52.794649   90330 callbacks.go:21] RegisterDefaultCallbacks for cluster config/rancher-desktop
I0228 15:39:52.795762   90330 status.go:220] Watching CRD resources
I0228 15:39:52.798842   90330 reflector.go:358] "Starting reflector" type="*v1.CustomResourceDefinition" resyncPeriod="0s" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290"
I0228 15:39:52.798876   90330 reflector.go:404] "Listing and watching" type="*v1.CustomResourceDefinition" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290"
I0228 15:39:52.811300   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?limit=500&resourceVersion=0" status="200 OK" milliseconds=11
I0228 15:39:52.823275   90330 reflector.go:436] "Caches populated" type="*v1.CustomResourceDefinition" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290"
I0228 15:39:52.824573   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1131587&timeout=5m54s&timeoutSeconds=354&watch=true" status="200 OK" milliseconds=1
I0228 15:39:52.898839   90330 status.go:301] Initial CRD sync done, loading API resources
I0228 15:39:52.898884   90330 status.go:310] Loading API resources
I0228 15:39:52.902711   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api" status="200 OK" milliseconds=3
I0228 15:39:52.907007   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis" status="200 OK" milliseconds=3
I0228 15:39:52.907733   90330 status.go:305] CRD watcher initialized and running
I0228 15:39:52.907759   90330 clusters.go:769] æˆåŠŸæ³¨å†Œé›†ç¾¤: config/rancher-desktop [https://127.0.0.1:6443]
I0228 15:39:52.907781   90330 clusters.go:777] å¿ƒè·³æ’ä»¶æœªå¯ç”¨ï¼Œè·³è¿‡å¿ƒè·³å¯åŠ¨
I0228 15:39:52.908180   90330 cb.go:47] registered callbacks for cluster config/rancher-desktop
I0228 15:39:52.908191   90330 clusters.go:362] é›†ç¾¤[config/rancher-desktop] è¿æ¥æˆåŠŸ
I0228 15:39:52.908195   90330 clusters.go:368] è¿æ¥é›†ç¾¤ config/rancher-desktop å®Œæ¯•
I0228 15:39:52.908203   90330 main.go:122] å¤„ç†10ä¸ªé›†ç¾¤ï¼Œå…¶ä¸­1ä¸ªé›†ç¾¤å·²è¿æ¥
I0228 15:40:00.002570   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 15:40:00.002703   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 15:40:00.003294   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 15:40:00.002707   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[5.619ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[5.222ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.037ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 15:40:00.009",NULL,0,"","","","2026-02-28 15:40:00.009","2026-02-28 15:40:00.009") RETURNING `id`

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.266ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 15:40:00.009",NULL,0,"","","","2026-02-28 15:40:00.01","2026-02-28 15:40:00.01") RETURNING `id`
I0228 15:40:00.012207   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.286ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "inspection_lua_scripts" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.021ms] [34;1m[rows:-][0m SELECT * FROM `inspection_lua_scripts` LIMIT 1
I0228 15:40:00.012909   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.214ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.266ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[1.092ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.796ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 15:40:00.014512   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19665

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.116ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19665 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.554ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.242ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "inspection_check_events" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.021ms] [34;1m[rows:-][0m SELECT * FROM `inspection_check_events` LIMIT 1
I0228 15:40:00.019237   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 15:40:00.019444   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:40:00.028728   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=8
I0228 15:40:00.032796   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 15:40:00.032827   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:40:00.042629   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=9

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T15:40:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T15:40:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[310.394ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19665 AND event_status = "å¤±è´¥"

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[264.206ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8),(19666,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 15:40:00.327","2026-02-28 15:40:00.327",8) RETURNING `id`

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[12.195ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19665 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:40:00.340127   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19665 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[11.322ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19666,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 15:40:00.014","2026-02-28 15:40:00.064","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 15:40:00.34","2026-02-28 15:40:00.34") RETURNING `id`
I0228 15:40:00.340275   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19666

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.168ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19665 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.112ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19666 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.360ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19665,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:40:00.34" WHERE `id` = 19665
I0228 15:40:00.340728   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19665 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.344ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.122ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:40:00.34",`error_count`=0,`updated_at`="2026-02-28 15:40:00.34" WHERE `id` = 19665
I0228 15:40:00.340878   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19665 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[12.331ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19666 AND event_status = "å¤±è´¥"

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[12.453ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:40:00.34",`error_count`=0,`updated_at`="2026-02-28 15:40:00.353" WHERE `id` = 7
I0228 15:40:00.353369   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[12.516ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19665 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.117ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.089ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.351ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 15:40:00.353","2026-02-28 15:40:00.353",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 15:40:00.353","2026-02-28 15:40:00.353") RETURNING `id`

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.344ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19665 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 15:40:00.353935   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19665å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[28.875ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19666 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:40:00.382192   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19666 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 15:40:00.382214   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[28.412ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:40:00.353",`error_count`=0,`updated_at`="2026-02-28 15:40:00.382" WHERE `id` = 7
I0228 15:40:00.382327   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19667
I0228 15:40:00.382335   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.173ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19666 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[28.511ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:40:00.382470   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.191ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19666,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61706,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61705,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61704,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61703,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61702,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61701,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61700,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61699,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8},{""id"":61698,""record_id"":19666,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:40:00.327745+08:00"",""updated_at"":""2026-02-28T15:40:00.327745+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:40:00.382" WHERE `id` = 19666
I0228 15:40:00.382662   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19666 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[0.340ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "webhook_receivers" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.344ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19666 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT * FROM `webhook_receivers` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.067ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.562ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:40:00.382",`error_count`=9,`updated_at`="2026-02-28 15:40:00.383" WHERE `id` = 19666
I0228 15:40:00.383253   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19666 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.320ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.234ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:40:00.382",`error_count`=9,`updated_at`="2026-02-28 15:40:00.383" WHERE `id` = 8
I0228 15:40:00.383514   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.121ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.443ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19666 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.138ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.039ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:40:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.550ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264400",200,true,1065840917,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264400 -> 200 SUCCESS (1065.84ms)","{""request"":{""timestamp"":""2026-02-28T15:40:00.383599+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:40:01.449437+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:40:01 GMT"",""Request-Id"":""b26255f87b2c078b5a18ec8f2047778b"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=347, cdn-cache;desc=MISS, origin;dur=376, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-160.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772264401b26255f87b2c078b5a18ec8f2047778b"",""X-Lgw-Dst-Svc"":""Tmhk4ccqAZnoOgWIXlvQ_XIQ3zuKvdyBG1kzeTMpqqUTA2pcrCXqKculNv99t1flO7R_zeqcZj0dL0K8yVm78f4j1cf9KdWfB_X9eZYJ6ixtA5yZtPhGCSka8Fnugzk5c1NAvVgf-sN7jvi-k8aV3gf6gW7pJ0xLP6BJJlaPjp4B1SOdTBaQFgmKYyfLsI5gIyYIGK6gVvvgj5STElRV-a5xIBtDMvc3yl4j_4Tx4y8nSOrIgg_Lg20lK7zEdoQM6fDpoS8nAs2k_VNlhF88cAUvgz9O-1jm6Yh9z0srgjwv7FjBI_K4vHvFAQvJ-MQAAYTcJ4XXefl9lOnAQG7gmHDyCyUUDYnFnH1yIH5Pc5rQh1U="",""X-Request-Id"":""b26255f87b2c078b5a18ec8f2047778b"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772264401.463"",""X-Tt-Logid"":""202602281540014D95C84630ECF1B69D9B"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a418b5f8d13a95fb52bde4e764ede3239e2f4ec8ba194f171d402469041c8c362aa14b02eef2e65340975b94ec1db14efa4a69bfb31401291496eaf97395cee8f49478c510e9dc6d7675bebdfc73a200a94"",""X-Tt-Trace-Id"":""00-a330aa64030106d63fe75866d96b0000-a330aa64030106d6-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1065840917,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264400 -\u003e 200 SUCCESS (1065.84ms)""}","2026-02-28 15:40:00.383","2026-02-28 15:40:01.449","2026-02-28 15:40:01.449") RETURNING `id`
I0228 15:40:01.452577   90330 http_logger.go:329] Webhook log saved to database with ID: 5495

2026/02/28 15:40:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.118ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264400",200,true,1065693417,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264400 -> 200 SUCCESS (1065.69ms)","{""request"":{""timestamp"":""2026-02-28T15:40:00.383808+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:40:01.449499+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:40:01 GMT"",""Request-Id"":""9cad88f607853eebbdf9829a95ececf0"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=396, cdn-cache;desc=MISS, origin;dur=412, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-166.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722644019cad88f607853eebbdf9829a95ececf0"",""X-Lgw-Dst-Svc"":""dXmFyc6QAJSkawdD33CJq_ZDc-faqsGQFIHVD2kXiYPyhDLHkE62pLeatexNWDaa_50xY19nQU0g2Md0DRmDb4yD7oxwI3cVe4abIQ-93O6uEf5x18vn_9KtmZVUa0l40YIHuLA56qkWBQXRnUgjhO9HBKyT_SP6l0dHdpiRsBI8U5DbTroBEWumgINEDkigbg_2rvhxsokUbci6Kr6_amiFSMf-ga2WzVz65lZeTCO0moS-zlxiedUWlRYoaZr0qR0DW33peDn1H_XBoTtPIrmpXJhMBXZLnVHWwsMUK1dVmJqfShgbJmNBjUfynGAFkzsb056fsUog26TJYDR3--khuEz5bCdx1x1sghoKveIrn_w="",""X-Request-Id"":""9cad88f607853eebbdf9829a95ececf0"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772264401.502"",""X-Tt-Logid"":""20260228154001D8CDA8499AC085B66D6F"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41d97c7d897e20bfbe759cf8fe28473d8b7830a637ebc5ae68116dccd03f924104ff5dfab6fff15a8bb41ac819c581bacf9257a9a4505d923a5139a40d69ec03cd97c337dc1bc60e08802f52f0d75d6d19"",""X-Tt-Trace-Id"":""00-a330aa6203010876fa83457538b10000-a330aa6203010876-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1065693417,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264400 -\u003e 200 SUCCESS (1065.69ms)""}","2026-02-28 15:40:00.383","2026-02-28 15:40:01.452","2026-02-28 15:40:01.452") RETURNING `id`
I0228 15:40:01.452853   90330 http_logger.go:329] Webhook log saved to database with ID: 5496
I0228 15:45:00.003176   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 15:45:00.004531   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 15:45:00.003263   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 15:45:00.005123   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.602ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.733ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.377ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 15:45:00.007",NULL,0,"","","","2026-02-28 15:45:00.007","2026-02-28 15:45:00.007") RETURNING `id`

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.451ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 15:45:00.007",NULL,0,"","","","2026-02-28 15:45:00.009","2026-02-28 15:45:00.009") RETURNING `id`
I0228 15:45:00.010259   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 15:45:00.010358   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.186ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.259ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.882ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.886ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 15:45:00.011614   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19669

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.106ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19669 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.100ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:45:00.012500   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 15:45:00.012551   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:45:00.016869   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=4
I0228 15:45:00.021988   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 15:45:00.022062   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:45:00.041163   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=18

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T15:45:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T15:45:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[242.928ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19669 AND event_status = "å¤±è´¥"

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[201.250ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8),(19668,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 15:45:00.255","2026-02-28 15:45:00.255",8) RETURNING `id`

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[23.183ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19669 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:45:00.278328   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19669 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.764ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19668,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 15:45:00.011","2026-02-28 15:45:00.054","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 15:45:00.278","2026-02-28 15:45:00.278") RETURNING `id`
I0228 15:45:00.278518   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19668

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.216ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19669 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.073ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19668 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.278ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19669,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:45:00.278" WHERE `id` = 19669
I0228 15:45:00.278889   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19669 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.296ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.113ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:45:00.278",`error_count`=0,`updated_at`="2026-02-28 15:45:00.278" WHERE `id` = 19669
I0228 15:45:00.279035   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19669 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.355ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19668 AND event_status = "å¤±è´¥"

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.541ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19669 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.560ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:45:00.278",`error_count`=0,`updated_at`="2026-02-28 15:45:00.289" WHERE `id` = 7
I0228 15:45:00.289635   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.958ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19668 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:45:00.300426   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19668 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 15:45:00.300446   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.093ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.353ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.455ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19668 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.463ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 15:45:00.3","2026-02-28 15:45:00.3",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 15:45:00.3","2026-02-28 15:45:00.3") RETURNING `id`

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.494ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19669 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 15:45:00.301448   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19669å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[1.044ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19668,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61715,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61714,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61713,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61712,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61711,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61710,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61709,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61708,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8},{""id"":61707,""record_id"":19668,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:45:00.255026+08:00"",""updated_at"":""2026-02-28T15:45:00.255026+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:45:00.301" WHERE `id` = 19668
I0228 15:45:00.302042   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19668 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.721ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:45:00.3",`error_count`=0,`updated_at`="2026-02-28 15:45:00.302" WHERE `id` = 7
I0228 15:45:00.302141   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19670
I0228 15:45:00.302154   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19668 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.804ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:45:00.302282   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.199ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.337ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.305ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19668 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 15:45:00.302761   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19668å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.202ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.331ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:45:00.302",`error_count`=9,`updated_at`="2026-02-28 15:45:00.302" WHERE `id` = 19668
I0228 15:45:00.303415   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19668 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.716ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:45:00.303498   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=8é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.211ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:45:00.302",`error_count`=9,`updated_at`="2026-02-28 15:45:00.303" WHERE `id` = 8
I0228 15:45:00.303663   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.217ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.039ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:45:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.326ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264700",200,true,1578375541,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264700 -> 200 SUCCESS (1578.38ms)","{""request"":{""timestamp"":""2026-02-28T15:45:00.303821+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264700"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:45:01.882192+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 07:45:01 GMT"",""Request-Id"":""98fbb65f38454a6ab1d6f36574da2971"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1072, cdn-cache;desc=MISS, origin;dur=1112, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-144.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226470098fbb65f38454a6ab1d6f36574da2971"",""X-Lgw-Dst-Svc"":""P7j4FgYS0j1DFZywuOBPERExrl--PXmF89SPwLJXerRCmmVJDO8D2Kuy0n_WdTvG3PdObFJOt0LItkcVEgxVOOuTI7cTt-y22djswjMzcvcic_7sNl-hcZ0Wmx4wbhhMQuivVYqTyySGOr3eGT6HGNrqx5txwBbCp8jbsupUa5kaSY9_98WqpEAdeMhyNhhCrClIBfzmmXsgcF38jRhqjIYkmKbmrHCrWoTK2e_ahUgruzZDdVeyuX5uw08ofgVIPIItw5CKp2dolZD4rKki1hr08LA4kjHqJf6DgNIyR2dq4rhX_SuzVoOWTZ4-5eHzYa-XllOQlri5G88IavBu8Y3WNRw0t72RCxcFH1pnjm8CLg=="",""X-Request-Id"":""98fbb65f38454a6ab1d6f36574da2971"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772264701.976"",""X-Tt-Logid"":""20260228154500980E70AB225249D18269"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a416951d32cba46177723a9317326d2ad8d8c831887b3631205495e8b09c634e831d8efad3ab7327aa8f4965dee4a898edb8661a184e782d3233dbcc876f2877d91df8a528827661fcc4c8f973240689697"",""X-Tt-Trace-Id"":""00-a3353d6003010b6d9003799dc94e0000-a3353d6003010b6d-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1578375541,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264700 -\u003e 200 SUCCESS (1578.38ms)""}","2026-02-28 15:45:00.303","2026-02-28 15:45:01.882","2026-02-28 15:45:01.882") RETURNING `id`
I0228 15:45:01.883763   90330 http_logger.go:329] Webhook log saved to database with ID: 5497

2026/02/28 15:45:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.246ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264700",200,true,2568897791,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772264700 -> 200 SUCCESS (2568.90ms)","{""request"":{""timestamp"":""2026-02-28T15:45:00.303008+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264700"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:45:02.871898+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 07:45:02 GMT"",""Request-Id"":""6e2845077573626d72ed121b3b30e08e"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2077, cdn-cache;desc=MISS, origin;dur=2095, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-144.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722647006e2845077573626d72ed121b3b30e08e"",""X-Lgw-Dst-Svc"":""Ihk-gND8Mg4pfLPasVpLrenvca1zIZ6PUa_lcFSPuJy2xYm1gO-8Ln7ZcbC-04Xx74R_xJn2zA56331in4Pzl1N5iSv4Qpwvpo5jfLPbxmlby9ULffILZ3EfeSyudevZzgvn_7oxUYDijauiBA45V0F1Weesy1Xa4SE7VFbsL0qUsnmbC-lotxveul2qIYb_unzU3wqInYEM7nPGrW9N-ikLMMCJrljedXCx62zU9RPAZT1W-vkmntSJSeREBFqnUbkrzPXFz55tbhkd-Lab43J6S3W0TbB7wTANdXrEytz2jYfQ4fmv3ZUUiGnRNW-aXPyS0Oa2O85RIRESeflHoJjiM5F4UBOvR0ixs4I712kfd-4="",""X-Request-Id"":""6e2845077573626d72ed121b3b30e08e"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772264702.957"",""X-Tt-Logid"":""202602281545003AD320EE4E06C3AFDB18"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a416951d32cba46177723a9317326d2ad8dd87ddbecc6083a35bcfde648497f784751ff69cd3430c792c194890a035343a744c1d743385069dd3aa532f34e480057bc899d5eeacaf769eb85ac86b9990df2"",""X-Tt-Trace-Id"":""00-a3353d5e03010716814dd8bc98060000-a3353d5e03010716-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":2568897791,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772264700 -\u003e 200 SUCCESS (2568.90ms)""}","2026-02-28 15:45:00.303","2026-02-28 15:45:02.872","2026-02-28 15:45:02.872") RETURNING `id`
I0228 15:45:02.873358   90330 http_logger.go:329] Webhook log saved to database with ID: 5498
I0228 15:45:46.824300   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=6
I0228 15:45:46.828893   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1131938&timeout=5m52s&timeoutSeconds=352&watch=true" status="200 OK" milliseconds=2
I0228 15:50:00.001383   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 15:50:00.002314   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 15:50:00.001384   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 15:50:00.003248   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.404ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.330ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.283ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 15:50:00.005",NULL,0,"","","","2026-02-28 15:50:00.005","2026-02-28 15:50:00.005") RETURNING `id`

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.649ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 15:50:00.005",NULL,0,"","","","2026-02-28 15:50:00.007","2026-02-28 15:50:00.007") RETURNING `id`
I0228 15:50:00.008262   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 15:50:00.008523   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.170ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.071ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.167ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 15:50:00.008828   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19671

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.494ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.465ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19671 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.129ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:50:00.010016   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 15:50:00.010062   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:50:00.020708   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=9
I0228 15:50:00.026690   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 15:50:00.026763   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:50:00.034009   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=7

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T15:50:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T15:50:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[256.297ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19671 AND event_status = "å¤±è´¥"

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[220.953ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8),(19672,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 15:50:00.265","2026-02-28 15:50:00.265",8) RETURNING `id`

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.521ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19671 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:50:00.287576   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19671 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.050ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19672,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 15:50:00.009","2026-02-28 15:50:00.045","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 15:50:00.287","2026-02-28 15:50:00.287") RETURNING `id`
I0228 15:50:00.287883   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19672

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.442ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19671 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.193ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19672 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.136ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19671,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:50:00.288" WHERE `id` = 19671
I0228 15:50:00.288207   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19671 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.245ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.360ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:50:00.288",`error_count`=0,`updated_at`="2026-02-28 15:50:00.288" WHERE `id` = 19671
I0228 15:50:00.288595   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19671 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.383ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19671 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.095ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:50:00.288",`error_count`=0,`updated_at`="2026-02-28 15:50:00.288" WHERE `id` = 7
I0228 15:50:00.288716   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.106ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.281ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19672 AND event_status = "å¤±è´¥"

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.042ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.173ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19672 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:50:00.307985   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19672 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 15:50:00.307997   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[19.288ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19671 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 15:50:00.308057   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19671å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.094ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19672 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.097ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:50:00.308183   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[9.576ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 15:50:00.298","2026-02-28 15:50:00.298",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 15:50:00.308","2026-02-28 15:50:00.308") RETURNING `id`

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.371ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19672,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61724,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61723,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61722,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61721,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61720,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61719,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61718,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61717,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8},{""id"":61716,""record_id"":19672,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:50:00.265925+08:00"",""updated_at"":""2026-02-28T15:50:00.265925+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:50:00.308" WHERE `id` = 19672
I0228 15:50:00.308542   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19672 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.195ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:50:00.298",`error_count`=0,`updated_at`="2026-02-28 15:50:00.308" WHERE `id` = 7
I0228 15:50:00.308609   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19673
I0228 15:50:00.308617   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.239ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:50:00.308",`error_count`=9,`updated_at`="2026-02-28 15:50:00.308" WHERE `id` = 19672
I0228 15:50:00.308808   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19672 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.283ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19672 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.114ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:50:00.308",`error_count`=9,`updated_at`="2026-02-28 15:50:00.308" WHERE `id` = 8
I0228 15:50:00.308957   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.113ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.971ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.228ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19672 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.076ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.061ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.024ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:50:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.865ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265000",200,true,1098499292,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265000 -> 200 SUCCESS (1098.50ms)","{""request"":{""timestamp"":""2026-02-28T15:50:00.309354+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265000"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:50:01.40785+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:50:01 GMT"",""Eagleid"":""6f0d6e0717722650011224972e"",""Request-Id"":""494a5e8f-bfd5-408b-ab81-5b4fc017186b"",""Server"":""Tengine"",""Server-Timing"":""inner; dur=362"",""Timing-Allow-Origin"":""*"",""Tt_stable"":""1"",""Via"":""ens-cache2.cn8374[388,0]"",""X-Lgw-Dst-Svc"":""XCSw5RwmiSxrHRtG-EZCjXszVWBKcz5N4RaVKkkv6aPMSbaApr8lFZ6byBMqNOdjhLLTZv3rk9A8_zZry18k64sJR6SVCSveQ28eF5VhsHuNUxUeudkG_HmeJMSWuwnQuA5DVsvRurJz9-gqJYHPT3KWClwEBDhWXan3g_RPWJvKLp7X__kmhqNiO51ueHJLw_GN8hGmm0XZ_5NAkDt7ijXR7AUETaaeLaXc5CSfyJ57gPihe3IEHwSds9fwXJe-sg5cElx-5I0FCOTdvrrUWecYwC0QjAkCIey3U0Lx5czgc6V00Lz2mjl3tXKl9R2m1R3ONoOZs7wFO0SV802269oO5F0gZaNIT_D6ja8yZyMVZAw="",""X-Request-Id"":""494a5e8f-bfd5-408b-ab81-5b4fc017186b"",""X-Timestamp"":""1772265001.505"",""X-Tt-Logid"":""2026022815500199A46D23C6DECACD9618"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41dc12d829387ba8f5b55456889d77730248e4fb244b0b4790d0b7ae0aad15e33a2f30660b62448538056446fa784c828754c7736cf07a09970abffcc2a593edfdb9a86ef8a365c149d218294531652486"",""X-Tt-Trace-Id"":""00-26022815500199A46D23C6DECACD9618-484F1F4481B051A2-00"",""X-Tt-Trace-Tag"":""id=03;cdn-cache=miss;type=dyn""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1098499292,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265000 -\u003e 200 SUCCESS (1098.50ms)""}","2026-02-28 15:50:00.309","2026-02-28 15:50:01.408","2026-02-28 15:50:01.408") RETURNING `id`
I0228 15:50:01.412211   90330 http_logger.go:329] Webhook log saved to database with ID: 5499

2026/02/28 15:50:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.461ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265000",200,true,1141347667,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265000 -> 200 SUCCESS (1141.35ms)","{""request"":{""timestamp"":""2026-02-28T15:50:00.309318+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265000"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:50:01.450662+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:50:01 GMT"",""Eagleid"":""6f0d6e0717722650011224965e"",""Request-Id"":""95a82524-67db-4a29-a299-cae6667fdb97"",""Server"":""Tengine"",""Server-Timing"":""inner; dur=397"",""Timing-Allow-Origin"":""*"",""Tt_stable"":""1"",""Via"":""ens-cache2.cn8374[432,0]"",""X-Lgw-Dst-Svc"":""5_lr5g4X5p7jCjxIIvHO8TU9VLijzhw1nYNhznRVA6ALhDhcnofqLKJBzlkAoeYWAjFdbXVsG-Z1kfYA0vQDS1iw7F0zi0kYlGDW_5OzI-F9TZbvgLXKLiHwKqER0ltl3pOuEhqNW2IYwrK3fJOeXQ0QvkYfpRUCu9aa0k3CKm2Jn-tqks1ZxACFXK2DuEWUk48rAdRlmCp0Sf5UYLSA5waNOf8AUe2Vv2X5gsFu4WilopSqmWpPwlyNFp4t61wUee10Oa6noY3qxguGZPLhvALphW4P9XuRMOoucFFar-n6zuWVDtiMT3g5OJRM-myryMQyY_pVKXUaX2LCydGcP_mCdiRH94YegO7coXHRSqRWPT0="",""X-Request-Id"":""95a82524-67db-4a29-a299-cae6667fdb97"",""X-Timestamp"":""1772265001.539"",""X-Tt-Logid"":""20260228155001340879CDE510CDD3027F"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41dc12d829387ba8f5b55456889d7773028fe0fd717358ba60eea53d725d98b5e500c26f9361e942a0dcbb75f7ebdc2dabbda5d1f2599e05700aee5548ecd4f9f5f45fe52abf5decbde576783b45aefd2c"",""X-Tt-Trace-Id"":""00-260228155001340879CDE510CDD3027F-37E38C6E597E7150-00"",""X-Tt-Trace-Tag"":""id=03;cdn-cache=miss;type=dyn""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1141347667,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265000 -\u003e 200 SUCCESS (1141.35ms)""}","2026-02-28 15:50:00.309","2026-02-28 15:50:01.45","2026-02-28 15:50:01.45") RETURNING `id`
I0228 15:50:01.452489   90330 http_logger.go:329] Webhook log saved to database with ID: 5500
I0228 15:51:38.827942   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=6
I0228 15:51:38.838011   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1132290&timeout=5m3s&timeoutSeconds=303&watch=true" status="200 OK" milliseconds=8
I0228 15:55:00.002100   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 15:55:00.002958   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 15:55:00.004158   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 15:55:00.004329   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.701ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.704ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[7.148ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 15:55:00.014",NULL,0,"","","","2026-02-28 15:55:00.017","2026-02-28 15:55:00.017") RETURNING `id`

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[9.040ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 15:55:00.015",NULL,0,"","","","2026-02-28 15:55:00.022","2026-02-28 15:55:00.022") RETURNING `id`
I0228 15:55:00.026748   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 15:55:00.026753   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.847ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.893ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.484ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.500ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 15:55:00.028381   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19674

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.115ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19674 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.112ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:55:00.030614   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 15:55:00.030711   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:55:00.047959   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=15
I0228 15:55:00.052825   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 15:55:00.052865   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 15:55:00.075966   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=22

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T15:55:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T15:55:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[281.730ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19674 AND event_status = "å¤±è´¥"

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[216.013ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8),(19675,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 15:55:00.31","2026-02-28 15:55:00.31",8) RETURNING `id`

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[27.143ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19674 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:55:00.337824   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19674 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[27.572ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19675,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 15:55:00.028","2026-02-28 15:55:00.094","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 15:55:00.337","2026-02-28 15:55:00.337") RETURNING `id`
I0228 15:55:00.338545   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19675

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.978ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19674 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.335ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19675 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.178ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19674,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:55:00.338" WHERE `id` = 19674
I0228 15:55:00.339048   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19674 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.290ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.177ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19674 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[15.212ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19675 AND event_status = "å¤±è´¥"

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[15.303ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[25.354ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19675 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 15:55:00.380015   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19675 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 15:55:00.380040   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[41.288ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:55:00.339",`error_count`=0,`updated_at`="2026-02-28 15:55:00.379" WHERE `id` = 19674
I0228 15:55:00.380379   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19674 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[25.835ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19674 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 15:55:00.380524   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19674å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.610ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19675 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.811ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:55:00.339",`error_count`=0,`updated_at`="2026-02-28 15:55:00.38" WHERE `id` = 7
I0228 15:55:00.381234   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.797ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 15:55:00.381348   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[1.022ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19675,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61733,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61732,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61731,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61730,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61729,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61728,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61727,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61726,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8},{""id"":61725,""record_id"":19675,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T15:55:00.310564+08:00"",""updated_at"":""2026-02-28T15:55:00.310564+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 15:55:00.381" WHERE `id` = 19675
I0228 15:55:00.381825   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19675 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.655ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.543ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 15:55:00.381",`error_count`=9,`updated_at`="2026-02-28 15:55:00.382" WHERE `id` = 19675
I0228 15:55:00.382418   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19675 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.440ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.432ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.163ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19675 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.755ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:55:00.381",`error_count`=9,`updated_at`="2026-02-28 15:55:00.383" WHERE `id` = 8
I0228 15:55:00.383202   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.776ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 15:55:00.382","2026-02-28 15:55:00.382",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 15:55:00.383","2026-02-28 15:55:00.383") RETURNING `id`

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.623ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.196ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 15:55:00.382",`error_count`=0,`updated_at`="2026-02-28 15:55:00.383" WHERE `id` = 7
I0228 15:55:00.383809   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19676
I0228 15:55:00.383818   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.181ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19675 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.040ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 15:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 15:55:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.362ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265300",200,true,1136866500,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265300 -> 200 SUCCESS (1136.87ms)","{""request"":{""timestamp"":""2026-02-28T15:55:00.384024+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265300"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:55:01.520886+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:55:01 GMT"",""Request-Id"":""896bc42b4e9a7823f3e653dd25eef823"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=424, cdn-cache;desc=MISS, origin;dur=452, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-159.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772265301896bc42b4e9a7823f3e653dd25eef823"",""X-Lgw-Dst-Svc"":""Ie7AEadO1jjD1tXWCPHaemkdVvnahctU8bi9RL2bdyl1Y7g2dOJLnExvCQ2ze2YQxLfVTRsx7WLBLas9bzdmwTbdkUD6jYmdjqmwc4FiaWqIQL7NaJo3U3_8objyfVFjeK2W_JC-nRMYwhA1m8mMYx6oAGFhyYTEoeAMr2l4VVZnUlIH1AZSuuNw02cZ3xtrwB1CHSyGSY4ekFqPWNh7W97G28tyOv4lAUbjftH0bJV_rHaGBixBvRN7CV4p-0WUoETKWW832RGOE1_L-j1Bni2VjzXgHzmC9DskhxPyHIOqbble5677En9V4k6TFiJuXa48kUiOlILF6KY1piMBBxcW4Ddcg6rrrXe4jKJlKJnzSEE="",""X-Request-Id"":""896bc42b4e9a7823f3e653dd25eef823"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265301.520"",""X-Tt-Logid"":""202602281555012298811D2EC111D4DD50"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41d5ee5a93d377651dd1ec79ad6237c38346ac4ad52b43a4ba60ec5a13f6527432b61183288deff0da27b000d337dfb547b28edd5adab111b37816fef5c4f1cd1b98b773a5beebeddeb2e41118829dc7c0"",""X-Tt-Trace-Id"":""00-a33e65f103010590fa5d3c9bf0660000-a33e65f103010590-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1136866500,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265300 -\u003e 200 SUCCESS (1136.87ms)""}","2026-02-28 15:55:00.384","2026-02-28 15:55:01.521","2026-02-28 15:55:01.521") RETURNING `id`
I0228 15:55:01.523723   90330 http_logger.go:329] Webhook log saved to database with ID: 5501

2026/02/28 15:55:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.201ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265300",200,true,1139344375,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265300 -> 200 SUCCESS (1139.34ms)","{""request"":{""timestamp"":""2026-02-28T15:55:00.382619+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265300"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T15:55:01.521959+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 07:55:01 GMT"",""Request-Id"":""0c98e995fa0fed471b90d70248378d2f"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=361, cdn-cache;desc=MISS, origin;dur=391, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-159.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722653010c98e995fa0fed471b90d70248378d2f"",""X-Lgw-Dst-Svc"":""MBNimkVLxMITBX_5sjdlUBBk9qxPgbYVCgYtkCreCGu63SetBIuVZkRdTHRGh5ln9yf9QflwGlLoOSFUfvSlztQt--lCxs_DuH39XA4CAgbENNuSUA0fLwJaQ1HEklUt9GDK90ELYI4nuzj-Xv57PF0BVnL56qfKO6H9TJZkS0U263_Cg0-S3psNHFkox7qJF9NlUxdVyaIRcFUu7IQAs5nETIa3beUqK8nj7fmKT1lqDuC6lfyG5ngUxQEx6tEaYrHudom65cE1S442LZDt4wD-Fkg4cfEv8q7HJImqZQw-rhPXVGOoh2AZ4QAvFq0GA9yo5AW0_kmxX2vO58VpCcselEiglLLyVRacYuNFG4sSL3c="",""X-Request-Id"":""0c98e995fa0fed471b90d70248378d2f"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265301.477"",""X-Tt-Logid"":""202602281555010591CBF5A215AAB8DF36"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41d5ee5a93d377651dd1ec79ad6237c38346ac4ad52b43a4ba60ec5a13f6527432b38c4018f5858469c264c7e2970e4ddce96af598dcbbdea486e699d373772d0e538bd7e1dc714f4761767fe69f26465d"",""X-Tt-Trace-Id"":""00-a33e660503010321dcc3c7e6cdf10000-a33e660503010321-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1139344375,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265300 -\u003e 200 SUCCESS (1139.34ms)""}","2026-02-28 15:55:00.382","2026-02-28 15:55:01.523","2026-02-28 15:55:01.523") RETURNING `id`
I0228 15:55:01.524418   90330 http_logger.go:329] Webhook log saved to database with ID: 5502
I0228 15:56:41.837542   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=6
I0228 15:56:41.843067   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1132586&timeout=7m23s&timeoutSeconds=443&watch=true" status="200 OK" milliseconds=2
I0228 16:00:00.002794   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:00:00.004123   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:00:00.003788   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:00:00.005028   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[8.218ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[8.407ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.498ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:00:00.014",NULL,0,"","","","2026-02-28 16:00:00.015","2026-02-28 16:00:00.015") RETURNING `id`

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[8.155ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:00:00.013",NULL,0,"","","","2026-02-28 16:00:00.019","2026-02-28 16:00:00.019") RETURNING `id`
I0228 16:00:00.027494   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 16:00:00.027494   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.993ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.578ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.545ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.524ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:00:00.029419   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19678

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.175ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19678 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.226ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:00:00.030957   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:00:00.031115   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:00:00.039819   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=7
I0228 16:00:00.045577   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:00:00.045618   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:00:00.052017   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=6

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:00:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:00:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[263.231ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19678 AND event_status = "å¤±è´¥"

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[227.559ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8),(19677,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:00:00.293","2026-02-28 16:00:00.293",8) RETURNING `id`

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[23.696ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19678 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:00:00.317348   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19678 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[23.675ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19677,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:00:00.029","2026-02-28 16:00:00.066","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:00:00.317","2026-02-28 16:00:00.317") RETURNING `id`
I0228 16:00:00.317894   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19677

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.686ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19678 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.199ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19677 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.137ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19678,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:00:00.318" WHERE `id` = 19678
I0228 16:00:00.318244   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19678 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.245ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.134ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19678 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[9.687ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19677 AND event_status = "å¤±è´¥"

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.037ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:00:00.318",`error_count`=0,`updated_at`="2026-02-28 16:00:00.328" WHERE `id` = 19678
I0228 16:00:00.328319   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19678 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.941ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.535ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:00:00.318",`error_count`=0,`updated_at`="2026-02-28 16:00:00.328" WHERE `id` = 7
I0228 16:00:00.328891   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.387ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19677 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:00:00.338613   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19677 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.218ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19678 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:00:00.338631   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»
I0228 16:00:00.338643   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19678å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.805ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.078ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19677 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.092ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:00:00.338808   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.213ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:00:00.338","2026-02-28 16:00:00.338",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:00:00.338","2026-02-28 16:00:00.338") RETURNING `id`

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.239ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.197ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:00:00.338",`error_count`=0,`updated_at`="2026-02-28 16:00:00.339" WHERE `id` = 7
I0228 16:00:00.339179   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19679
I0228 16:00:00.339186   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.104ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[1.818ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19677,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61742,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61741,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61740,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61739,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61738,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61737,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61736,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61735,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8},{""id"":61734,""record_id"":19677,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:00:00.29352+08:00"",""updated_at"":""2026-02-28T16:00:00.29352+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:00:00.339" WHERE `id` = 19677
I0228 16:00:00.340626   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19677 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.379ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:00:00.34",`error_count`=9,`updated_at`="2026-02-28 16:00:00.34" WHERE `id` = 19677
I0228 16:00:00.341032   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19677 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.413ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19677 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.254ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:00:00.34",`error_count`=9,`updated_at`="2026-02-28 16:00:00.341" WHERE `id` = 8
I0228 16:00:00.341311   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.251ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.030ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19677 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.021ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.027ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:00:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.695ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265600",200,true,1296345459,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265600 -> 200 SUCCESS (1296.35ms)","{""request"":{""timestamp"":""2026-02-28T16:00:00.341476+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265600"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:00:01.637817+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:00:01 GMT"",""Request-Id"":""457d1a5fef77a2cbe65bf7ad202fe5e5"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=398, cdn-cache;desc=MISS, origin;dur=415, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-134.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772265601457d1a5fef77a2cbe65bf7ad202fe5e5"",""X-Lgw-Dst-Svc"":""m9MlihTXUeCYBqmhDdj5A7aRkOePo782eSlTjycy-uygrzDJnMEvaXv1llIlYw3gn8PIB_7478CMNGB1il3mYIN63zNxEfPeI74r5VOihdl6lePFBMJub740pfFCUT0iGQ7eAGtBHlMiTd7KhOAwpDS9a8sEaAZcDQuGkV6njey1Ullz8wLrF8V3YMi26bRiAHWroU-8_IMENiQJq8qkUhD_6ff3Aqm77s-VYPFVuQiVA7Bv8sGB-3YaSpWIyxhK1Z8JhXajYt3bQC-CAABfEqsk60OxV0yhmk4RwJS02cmjn1WACzAm2AxmYrgZkry7qbgFwIPNIf-G0F-UEw4UqlrH0SaCexmd0pcyvgwmtvzVr94="",""X-Request-Id"":""457d1a5fef77a2cbe65bf7ad202fe5e5"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265601.717"",""X-Tt-Logid"":""20260228160001A0FD24470FD062CE85ED"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a4131a3415ad16e91f7adb1869611740bbe880b0c3a3411dccc7c8745ef83c3ebc836fc2a5354ee4af2eb1812ee6cb8532c164d733318f62ab98ee4cdd293df746aea701ece57fd37bf1f627b0ebc85eeaf"",""X-Tt-Trace-Id"":""00-a342fab703010d5d6a3d58633dfd0000-a342fab703010d5d-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1296345459,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265600 -\u003e 200 SUCCESS (1296.35ms)""}","2026-02-28 16:00:00.341","2026-02-28 16:00:01.638","2026-02-28 16:00:01.638") RETURNING `id`
I0228 16:00:01.640037   90330 http_logger.go:329] Webhook log saved to database with ID: 5503

2026/02/28 16:00:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.998ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265600",200,true,1330265000,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265600 -> 200 SUCCESS (1330.27ms)","{""request"":{""timestamp"":""2026-02-28T16:00:00.339265+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265600"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:00:01.669525+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:00:01 GMT"",""Request-Id"":""879b358b9bfe05a3f9b329b4af561eae"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=429, cdn-cache;desc=MISS, origin;dur=440, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-134.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772265601879b358b9bfe05a3f9b329b4af561eae"",""X-Lgw-Dst-Svc"":""Yd7F17vfB5w6yIRD2rEhpHP8-CSjuO7T9kXSqm8XHPz7ZPIQYdNZCd4xqzjfQlzFxtjOeHKwHzeY-oCRDs0gCff5uthcy_9Fn0_HaLvZLmqa-fgzo9LaifMOir38nHT0GnNbrXHjDDNmtpQlDGSXS1mBzeg_b397SfcLxWZi_uJy7gOdBXxnF89oZn9AtAH7Xm67TK_VzY0ZZukaLlMPH6nyxXV29huTBypc0vb7as8aMLWuLmacVJMsxqdtWv3RNkJEWWj5XrhzqLB5HeV31fkjluelXB2jhiBXO0JxJkax3pBeynhiq2r6d0mNEnAD52RagnfaGcsDuKYk6FsoiQdMDFw57z08SM7RRUl2MMaCARk="",""X-Request-Id"":""879b358b9bfe05a3f9b329b4af561eae"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265601.745"",""X-Tt-Logid"":""20260228160001AF47F4E4CC7353CBCFC8"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a4131a3415ad16e91f7adb1869611740bbefdd14e964e7cc9f45469aa4d84ae7637bb06d8b6bc14a386041946a04c900d985bb478497b933f4ee0973c051f37757c669959b7e9212e2a893b8dfdbcfdd7be"",""X-Tt-Trace-Id"":""00-a342faba030107279e0e7477a8810000-a342faba03010727-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1330265000,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265600 -\u003e 200 SUCCESS (1330.27ms)""}","2026-02-28 16:00:00.339","2026-02-28 16:00:01.669","2026-02-28 16:00:01.669") RETURNING `id`
I0228 16:00:01.670795   90330 http_logger.go:329] Webhook log saved to database with ID: 5504
I0228 16:04:04.842999   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=8
I0228 16:04:04.846160   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1133028&timeout=7m16s&timeoutSeconds=436&watch=true" status="200 OK" milliseconds=1
I0228 16:05:00.008892   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:05:00.009407   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:05:00.014700   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 16:05:00.017011   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[4.105ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.888ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.308ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:05:00.024",NULL,0,"","","","2026-02-28 16:05:00.024","2026-02-28 16:05:00.024") RETURNING `id`

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.440ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:05:00.024",NULL,0,"","","","2026-02-28 16:05:00.025","2026-02-28 16:05:00.025") RETURNING `id`
I0228 16:05:00.026434   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 16:05:00.026742   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.270ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.068ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.308ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.311ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:05:00.027252   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19681

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.086ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19681 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.062ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:05:00.027808   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:05:00.027947   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:05:00.033702   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=5
I0228 16:05:00.037748   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:05:00.037791   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:05:00.048328   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=10

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:05:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:05:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[284.399ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19681 AND event_status = "å¤±è´¥"

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[235.054ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8),(19680,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:05:00.311","2026-02-28 16:05:00.311",8) RETURNING `id`

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[23.924ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19681 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:05:00.336011   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19681 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[23.800ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19680,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:05:00.027","2026-02-28 16:05:00.077","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:05:00.335","2026-02-28 16:05:00.335") RETURNING `id`
I0228 16:05:00.336525   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19680

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.642ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19681 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.188ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19680 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.132ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19681,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:05:00.336" WHERE `id` = 19681
I0228 16:05:00.336854   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19681 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.277ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.181ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19681 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.285ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:05:00.336",`error_count`=0,`updated_at`="2026-02-28 16:05:00.337" WHERE `id` = 19681
I0228 16:05:00.337165   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19681 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.115ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.243ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:05:00.336",`error_count`=0,`updated_at`="2026-02-28 16:05:00.337" WHERE `id` = 7
I0228 16:05:00.337438   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.231ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19681 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:05:00.337467   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19681å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.064ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.406ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19680 AND event_status = "å¤±è´¥"

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.091ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:05:00.347590   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.734ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19680 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:05:00.358374   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19680 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:05:00.358388   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[20.967ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:05:00.337","2026-02-28 16:05:00.337",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:05:00.358","2026-02-28 16:05:00.358") RETURNING `id`

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.541ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.844ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19680 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.850ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:05:00.337",`error_count`=0,`updated_at`="2026-02-28 16:05:00.359" WHERE `id` = 7
I0228 16:05:00.359395   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19682
I0228 16:05:00.359402   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.279ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19680,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61751,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61750,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61749,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61748,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61747,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61746,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61745,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61744,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8},{""id"":61743,""record_id"":19680,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:05:00.31195+08:00"",""updated_at"":""2026-02-28T16:05:00.31195+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:05:00.359" WHERE `id` = 19680
I0228 16:05:00.359607   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19680 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.412ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.105ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:05:00.359",`error_count`=9,`updated_at`="2026-02-28 16:05:00.359" WHERE `id` = 19680
I0228 16:05:00.359746   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19680 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.127ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19680 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.225ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:05:00.359",`error_count`=9,`updated_at`="2026-02-28 16:05:00.359" WHERE `id` = 8
I0228 16:05:00.359996   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.241ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.038ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19680 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.039ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.030ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:05:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.305ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265900",200,true,2453174166,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265900 -> 200 SUCCESS (2453.17ms)","{""request"":{""timestamp"":""2026-02-28T16:05:00.359713+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265900"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:05:02.812879+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:05:02 GMT"",""Request-Id"":""e5763363bf4038fc1d2c8f86a441c0a4"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2072, cdn-cache;desc=MISS, origin;dur=2099, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-139.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772265900e5763363bf4038fc1d2c8f86a441c0a4"",""X-Lgw-Dst-Svc"":""ddd1lIrjFY4sr04zkpCCYcue6iN1JPU2TrHBecqMxL5h24zOyddIMsI8882KrroSc8oNxENW7NOnX3a70wFW9Ge4T83mXj_7zsRRHynTpTcM3CZZmrujRfAs-P8qgRGZLCAlZkep0jpHykkkPDq62DBVzyYXJSqhN1wVcS0eveiUfdoy047GTnikAXpVEwyqHv2VPDIPIVGR6iZGVTW0aj_W1u-tCAaokp8eTmHq0X8NuFFnZk_xdzG2ic7QGQRNk3tfA7wirPJfcazCfOpXYESUJRFCBi6iU0TFY3ZmOPeeOBJ2TpHpLhhkB8URBdI9KRCyhit-I-4JuXKyLeeL3u13iWHb4FaYmd5wQ6IrEBiCsqk="",""X-Request-Id"":""e5763363bf4038fc1d2c8f86a441c0a4"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265902.906"",""X-Tt-Logid"":""2026022816050070B6B48F05C903B9A797"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a410eadd785430424d2204d4a3e698fbd1f34b60adf3fc0e98334820a00392217136379e599c19b8cd846734a54ed8e60e91f4c3e3c956e0cd963a2ae3a2d65b4253037af7daa5343d0124c00d46ab50c921270db07741401f5f6513e38065facef"",""X-Tt-Trace-Id"":""00-a3478cb20301006ddfaee03f796f0000-a3478cb20301006d-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":2453174166,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265900 -\u003e 200 SUCCESS (2453.17ms)""}","2026-02-28 16:05:00.359","2026-02-28 16:05:02.813","2026-02-28 16:05:02.813") RETURNING `id`
I0228 16:05:02.815512   90330 http_logger.go:329] Webhook log saved to database with ID: 5505

2026/02/28 16:05:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.003ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265900",200,true,3467841084,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772265900 -> 200 SUCCESS (3467.84ms)","{""request"":{""timestamp"":""2026-02-28T16:05:00.360236+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265900"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:05:03.828065+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:05:03 GMT"",""Request-Id"":""6629287a79a97ec2975798ae21eb5c37"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=3074, cdn-cache;desc=MISS, origin;dur=3100, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-154.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722659006629287a79a97ec2975798ae21eb5c37"",""X-Lgw-Dst-Svc"":""GHqneMClAzRJ4KE6lf5TipLpifRprbSZ4gTCA1HUyfo28pbI8UVNQdrR1aJrIpA7l8bqzU_s8z90I_gzQyISkJAnDqwRJ9YJ81N-f7TuRLoYlq-NlG--IG6JjG_rArPCXdBwxbJfeBz9Q4dZztFX2ellhbENen8eDATFpjAxslYi_292tX9JxFyMQRd4Rvc79cnI9XoRS_jktuhEdy4Gaeq0SVNBAt7aJAU-QmBDuBluegO0OBBNSMePm3LvFoKs_4i1tWg_VA7VuioQ9NhAFALtJhTJ95-sIg4fhdRpx1dtKvSBqtiyl6W2FDfwL50dhDHH3zhlg3QjUOAF3C4H0d3iQf_tig2jhjMdl2N3gf31xy0="",""X-Request-Id"":""6629287a79a97ec2975798ae21eb5c37"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772265903.920"",""X-Tt-Logid"":""20260228160500521056A841AB76CF61F9"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a417ba5f367de6ee1f4c51249c81bb9655c049732bb9c29c24b3c2052f933d812b619e3a482f8a85e742922eacee425460aaea5be3ddcb5f334120089652a463b30c324c62ccb75c4312de89db484980b20"",""X-Tt-Trace-Id"":""00-a3478cbf030106f7076166bebf8e0000-a3478cbf030106f7-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":3467841084,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772265900 -\u003e 200 SUCCESS (3467.84ms)""}","2026-02-28 16:05:00.36","2026-02-28 16:05:03.828","2026-02-28 16:05:03.828") RETURNING `id`
I0228 16:05:03.829320   90330 http_logger.go:329] Webhook log saved to database with ID: 5506
I0228 16:10:00.008125   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:10:00.008126   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:10:00.009640   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:10:00.009638   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.376ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.514ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.112ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:10:00.012",NULL,0,"","","","2026-02-28 16:10:00.012","2026-02-28 16:10:00.012") RETURNING `id`

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.640ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:10:00.012",NULL,0,"","","","2026-02-28 16:10:00.013","2026-02-28 16:10:00.013") RETURNING `id`
I0228 16:10:00.015079   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:10:00.015131   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.505ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.582ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.116ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:10:00.015951   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19683

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.533ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.545ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19683 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.158ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:10:00.017551   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:10:00.017719   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:10:00.028067   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=9
I0228 16:10:00.031922   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:10:00.031980   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:10:00.044248   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=12

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:10:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:10:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[289.477ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19683 AND event_status = "å¤±è´¥"

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[235.151ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8),(19684,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:10:00.306","2026-02-28 16:10:00.306",8) RETURNING `id`

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[34.126ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19683 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:10:00.340651   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19683 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[31.355ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19684,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:10:00.016","2026-02-28 16:10:00.074","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:10:00.34","2026-02-28 16:10:00.34") RETURNING `id`
I0228 16:10:00.341325   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19684

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.822ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19683 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.211ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19684 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.122ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19683,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:10:00.341" WHERE `id` = 19683
I0228 16:10:00.341687   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19683 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.254ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.210ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:10:00.341",`error_count`=0,`updated_at`="2026-02-28 16:10:00.341" WHERE `id` = 19683
I0228 16:10:00.341931   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19683 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.240ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19683 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.632ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19684 AND event_status = "å¤±è´¥"

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[11.860ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:10:00.341",`error_count`=0,`updated_at`="2026-02-28 16:10:00.353" WHERE `id` = 7
I0228 16:10:00.353827   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.305ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19684 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:10:00.363987   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19684 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:10:00.364001   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[22.000ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.168ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.099ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19684 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.069ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19683 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:10:00.364190   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19683å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.537ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19684,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61760,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61759,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61758,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61757,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61756,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61755,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61754,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61753,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8},{""id"":61752,""record_id"":19684,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:10:00.306386+08:00"",""updated_at"":""2026-02-28T16:10:00.306386+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:10:00.364" WHERE `id` = 19684
I0228 16:10:00.364726   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19684 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.685ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:10:00.364","2026-02-28 16:10:00.364",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:10:00.364","2026-02-28 16:10:00.364") RETURNING `id`

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.648ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:10:00.364861   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.134ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19684 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.327ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:10:00.364",`error_count`=0,`updated_at`="2026-02-28 16:10:00.364" WHERE `id` = 7
I0228 16:10:00.365164   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19685
I0228 16:10:00.365170   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.442ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.882ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:10:00.364",`error_count`=9,`updated_at`="2026-02-28 16:10:00.365" WHERE `id` = 19684
I0228 16:10:00.365635   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19684 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.319ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.119ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:10:00.364",`error_count`=9,`updated_at`="2026-02-28 16:10:00.365" WHERE `id` = 8
I0228 16:10:00.365797   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.916ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.035ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19684 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.025ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.023ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:10:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.995ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266200",200,true,957075416,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266200 -> 200 SUCCESS (957.08ms)","{""request"":{""timestamp"":""2026-02-28T16:10:00.365746+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266200"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:10:01.322818+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:10:01 GMT"",""Request-Id"":""5660031fb5d3d8d8acfdf436f0d20318"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=382, cdn-cache;desc=MISS, origin;dur=394, edge;dur=0"",""Tt_stable"":""1"",""Via"":""p8-131-015.hetangshan-cm116-bm.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722662015660031fb5d3d8d8acfdf436f0d20318"",""X-Lgw-Dst-Svc"":""Yu9LWErt7_oAnL8jofux02zHO2SPsSqPHEldyiOh78BccdEspT5goXv1gDMPLszufdx6uTwp19o_-kdVQpSTcePh-gLeqWmtFNxa7Lz5V_Y25Wk0eFQzPDOsjvFVcxQ41uWzVVmWx72FuVJGkOHIbCQ6RY9CZg5CZBxlBjk4bckM6VQAmZUSn-n3OJc-fx8wGvkieYcF_4Que1R604J2lhVUX4KfhpuIG-6KbcYftJx3myVO--d5FZQ65aTs8Ohrd7Kc4decyy_yNzhFSB9iPNAhM2l4z8crDO9Pky6DKpYwgtS030zIsVqpyCD1cIsjQPpGg612BA3MzQcfsrA3_UR51nWV82-cB1fFKBI0aSdpjfg="",""X-Request-Id"":""5660031fb5d3d8d8acfdf436f0d20318"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266201.432"",""X-Tt-Logid"":""2026022816100108C37130304F17CA543E"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a415972eef7c611e090e15e862c429be60b62371bd58bf188f7b87e9498a1829393c4d482083e4688fa07b0ae19ce4095610a4cefde855825d346d5c41b63237f1103be65e33a17e8bf03b1645fc35c1c7e"",""X-Tt-Trace-Id"":""00-a34c216f03010e1f0777c6f8744a0000-a34c216f03010e1f-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":957075416,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266200 -\u003e 200 SUCCESS (957.08ms)""}","2026-02-28 16:10:00.365","2026-02-28 16:10:01.323","2026-02-28 16:10:01.323") RETURNING `id`
I0228 16:10:01.326198   90330 http_logger.go:329] Webhook log saved to database with ID: 5507

2026/02/28 16:10:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.904ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266200",200,true,995053333,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266200 -> 200 SUCCESS (995.05ms)","{""request"":{""timestamp"":""2026-02-28T16:10:00.365995+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266200"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:10:01.361045+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:10:01 GMT"",""Request-Id"":""7d3cbead8ec7298e890a0ae86b8a418d"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=397, cdn-cache;desc=MISS, origin;dur=421, edge;dur=0"",""Tt_stable"":""1"",""Via"":""p8-131-019.hetangshan-cm116-bm.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722662017d3cbead8ec7298e890a0ae86b8a418d"",""X-Lgw-Dst-Svc"":""zWvEN0VQPHZM6uwAMcBsjEe4Vu5KLZdnJy-oTjd3-dt4T-mY9SLaeIsayPGPgfjQ4Ru9CurQuYZ7EpZH-mRR_QL254Hyu-RvSXtyCAG66i8m_EsTDC65Wv4Dtv28dBE8VVhNJyTeNo9HBUNVcDefsnn-Xi2PPWJnQ8Ct_BHk9O2rzHbkVWsACHGTzJ0a-LDa4ltr-SicISmfm39P9Pb49sB6ktIEYVZ2ciORc7TNZJFYw_hbX7OU_l6WV2Kaek83qjgLCfKi0E-N1_6MLXqmaxr5Ak8-GLH313iEuIYR7lwenZh1JZG6C_ZJUNZQ1Midoq1RDGF7TxbNcV-ewlODFtACgHDFO6ZSl5RkTWfqwRuEtRA="",""X-Request-Id"":""7d3cbead8ec7298e890a0ae86b8a418d"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266201.467"",""X-Tt-Logid"":""20260228161001FB2E6C343B69FCB42E60"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41255e948d661fa0224e73b31a750e2756d01df03cbfa7ab377600443c2772649c6b69c78194c690752af73c04f35f087fba14808f4b7ff31135ecc750bfcf658e12e493c5b9851d1dc8b8e61375d731bd"",""X-Tt-Trace-Id"":""00-a34c217603010ffe9e72b1aeb93c0000-a34c217603010ffe-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":995053333,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266200 -\u003e 200 SUCCESS (995.05ms)""}","2026-02-28 16:10:00.365","2026-02-28 16:10:01.361","2026-02-28 16:10:01.361") RETURNING `id`
I0228 16:10:01.362187   90330 http_logger.go:329] Webhook log saved to database with ID: 5508
I0228 16:11:20.848951   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=8
I0228 16:11:20.858544   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1133465&timeout=6m7s&timeoutSeconds=367&watch=true" status="200 OK" milliseconds=5
I0228 16:15:00.000745   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:15:00.001684   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:15:00.000790   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:15:00.002618   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.379ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.322ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[12.507ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:15:00.005",NULL,0,"","","","2026-02-28 16:15:00.013","2026-02-28 16:15:00.013") RETURNING `id`

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[11.413ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:15:00.007",NULL,0,"","","","2026-02-28 16:15:00.018","2026-02-28 16:15:00.018") RETURNING `id`
I0228 16:15:00.019151   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")
I0228 16:15:00.019753   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.114ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:15:00.019820   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19686

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.065ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.147ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19686 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.555ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.882ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:15:00.021502   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:15:00.021720   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:15:00.027844   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=5
I0228 16:15:00.031984   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:15:00.032070   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:15:00.038245   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=5

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:15:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:15:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[235.465ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19686 AND event_status = "å¤±è´¥"

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[192.688ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8),(19687,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:15:00.256","2026-02-28 16:15:00.256",8) RETURNING `id`

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.966ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19686 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:15:00.278764   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19686 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.724ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19687,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:15:00.02","2026-02-28 16:15:00.064","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:15:00.278","2026-02-28 16:15:00.278") RETURNING `id`
I0228 16:15:00.279192   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19687

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.478ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19686 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.119ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19687 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.131ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19686,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:15:00.279" WHERE `id` = 19686
I0228 16:15:00.279465   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19686 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.266ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.118ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19686 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.230ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:15:00.279",`error_count`=0,`updated_at`="2026-02-28 16:15:00.279" WHERE `id` = 19686
I0228 16:15:00.279732   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19686 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.183ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19687 AND event_status = "å¤±è´¥"

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.278ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.852ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19687 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.890ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19686 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:15:00.299860   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19687 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:15:00.299944   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»
I0228 16:15:00.299877   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19686å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[20.454ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:15:00.279",`error_count`=0,`updated_at`="2026-02-28 16:15:00.299" WHERE `id` = 7
I0228 16:15:00.300218   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.302ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19687 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.343ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:15:00.300338   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.150ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.346ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19687,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61769,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61768,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61767,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61766,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61765,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61764,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61763,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61762,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8},{""id"":61761,""record_id"":19687,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:15:00.256684+08:00"",""updated_at"":""2026-02-28T16:15:00.256684+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:15:00.3" WHERE `id` = 19687
I0228 16:15:00.300685   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19687 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.484ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.356ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:15:00.3",`error_count`=9,`updated_at`="2026-02-28 16:15:00.3" WHERE `id` = 19687
I0228 16:15:00.301078   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19687 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.398ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19687 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.003ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:15:00.3","2026-02-28 16:15:00.3",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:15:00.301","2026-02-28 16:15:00.301") RETURNING `id`

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.394ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:15:00.3",`error_count`=9,`updated_at`="2026-02-28 16:15:00.301" WHERE `id` = 8
I0228 16:15:00.301507   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.418ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.735ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19687 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.321ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:15:00.3",`error_count`=0,`updated_at`="2026-02-28 16:15:00.301" WHERE `id` = 7
I0228 16:15:00.301762   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19688
I0228 16:15:00.301769   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.112ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.026ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:15:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.029ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266500",200,true,1569130208,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266500 -> 200 SUCCESS (1569.13ms)","{""request"":{""timestamp"":""2026-02-28T16:15:00.301852+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266500"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:15:01.870977+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:15:01 GMT"",""Request-Id"":""18d3e6c91258db13adcdf9a7e0ecc496"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1063, cdn-cache;desc=MISS, origin;dur=1086, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-154.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226650018d3e6c91258db13adcdf9a7e0ecc496"",""X-Lgw-Dst-Svc"":""oxXJEWHWzBRfzT1Y5CRp0LTEq2tFHGizMAtAtrMMe4nKcPWkKEESlZBxR3ZfGf6XN8YAgCrxQJw2y2wasw6FhvRW-usn96sK0HCb-l7NxZYhvNZ5dlKhRFu-smCm5qRi7HpA70MDdefAlb8ZEzPojj_477Ev4-nxoA0ugfxHlj7d3VZonoczvp9XrRcbeuAlh2cI7B44shqwLGFrXT1i43aLAA-8UyupBaDUneuy4JfLxxfm-M_OVW0h9aZNN9hKcOB590EEmYIGvWJ7hrHseUmUlDdx9c1D4NqWeLJySJm7aPZUn3qi7CApRXDIFcHTeeng22fuVwG2vl3wQx67dUBtwnv9WKRukPKbMDy0oPoLPx8="",""X-Request-Id"":""18d3e6c91258db13adcdf9a7e0ecc496"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266501.958"",""X-Tt-Logid"":""2026022816150019F26C505A0576D83918"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a417ba5f367de6ee1f4c51249c81bb9655c3bbaf24c3abed7af936f371e492a06d83fd18683ad52ff657b2244981d46d8f94a11f92e4a04b069b4c4ee488f9057fb148febbd72152c5fbf5a7934c8fa8c8e"",""X-Tt-Trace-Id"":""00-a350b4ad03010515ed53b569d6de0000-a350b4ad03010515-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1569130208,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266500 -\u003e 200 SUCCESS (1569.13ms)""}","2026-02-28 16:15:00.301","2026-02-28 16:15:01.871","2026-02-28 16:15:01.871") RETURNING `id`
I0228 16:15:01.873411   90330 http_logger.go:329] Webhook log saved to database with ID: 5509

2026/02/28 16:15:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[11.104ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266500",200,true,2558481000,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266500 -> 200 SUCCESS (2558.48ms)","{""request"":{""timestamp"":""2026-02-28T16:15:00.30167+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266500"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:15:02.860142+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:15:02 GMT"",""Request-Id"":""2f4f307a89f52222963c9c779ed66515"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2077, cdn-cache;desc=MISS, origin;dur=2094, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-144.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722665002f4f307a89f52222963c9c779ed66515"",""X-Lgw-Dst-Svc"":""nsPLG_ShNV1U333fMYNQMZIdR_OOf4kXcpn5oFNYEjxvF5IkVPgj5lH7JZZAvNPn__Kw6REPIpIgD3hegmir80JpBn-oE8xqXWgxGwGkJ8bRfHcfCaOesbwqsBZDNUHR_gp5_H-O2yvzlXRk8Tb6__T6i8kBFGB10ygLoqy04d6KeEHtAUe0lguBJz9RR0jGW0eUkpRvDVAyAaXEn9hOfgWbkhKjELaFEAhkbRFwWyJ0ubUaNYshTmvF-jaLRnhHUyhPN1epdOm6hdWtTJLC2U6uHp0pRU4P9pUYmrKmSeQdLYM-4-STxFeXRe-6Pmx5YhLov-xZZCYZ-Q-Qmg5bdAkvJeKvcg0HkZQA9DruUdTY2tE="",""X-Request-Id"":""2f4f307a89f52222963c9c779ed66515"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266502.953"",""X-Tt-Logid"":""20260228161500D5EA16ABD2D337D44F92"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41cb04a3c1bb4ab65897adfb06e8ae714af0e174c541d4a10e9d209803c0d3b0804ac1b05501f3899993652ee4c05365268ec4ef8fa917da3ab6f7831ddb2492f33c3a55a4029b676afd8446b77412779f"",""X-Tt-Trace-Id"":""00-a350b49e03010b9df7ffede1f0a40000-a350b49e03010b9d-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":2558481000,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266500 -\u003e 200 SUCCESS (2558.48ms)""}","2026-02-28 16:15:00.301","2026-02-28 16:15:02.862","2026-02-28 16:15:02.862") RETURNING `id`
I0228 16:15:02.875617   90330 http_logger.go:329] Webhook log saved to database with ID: 5510
I0228 16:17:27.858003   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=8
I0228 16:17:27.864968   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1133833&timeout=5m29s&timeoutSeconds=329&watch=true" status="200 OK" milliseconds=5
I0228 16:20:00.021184   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:20:00.021942   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:20:00.021469   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:20:00.022471   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.220ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.458ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.614ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:20:00.023",NULL,0,"","","","2026-02-28 16:20:00.024","2026-02-28 16:20:00.024") RETURNING `id`

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.702ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:20:00.024",NULL,0,"","","","2026-02-28 16:20:00.025","2026-02-28 16:20:00.025") RETURNING `id`
I0228 16:20:00.026230   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:20:00.026291   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.192ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.265ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.149ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:20:00.026777   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19689

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.710ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.771ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19689 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.132ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:20:00.029131   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:20:00.029266   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:20:00.046842   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=15
I0228 16:20:00.050077   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:20:00.050120   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:20:00.081708   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=31

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:20:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:20:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[274.704ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19689 AND event_status = "å¤±è´¥"

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[201.718ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8),(19690,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:20:00.302","2026-02-28 16:20:00.302",8) RETURNING `id`

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[29.104ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19689 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:20:00.331843   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19689 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[28.408ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19690,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:20:00.027","2026-02-28 16:20:00.101","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:20:00.331","2026-02-28 16:20:00.331") RETURNING `id`
I0228 16:20:00.332177   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19690

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.524ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19689 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.271ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19690 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.284ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19689,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:20:00.332" WHERE `id` = 19689
I0228 16:20:00.332711   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19689 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.373ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.161ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19689 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[12.382ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19690 AND event_status = "å¤±è´¥"

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[12.604ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[26.518ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19690 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:20:00.371980   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19690 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:20:00.372053   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[39.379ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:20:00.332",`error_count`=0,`updated_at`="2026-02-28 16:20:00.371" WHERE `id` = 19689
I0228 16:20:00.372151   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19689 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[26.663ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19689 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:20:00.372246   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19689å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.228ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:20:00.332",`error_count`=0,`updated_at`="2026-02-28 16:20:00.372" WHERE `id` = 7
I0228 16:20:00.372426   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.371ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19690 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.296ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:20:00.372568   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.215ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.541ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19690,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61778,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61777,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61776,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61775,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61774,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61773,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61772,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61771,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8},{""id"":61770,""record_id"":19690,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:20:00.302622+08:00"",""updated_at"":""2026-02-28T16:20:00.302622+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:20:00.372" WHERE `id` = 19690
I0228 16:20:00.373115   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19690 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.693ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[12.225ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:20:00.373",`error_count`=9,`updated_at`="2026-02-28 16:20:00.373" WHERE `id` = 19690
I0228 16:20:00.385401   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19690 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[12.537ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19690 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[12.571ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.485ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:20:00.373",`error_count`=9,`updated_at`="2026-02-28 16:20:00.385" WHERE `id` = 8
I0228 16:20:00.386937   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[14.554ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:20:00.372","2026-02-28 16:20:00.372",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:20:00.386","2026-02-28 16:20:00.386") RETURNING `id`

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.691ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.678ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:20:00.372",`error_count`=0,`updated_at`="2026-02-28 16:20:00.387" WHERE `id` = 7
I0228 16:20:00.387982   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19691
I0228 16:20:00.387989   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.700ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19690 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.049ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.041ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:20:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.379ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266800",200,true,1359641083,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266800 -> 200 SUCCESS (1359.64ms)","{""request"":{""timestamp"":""2026-02-28T16:20:00.386076+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266800"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:20:01.745712+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:20:01 GMT"",""Request-Id"":""da4541617e1f912ee646ed7423a522a6"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=372, cdn-cache;desc=MISS, origin;dur=382, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-138.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772266801da4541617e1f912ee646ed7423a522a6"",""X-Lgw-Dst-Svc"":""0iIlEiHDiSCKtQsM21satAEZ5THB-4ESzStpHD0xfkoUvmFuCZKICiUCKxMDnv7aoYUV2RQJkVZ2cWWVhPxwKEXBYw259zwQVPrffJim5iv-a18X5mG2FTN2gh7Es-7s-K5ImR88RYCLpwAdxIUEYvXVg3j_SKYuuWokrsVj0knIYO76_29WD-OaPkp2uXIMd62mdc8OlmYbwXka4jspnIKodm8aClKePBpLo33kkgKPVFV8o2WUquD77cx3eiQ1KZjFv2RwxlaOb542nLXvovD3Rf5kXAjGV9nC91j4jnly0urZ8nR1gVUklx4WZ42hrBt0ZJh76mYS_dSqmEQBBxyRWIQ6Zb3mWmvwhoiPOzNHk48="",""X-Request-Id"":""da4541617e1f912ee646ed7423a522a6"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266801.756"",""X-Tt-Logid"":""20260228162001AA3E5AE73387C4D636C0"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41e6d8acc36923b9d9bb39d4b0be094f3267d3d1426ea54b856f78ca4153fddad1120b7936f2304cf2197eef9f4bf92241bddaf78b409870fc783f16166b2a31ec0c10adea40d16ee625c05011824976be"",""X-Tt-Trace-Id"":""00-a3554a7d03010ae3587246c2eb450000-a3554a7d03010ae3-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1359641083,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266800 -\u003e 200 SUCCESS (1359.64ms)""}","2026-02-28 16:20:00.386","2026-02-28 16:20:01.746","2026-02-28 16:20:01.746") RETURNING `id`
I0228 16:20:01.747602   90330 http_logger.go:329] Webhook log saved to database with ID: 5511

2026/02/28 16:20:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.176ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266800",200,true,1357512250,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772266800 -> 200 SUCCESS (1357.51ms)","{""request"":{""timestamp"":""2026-02-28T16:20:00.38828+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266800"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:20:01.745786+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:20:01 GMT"",""Request-Id"":""3067e4a65a2f5448e23859aed8b69d6c"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=347, cdn-cache;desc=MISS, origin;dur=369, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-138.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722668013067e4a65a2f5448e23859aed8b69d6c"",""X-Lgw-Dst-Svc"":""MjojpdbugxFLWUiaUldaoxoe-UbqoWbMfW2vlTO4OBm459sHiue3nsj9e9zKuX7yBL_iUO8SXlds94gNJ7LNpE6PJjKtDmyLqHRd15L_lHbbc34eiKGTfmNl0bWzEEWGsgl73_2XIUFUQfIuI0uasqlxGHqCcMKE2FzZwXgF2RkleLqZ7s6VRd4o1OxiojcJ9j0l4G4uDEmAmnomm8GUviJAhsnI3H9XGkYjmG8RiVw-CuYAROa8t80htaYE445Tm575G89Fq-U__xy56JW2txaUsR2EEqGIFOkD5d38iBe2XubW0ojLAdaE2qDQ0wtHHB9fciyzyKrm061DtY77sC5F0veGoiazt9xfWnRVALbrEhI="",""X-Request-Id"":""3067e4a65a2f5448e23859aed8b69d6c"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772266801.810"",""X-Tt-Logid"":""20260228162001C4043F0334451ED2AFB7"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41e6d8acc36923b9d9bb39d4b0be094f32fe8f27a788cec9603c7812f31cad2494dbc719e7651486e95036e9f03039aa228054abb37e4a9f3c50748183d09a76ce39b87c4762050d603622feb7256e13e9"",""X-Tt-Trace-Id"":""00-a3554ac60301023131709e0d6a4a0000-a3554ac603010231-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1357512250,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772266800 -\u003e 200 SUCCESS (1357.51ms)""}","2026-02-28 16:20:00.388","2026-02-28 16:20:01.747","2026-02-28 16:20:01.747") RETURNING `id`
I0228 16:20:01.748402   90330 http_logger.go:329] Webhook log saved to database with ID: 5512
I0228 16:22:56.870140   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=6
I0228 16:22:56.884124   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1134143&timeout=6m37s&timeoutSeconds=397&watch=true" status="200 OK" milliseconds=3
I0228 16:25:00.006124   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:25:00.006124   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:25:00.007236   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:25:00.007267   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[20.768ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[20.355ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.480ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:25:00.034",NULL,0,"","","","2026-02-28 16:25:00.036","2026-02-28 16:25:00.036") RETURNING `id`

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.759ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:25:00.034",NULL,0,"","","","2026-02-28 16:25:00.037","2026-02-28 16:25:00.037") RETURNING `id`
I0228 16:25:00.040350   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:25:00.040357   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.399ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.433ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.254ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.273ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:25:00.042202   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19693

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.065ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19693 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.053ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:25:00.046311   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:25:00.047031   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:25:00.055025   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=7
I0228 16:25:00.061995   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:25:00.062031   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:25:00.070918   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=8

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:25:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:25:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[269.101ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19693 AND event_status = "å¤±è´¥"

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[223.070ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8),(19692,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:25:00.311","2026-02-28 16:25:00.311",8) RETURNING `id`

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[33.994ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19693 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:25:00.346285   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19693 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[32.085ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19692,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:25:00.043","2026-02-28 16:25:00.088","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:25:00.346","2026-02-28 16:25:00.346") RETURNING `id`
I0228 16:25:00.347030   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19692

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.344ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19693 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.113ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19692 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.151ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19693,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:25:00.347" WHERE `id` = 19693
I0228 16:25:00.347296   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19693 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.664ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.609ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:25:00.347",`error_count`=0,`updated_at`="2026-02-28 16:25:00.347" WHERE `id` = 19693
I0228 16:25:00.347945   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19693 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.133ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19692 AND event_status = "å¤±è´¥"

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.904ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19693 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.290ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:25:00.347",`error_count`=0,`updated_at`="2026-02-28 16:25:00.358" WHERE `id` = 7
I0228 16:25:00.358285   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.504ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19692 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.380ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:25:00.367693   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19692 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.635ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.327ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:25:00.367","2026-02-28 16:25:00.367",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:25:00.367","2026-02-28 16:25:00.367") RETURNING `id`
I0228 16:25:00.367961   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.307ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19693 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.096ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:25:00.367",`error_count`=0,`updated_at`="2026-02-28 16:25:00.368" WHERE `id` = 7
I0228 16:25:00.368166   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19693å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.101ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19692 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.057ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:25:00.368183   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19694
I0228 16:25:00.368375   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ
I0228 16:25:00.368476   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.423ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19692,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61787,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61786,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61785,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61784,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61783,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61782,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61781,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61780,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8},{""id"":61779,""record_id"":19692,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:25:00.311962+08:00"",""updated_at"":""2026-02-28T16:25:00.311962+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:25:00.368" WHERE `id` = 19692
I0228 16:25:00.368674   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19692 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.658ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:25:00.368",`error_count`=9,`updated_at`="2026-02-28 16:25:00.368" WHERE `id` = 19692
I0228 16:25:00.369362   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19692 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.680ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19692 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.084ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:25:00.368",`error_count`=9,`updated_at`="2026-02-28 16:25:00.369" WHERE `id` = 8
I0228 16:25:00.369466   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.104ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.034ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19692 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[1.164ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[1.281ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.036ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:25:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.067ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:25:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.186ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267100",200,true,1701143667,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267100 -> 200 SUCCESS (1701.14ms)","{""request"":{""timestamp"":""2026-02-28T16:25:00.372353+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267100"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:25:02.073493+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:25:02 GMT"",""Request-Id"":""4bc6cfa030f074f57ab365cfb98e5663"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1396, cdn-cache;desc=MISS, origin;dur=1412, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-160.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722671004bc6cfa030f074f57ab365cfb98e5663"",""X-Lgw-Dst-Svc"":""PKpYxrHXYwAiAxIVBjn5bgxafsABOSVIAYMTEo5lSvGfnyC0PaLScSYNLzfHc3F1itJk4FTN_xuSjIvgcZC6gLzTwvvCqiX6_TA0KO16iRG5c9Lw3o-FKQu7llS_dnP7_3cNqXk9c9zJOWev_RpQZ9A-fRje0tS_KUGRnuQVzhvIFHhNT5K6MXl3mU6sksz5S0zRasUdJM--m7cxA-TzIg6slWOrZxNNnQESXHze1FiRVgh_KoAI0fPxXDaQdAtI1j_6E2TsPbKpXm5e9HJxIvKVDobqBC8RohoeU_VN2VHOclpjPT1G10vCUPyT8dcNOWjDi9yXmI3Wq5qthhqZZ7d0itsZrgk0m363rlBXaLAB40Q="",""X-Request-Id"":""4bc6cfa030f074f57ab365cfb98e5663"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267102.174"",""X-Tt-Logid"":""202602281625003E0DE8AD72B9B9B857B6"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a418b5f8d13a95fb52bde4e764ede3239e25dadb650674cf6b6ae39db702ec1cf7ae5aa4f232fb2de080fd4852f92de2384bef744e9937820c57e17c4fc6f9cf7a1e2dc961c63e60adc83ab5d5ad51f9ee7"",""X-Tt-Trace-Id"":""00-a359dbf9030108ca5dbac713570f0000-a359dbf9030108ca-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1701143667,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267100 -\u003e 200 SUCCESS (1701.14ms)""}","2026-02-28 16:25:00.372","2026-02-28 16:25:02.075","2026-02-28 16:25:02.075") RETURNING `id`
I0228 16:25:02.078098   90330 http_logger.go:329] Webhook log saved to database with ID: 5513

2026/02/28 16:25:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.287ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267100",200,true,2697099875,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267100 -> 200 SUCCESS (2697.10ms)","{""request"":{""timestamp"":""2026-02-28T16:25:00.372353+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267100"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:25:03.069446+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:25:03 GMT"",""Request-Id"":""e834ccdc0a81ba02476f7c9a9bb85c23"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2367, cdn-cache;desc=MISS, origin;dur=2397, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-152.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772267100e834ccdc0a81ba02476f7c9a9bb85c23"",""X-Lgw-Dst-Svc"":""jgxHnc7zWld11dKcfOgcl03vCjllvWM3-3ybVcHlSXxY6110gX_ysINzO-S3Rc8tsC1ccf_H6XSqIB_SgdF3LbBRPvNnElV3KVLLi-pmZNVvpfF51NvDmjzNeqttUkHzX9Ew57ehgyieNDyXDeF3Y6l4fFyx5H6cPbLU5sIk8c7TfgFHC9baFWOGwS8TOpLgyhj6xXn6hii3Ao-ikjM1JcPiezlb5GZH9_fXRu5FbW1mpwlwbNp4voCYLQdxVay1lmD_OoFUV33mLp2tDJ49062QQrqw0tu6xrMaJtwMRms1mI7Um5p1eIoz86BrcErTG8fa1mUwwPa5tiBPvNPgE3y-Fs2wbQT1UlgAvu44OqTPg_U="",""X-Request-Id"":""e834ccdc0a81ba02476f7c9a9bb85c23"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267103.155"",""X-Tt-Logid"":""2026022816250025429E4594E16FD97049"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a419994b639fb09cd83bbb6172bc53c0e32f3b4486812c9325f23c4c40fa89af7fa434f0f781e59d05b776c65ae41f7606959ad9271fd2e9c8d84bd77056b00ac1cb0e2fae799742343ff5d8aec2cfc80dc"",""X-Tt-Trace-Id"":""00-a359dbfc030103c32f321ce017100000-a359dbfc030103c3-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":2697099875,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267100 -\u003e 200 SUCCESS (2697.10ms)""}","2026-02-28 16:25:00.372","2026-02-28 16:25:03.069","2026-02-28 16:25:03.069") RETURNING `id`
I0228 16:25:03.071084   90330 http_logger.go:329] Webhook log saved to database with ID: 5514
I0228 16:29:33.883462   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=7
I0228 16:29:33.888929   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1134548&timeout=6m37s&timeoutSeconds=397&watch=true" status="200 OK" milliseconds=3
I0228 16:30:00.001038   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:30:00.001404   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:30:00.001030   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:30:00.001545   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.322ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.977ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.136ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:30:00.003",NULL,0,"","","","2026-02-28 16:30:00.003","2026-02-28 16:30:00.003") RETURNING `id`

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.150ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:30:00.003",NULL,0,"","","","2026-02-28 16:30:00.005","2026-02-28 16:30:00.005") RETURNING `id`
I0228 16:30:00.006010   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.189ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.150ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:30:00.006611   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19695

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.169ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19695 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.151ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:30:00.007046   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[221.668ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19695 AND event_status = "å¤±è´¥"

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[221.742ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[20.323ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19695 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:30:00.249332   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19695 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[20.451ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.178ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19695 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.239ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19695,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:30:00.249" WHERE `id` = 19695
I0228 16:30:00.249802   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:30:00.249811   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19695 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“
I0228 16:30:00.249846   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.107ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:30:00.249",`error_count`=0,`updated_at`="2026-02-28 16:30:00.249" WHERE `id` = 19695
I0228 16:30:00.249981   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19695 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.177ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19695 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.319ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:30:00.249",`error_count`=0,`updated_at`="2026-02-28 16:30:00.25" WHERE `id` = 7
I0228 16:30:00.250330   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.277ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.103ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.098ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19695 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:30:00.250500   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19695å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.329ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:30:00.25","2026-02-28 16:30:00.25",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:30:00.25","2026-02-28 16:30:00.25") RETURNING `id`

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.318ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:30:00.250839   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.100ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:30:00.25",`error_count`=0,`updated_at`="2026-02-28 16:30:00.25" WHERE `id` = 7
I0228 16:30:00.250926   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19697
I0228 16:30:00.250933   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.185ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.030ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000
I0228 16:30:00.255882   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=5
I0228 16:30:00.257723   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:30:00.257737   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:30:00.263494   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=5

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:30:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:30:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[15.764ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8),(19696,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:30:00.278","2026-02-28 16:30:00.278",8) RETURNING `id`

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[0.436ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19696,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:30:00.249","2026-02-28 16:30:00.277","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:30:00.294","2026-02-28 16:30:00.294") RETURNING `id`
I0228 16:30:00.294596   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19696

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.058ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19696 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.041ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.465ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19696 AND event_status = "å¤±è´¥"

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.265ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19696 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:30:00.314648   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19696 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:30:00.314664   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.134ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19696 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.507ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19696,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61796,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61795,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61794,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61793,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61792,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61791,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61790,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61789,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8},{""id"":61788,""record_id"":19696,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:30:00.278432+08:00"",""updated_at"":""2026-02-28T16:30:00.278432+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:30:00.314" WHERE `id` = 19696
I0228 16:30:00.315398   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19696 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.236ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:30:00.315",`error_count`=9,`updated_at`="2026-02-28 16:30:00.315" WHERE `id` = 19696
I0228 16:30:00.315664   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19696 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.255ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19696 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.129ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:30:00.315",`error_count`=9,`updated_at`="2026-02-28 16:30:00.315" WHERE `id` = 8
I0228 16:30:00.315818   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.142ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.043ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19696 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.035ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:30:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.025ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:30:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.727ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267400",200,true,1089113083,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267400 -> 200 SUCCESS (1089.11ms)","{""request"":{""timestamp"":""2026-02-28T16:30:00.25119+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:30:01.3403+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:30:01 GMT"",""Request-Id"":""ec29459d49bb893b9058ac3be0347905"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=394, cdn-cache;desc=MISS, origin;dur=401, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-054.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772267401ec29459d49bb893b9058ac3be0347905"",""X-Lgw-Dst-Svc"":""9jLU2SZMp-baHbZQFwASAgTQg4zipxoWWO6JrjcrcJeC6wVJ7GKJJVsqCyDZByTLTDVaW1vwIuw47rf52uPkCDNkp6awUP-ngA3nRFAt-JV7qlx00lE8C7TxFGXtleIKjMlIcX2BG6wPQFSeKZU39IW2RJOrNno8llKSLcq8f9Z5I2OiI7UaFvh5km-GOC--s4yxH1H8koOX27VNcF2aJ5VjVtQMkuvFM1AsJMZ3m-cxJuY-Kiv2J1r-XsiBdiScMKxIVYS-_HfMPyJ90bN3EcgVstNjA2OgFoLTus85iov61Hg5TT1DkHFsRja7vsz9q9zRBVnwrr7L0hsFkARcaW4iMvvog8WxSejW6t6xutcpprI="",""X-Request-Id"":""ec29459d49bb893b9058ac3be0347905"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267401.424"",""X-Tt-Logid"":""202602281630015A8BE3686842C4CF01BA"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a410e4c3dcce6c98deb7b581a2e533b59fb6e85fc4b4c61543326e0526527fbac42a7114cb4972217dc3d58df98e182153d6fba911c6fa3e1ac3505a9aaa2f56be940cae1abee6ddde839ff992dab67489e"",""X-Tt-Trace-Id"":""00-a35e70de03010bdd259c04193ad60000-a35e70de03010bdd-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1089113083,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267400 -\u003e 200 SUCCESS (1089.11ms)""}","2026-02-28 16:30:00.251","2026-02-28 16:30:01.34","2026-02-28 16:30:01.34") RETURNING `id`
I0228 16:30:01.342364   90330 http_logger.go:329] Webhook log saved to database with ID: 5515

2026/02/28 16:30:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.931ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267400",200,true,1133198208,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267400 -> 200 SUCCESS (1133.20ms)","{""request"":{""timestamp"":""2026-02-28T16:30:00.316044+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:30:01.449238+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:30:01 GMT"",""Request-Id"":""127d42b6d5b44859674de3f5df51810f"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=352, cdn-cache;desc=MISS, origin;dur=370, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-058.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772267401127d42b6d5b44859674de3f5df51810f"",""X-Lgw-Dst-Svc"":""SBHxibdOJ_OeBLl4aejKTaWuMATWfhW7cU0ozC-GVUUOrOU5n4bQ9FDcue2Q4sCXFU_ZHmSope2tI2mEwC0zGj4lWMbIJxqqk4OUp7giPAOP2-iB-tZY2SqTQCAfsd17lLkVPgZvSl7SyPhJi-mQBaj0cqbXm6SZ6HY039rq0iTg9gKkslU5N7VLFLMfy7FtwmAjzMz5KpcPFbNAzaQqGpZDbBRlPYtJGcxfAqbJgORMD5CzYEaH-btZiobcUYISZr0D3_vTOIsbmFqzesaK2iLvXtuGBh6T_zCa7Ih4DuIGtNhTsJU5zeY2fzC1HnUYplZg6_gpWqtBRp2bMHOz0dStf5WZfuqkT3Sp_50osdA4lM8="",""X-Request-Id"":""127d42b6d5b44859674de3f5df51810f"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267401.450"",""X-Tt-Logid"":""2026022816300146C2FE16D6AC09DF191B"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41e56ed61171c4a88746cb30c7fd8ec3eeb5146dbcaa7d9bedcd14a51ec49ae36d676d24515d647478664163c2a5b4e6c680c3131e7020019f1268691aa7ccfdbc95a60d83cc9250e5015fb4745de480a2"",""X-Tt-Trace-Id"":""00-a35e711e030106b0e056179160870000-a35e711e030106b0-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1133198208,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267400 -\u003e 200 SUCCESS (1133.20ms)""}","2026-02-28 16:30:00.316","2026-02-28 16:30:01.449","2026-02-28 16:30:01.449") RETURNING `id`
I0228 16:30:01.452636   90330 http_logger.go:329] Webhook log saved to database with ID: 5516
I0228 16:34:57.869480   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 9

2026/02/28 16:34:57 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[16.601ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "9" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 16:34:57.922988   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 9 åˆ°æ–‡ä»¶: rrrd.yaml, namespace=, role=
2026/02/28 16:34:57 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/9/export HTTP/1.1" from 127.0.0.1:64047 - 200 2994B in 61.890666ms
I0228 16:35:00.005178   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:35:00.005178   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:35:00.005494   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 16:35:00.005496   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[4.968ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[5.191ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.072ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:35:00.011",NULL,0,"","","","2026-02-28 16:35:00.012","2026-02-28 16:35:00.012") RETURNING `id`

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.584ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:35:00.012",NULL,0,"","","","2026-02-28 16:35:00.015","2026-02-28 16:35:00.015") RETURNING `id`
I0228 16:35:00.016619   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 16:35:00.016955   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.402ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.373ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.407ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.503ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:35:00.018551   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19699

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.271ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19699 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.163ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:35:00.020466   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:35:00.020826   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:35:00.030191   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=8
I0228 16:35:00.032630   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:35:00.032673   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:35:00.038859   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=5

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:35:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:35:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[262.342ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19699 AND event_status = "å¤±è´¥"

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[227.227ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8),(19698,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:35:00.282","2026-02-28 16:35:00.282",8) RETURNING `id`

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.779ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19699 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:35:00.305226   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19699 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.992ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19698,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:35:00.018","2026-02-28 16:35:00.055","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:35:00.304","2026-02-28 16:35:00.304") RETURNING `id`
I0228 16:35:00.305562   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19698

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.073ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19698 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.129ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19699 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.237ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.495ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19699,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:35:00.305" WHERE `id` = 19699
I0228 16:35:00.306255   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19699 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.452ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19698 AND event_status = "å¤±è´¥"

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.976ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19699 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.800ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19698 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:35:00.328407   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19698 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[22.059ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:35:00.306",`error_count`=0,`updated_at`="2026-02-28 16:35:00.328" WHERE `id` = 19699
I0228 16:35:00.328526   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19699 çŠ¶æ€å·²æ›´æ–°ä¸º: success
I0228 16:35:00.328437   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[8.684ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.388ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:35:00.306",`error_count`=0,`updated_at`="2026-02-28 16:35:00.328" WHERE `id` = 7
I0228 16:35:00.328960   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.373ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19699 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:35:00.329039   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19699å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.446ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19698 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:35:00.329324   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.591ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19698,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61805,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61804,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61803,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61802,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61801,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61800,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61799,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61798,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8},{""id"":61797,""record_id"":19698,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:35:00.282273+08:00"",""updated_at"":""2026-02-28T16:35:00.282273+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:35:00.329" WHERE `id` = 19698
I0228 16:35:00.329755   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19698 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.769ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.295ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:35:00.329",`error_count`=9,`updated_at`="2026-02-28 16:35:00.329" WHERE `id` = 19698
I0228 16:35:00.330078   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19698 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.682ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:35:00.329","2026-02-28 16:35:00.329",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:35:00.33","2026-02-28 16:35:00.33") RETURNING `id`

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.566ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:35:00.329",`error_count`=9,`updated_at`="2026-02-28 16:35:00.33" WHERE `id` = 8
I0228 16:35:00.330678   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.860ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19698 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.160ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:35:00.329",`error_count`=0,`updated_at`="2026-02-28 16:35:00.33" WHERE `id` = 7
I0228 16:35:00.331067   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19700
I0228 16:35:00.331091   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.055ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[1.094ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.047ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19698 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.076ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.057ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:35:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.026ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:35:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.300ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267700",200,true,1563110542,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267700 -> 200 SUCCESS (1563.11ms)","{""request"":{""timestamp"":""2026-02-28T16:35:00.331399+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267700"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:35:01.894505+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:35:01 GMT"",""Request-Id"":""369e036bee4ae919eb0c3a9965e6d696"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1080, cdn-cache;desc=MISS, origin;dur=1091, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-147.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772267700369e036bee4ae919eb0c3a9965e6d696"",""X-Lgw-Dst-Svc"":""zSe1tSrevfowLBg13dCHXIbAKJV959JnILJqjRjRpsPQBlvRJcvjVGQ0hf-39MINQ5aNV4ivLCXu7AhOMOPSAEKeKjGIZpUd-jZNqUVrc6AV8gyicpqPKoIVjYMh25RQNHQN03l0CpdOi8hFSjPbnimAGbpbDG5SKlXErnpJDOFB6LNBa7GTCGEibwfm6TuOoOREMjWk25deANn7z0ux3iKBkwhgIQJ5y0JSeAXFKgBVElEivtkMwJOtXb2jc_h1fXi0XfJqcEbrwyRTCbeqXaiDOf_tF9lFOSAQ85Un5p0Ym7HLMZ_7naO6AQRI2mI0JNeSICEsRWtqhDFy4ZGJ1E1AKsIOl1R5TQFtAxM1HldQafw="",""X-Request-Id"":""369e036bee4ae919eb0c3a9965e6d696"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267701.978"",""X-Tt-Logid"":""20260228163500B3788B5FBBC536B834A5"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41ca5d05850a24a9c97011473f4d75e613f75ff92f9e78b3a12bbdabf8379e4a673d9ab2cfcbb454677ee71d9b4c8dd91f5da53abe4a36d6d1826c112e5183838331bf9089be13fe32e17c6488fc55ff0a"",""X-Tt-Trace-Id"":""00-a363043603010ed8f0cada166a310000-a363043603010ed8-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1563110542,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267700 -\u003e 200 SUCCESS (1563.11ms)""}","2026-02-28 16:35:00.331","2026-02-28 16:35:01.899","2026-02-28 16:35:01.899") RETURNING `id`
I0228 16:35:01.904589   90330 http_logger.go:329] Webhook log saved to database with ID: 5517

2026/02/28 16:35:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.106ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267700",200,true,2543282291,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772267700 -> 200 SUCCESS (2543.28ms)","{""request"":{""timestamp"":""2026-02-28T16:35:00.331318+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267700"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:35:02.874592+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:35:02 GMT"",""Request-Id"":""c89b715a6a4f67d96cd82f585cd9fb3b"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2076, cdn-cache;desc=MISS, origin;dur=2089, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-138.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772267700c89b715a6a4f67d96cd82f585cd9fb3b"",""X-Lgw-Dst-Svc"":""IJfKH6LSh4DJw7n-gAEBQnUKXBT4gxcI-LWeGw-V7gOi-tiBIwZ96EatFrm3nEHmdVw4PFw1iBqUg-h1ielYIf-tcA234A1O7q_k51KeVdRnEdtXRzV74h8a7BpQv5E5GSqhoDAhdHpvDl7K6TWuIZwRUv3O4_IAQYv9eM58LBhQrJ6c6HeTwHJVWohCuHPxaLYZ8SMVtkkSrrrvybD7bWuhaDDxoCxwqo6wZGXgvMqLRQKtIGxBpR83LAKHjNstOI-HyFePHURTmmBQOhFaKqieys5yRxupNmvIgTnfpaS9mY3kkWMIKKAAlGvTsynl1Hped3luYOytEpiDNKBCte-6RKceCQpO_5mc-xHGWjUQtvA="",""X-Request-Id"":""c89b715a6a4f67d96cd82f585cd9fb3b"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772267702.977"",""X-Tt-Logid"":""202602281635009B3C69F7AD8929D4E1FD"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41e6d8acc36923b9d9bb39d4b0be094f320e2992c6d25627fc1606fb1ce4dae0cc4359838be956e5a822989d255512eeaf7898eb96cea077a659f8dc3069138ce79a5a359e64bd80a640b99e2032832094"",""X-Tt-Trace-Id"":""00-a363043903010247ff490fd2ce790000-a363043903010247-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":2543282291,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772267700 -\u003e 200 SUCCESS (2543.28ms)""}","2026-02-28 16:35:00.331","2026-02-28 16:35:02.875","2026-02-28 16:35:02.875") RETURNING `id`
I0228 16:35:02.876317   90330 http_logger.go:329] Webhook log saved to database with ID: 5518
2026/02/28 16:35:03 "GET http://127.0.0.1:3618/params/config/FloatingWindow HTTP/1.1" from 127.0.0.1:64112 - 200 68B in 2.980208ms
2026/02/28 16:35:03 "GET http://127.0.0.1:3618/params/config/ProductName HTTP/1.1" from 127.0.0.1:64114 - 200 66B in 7.498083ms
I0228 16:35:03.462248   90330 manager_api.go:194] è·å–æ’ä»¶èœå•åˆ—è¡¨ï¼Œå…±è®¡7ä¸ª

2026/02/28 16:35:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.411ms] [34;1m[rows:1][0m SELECT `group_names` FROM `users` WHERE  username = "k8m" ORDER BY `users`.`id` LIMIT 1

2026/02/28 16:35:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[4.762ms] [34;1m[rows:1][0m SELECT `group_names` FROM `users` WHERE  username = "k8m" ORDER BY `users`.`id` LIMIT 1

2026/02/28 16:35:03 [32m/Users/weibh/projects/go/k8m/pkg/service/user.go:162
[0m[33m[2.933ms] [34;1m[rows:2][0m SELECT DISTINCT `role` FROM `user_groups` WHERE group_name in ("å¹³å°ç®¡ç†å‘˜ç»„","ç‰¹å°”æ˜¯")
2026/02/28 16:35:03 "GET http://127.0.0.1:3618/params/user/role HTTP/1.1" from 127.0.0.1:64111 - 200 111B in 14.09275ms

2026/02/28 16:35:03 [32m/Users/weibh/projects/go/k8m/pkg/service/user.go:162
[0m[33m[0.472ms] [34;1m[rows:2][0m SELECT DISTINCT `role` FROM `user_groups` WHERE group_name in ("å¹³å°ç®¡ç†å‘˜ç»„","ç‰¹å°”æ˜¯")
2026/02/28 16:35:03 "GET http://127.0.0.1:3618/params/plugin/menus HTTP/1.1" from 127.0.0.1:64109 - 200 936B in 16.512333ms
I0228 16:35:03.500026   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions" status="200 OK" milliseconds=30
2026/02/28 16:35:03 "GET http://127.0.0.1:3618/k8s/cluster/d253e44012953eb7f6cee9cd928470ba/crd/status HTTP/1.1" from 127.0.0.1:64113 - 200 117B in 112.119291ms
2026/02/28 16:35:04 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:64143 - 200 67B in 251.375Âµs
2026/02/28 16:35:04 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:64144 - 200 67B in 2.708375ms
I0228 16:35:04.152797   90330 mgm.go:18] è·å– kubeconfig æ¨¡æ¿åˆ—è¡¨

2026/02/28 16:35:04 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:117
[0m[33m[52.128ms] [34;1m[rows:8][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "kube_configs" AND sql IS NOT NULL order by type = "table" desc

2026/02/28 16:35:04 [32m/Users/weibh/go/pkg/mod/github.com/glebarez/sqlite@v1.11.0/migrator.go:125
[0m[33m[0.092ms] [34;1m[rows:-][0m SELECT * FROM `kube_configs` LIMIT 1

2026/02/28 16:35:04 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.094ms] [34;1m[rows:1][0m SELECT count(*) FROM `kube_configs`

2026/02/28 16:35:04 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[4.903ms] [34;1m[rows:8][0m SELECT * FROM `kube_configs` ORDER BY id desc LIMIT 10
2026/02/28 16:35:04 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/templates?page=1&perPage=10 HTTP/1.1" from 127.0.0.1:64149 - 200 725B in 66.1405ms
I0228 16:35:05.456510   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 8

2026/02/28 16:35:05 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.311ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "8" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 16:35:05.459662   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 8 åˆ°æ–‡ä»¶: å¼€å‘é›†ç¾¤.yaml, namespace=, role=
2026/02/28 16:35:05 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/8/export HTTP/1.1" from 127.0.0.1:64156 - 200 2994B in 3.418ms
I0228 16:35:15.058425   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 7

2026/02/28 16:35:15 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[6.520ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "7" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 16:35:15.080267   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 7 åˆ°æ–‡ä»¶: tokené›†ç¾¤.yaml, namespace=, role=
2026/02/28 16:35:15 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/7/export HTTP/1.1" from 127.0.0.1:64210 - 200 1213B in 23.815ms
I0228 16:35:25.689790   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 9

2026/02/28 16:35:25 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.790ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "9" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 16:35:25.699321   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 9 åˆ°æ–‡ä»¶: rrrd.yaml, namespace=, role=
2026/02/28 16:35:25 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/9/export HTTP/1.1" from 127.0.0.1:64294 - 200 2994B in 17.298375ms

2026/02/28 16:35:29 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[3.089ms] [34;1m[rows:1][0m SELECT * FROM `ai_prompts` WHERE prompt_type = "AnySelection" AND is_enabled = true ORDER BY `ai_prompts`.`id` LIMIT 1
I0228 16:35:29.350496   90330 ai.go:139] ChatGPT çŠ¶æ€:true
I0228 16:35:29.350584   90330 ai.go:125] ai BaseURL: https://api.siliconflow.cn/v1
I0228 16:35:29.350611   90330 ai.go:126] ai Model : Qwen/Qwen2.5-7B-Instruct
I0228 16:35:29.350661   90330 ai.go:127] ai Key: sk-df**********************************************
I0228 16:35:29.350874   90330 openai.go:77] openai client using default proxy from environment
I0228 16:35:29.350920   90330 openai_completion.go:19] å…³é—­  æ€è€ƒ  åŠŸèƒ½ å†…å®¹[ è¯·ä½ ä½œä¸ºkubernetes k8s æŠ€æœ¯ä¸“å®¶ï¼Œè¯·ä½ è¯¦ç»†è§£é‡Šä¸‹é¢çš„æ–‡å­—ï¼š Disposition ã€‚
		\næ³¨æ„ï¼š
		\n- ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›ç­”
		\n- ä½ æˆ‘ä¹‹é—´åªè¿›è¡Œè¿™ä¸€è½®äº¤äº’ï¼Œåé¢ä¸è¦å†é—®é—®é¢˜äº†
		\n- è¯·ä½ åœ¨ç»™å‡ºç­”æ¡ˆå‰åæ€ä¸‹å›ç­”æ˜¯å¦é€»è¾‘æ­£ç¡®ï¼Œå¦‚æœ‰é—®é¢˜è¯·å…ˆä¿®æ­£ï¼Œå†è¿”å›
		\n- å›ç­”è¦ç›´æ¥ï¼Œä¸è¦åŠ å…¥ä¸Šä¸‹è¡”æ¥ã€å¼€ç¯‡è¯­æ°”è¯ã€ç»“å°¾è¯­æ°”è¯ç­‰å•°å—¦çš„ä¿¡æ¯
		\n- è¯·ä¸è¦å‘æˆ‘æé—®ï¼Œä¹Ÿä¸è¦å‘æˆ‘ç¡®è®¤ä¿¡æ¯ï¼Œè¯·ä¸è¦è®©æˆ‘æ£€æŸ¥markdownæ ¼å¼
		\n- ä¸è¦ä½¿ç”¨å·¥å…·tools
]

2026/02/28 16:35:29 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.511ms] [34;1m[rows:1][0m SELECT * FROM `ai_prompts` WHERE prompt_type = "AnySelection" AND is_enabled = true ORDER BY `ai_prompts`.`id` LIMIT 1
I0228 16:35:29.538320   90330 ai.go:139] ChatGPT çŠ¶æ€:true
I0228 16:35:29.539283   90330 openai_completion.go:19] å…³é—­  æ€è€ƒ  åŠŸèƒ½ å†…å®¹[ è¯·ä½ ä½œä¸ºkubernetes k8s æŠ€æœ¯ä¸“å®¶ï¼Œè¯·ä½ è¯¦ç»†è§£é‡Šä¸‹é¢çš„æ–‡å­—ï¼š Should have "Content-Disposition" in Header ã€‚
		\næ³¨æ„ï¼š
		\n- ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›ç­”
		\n- ä½ æˆ‘ä¹‹é—´åªè¿›è¡Œè¿™ä¸€è½®äº¤äº’ï¼Œåé¢ä¸è¦å†é—®é—®é¢˜äº†
		\n- è¯·ä½ åœ¨ç»™å‡ºç­”æ¡ˆå‰åæ€ä¸‹å›ç­”æ˜¯å¦é€»è¾‘æ­£ç¡®ï¼Œå¦‚æœ‰é—®é¢˜è¯·å…ˆä¿®æ­£ï¼Œå†è¿”å›
		\n- å›ç­”è¦ç›´æ¥ï¼Œä¸è¦åŠ å…¥ä¸Šä¸‹è¡”æ¥ã€å¼€ç¯‡è¯­æ°”è¯ã€ç»“å°¾è¯­æ°”è¯ç­‰å•°å—¦çš„ä¿¡æ¯
		\n- è¯·ä¸è¦å‘æˆ‘æé—®ï¼Œä¹Ÿä¸è¦å‘æˆ‘ç¡®è®¤ä¿¡æ¯ï¼Œè¯·ä¸è¦è®©æˆ‘æ£€æŸ¥markdownæ ¼å¼
		\n- ä¸è¦ä½¿ç”¨å·¥å…·tools
]
I0228 16:35:30.676712   90330 openai_completion.go:84] GetStreamCompletionWithTools æºå¸¦ history length: 2
I0228 16:35:30.676817   90330 openai_completion.go:84] GetStreamCompletionWithTools æºå¸¦ history length: 2
I0228 16:35:30.678960   90330 sse.go:88] ws Client connected
I0228 16:35:30.679433   90330 sse.go:88] ws Client connected
I0228 16:35:31.028173   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 8

2026/02/28 16:35:31 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.759ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "8" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 16:35:31.033028   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 8 åˆ°æ–‡ä»¶: å¼€å‘é›†ç¾¤.yaml, namespace=, role=
2026/02/28 16:35:31 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/8/export HTTP/1.1" from 127.0.0.1:64337 - 200 2994B in 5.44475ms
I0228 16:35:32.019198   90330 sse.go:95] stream close 
2026/02/28 16:35:32 "GET http://127.0.0.1:3618/mgm/plugins/ai/chat/any_selection?question=Should%20have%20%22Content-Disposition%22%20in%20Header&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NzIyNzA2ODAsImlzUGxhdGZvcm1BZG1pbiI6dHJ1ZSwidXNlcm5hbWUiOiJrOG0ifQ.9RntJZlxRFWbAfFgsOrF3xaD6iohtq10n_GthIyjX-Q HTTP/1.1" from 127.0.0.1:64318 - 000 0B in 2.484597584s
I0228 16:35:33.562997   90330 sse.go:95] stream close 
2026/02/28 16:35:33 "GET http://127.0.0.1:3618/mgm/plugins/ai/chat/any_selection?question=Disposition&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NzIyNzA2ODAsImlzUGxhdGZvcm1BZG1pbiI6dHJ1ZSwidXNlcm5hbWUiOiJrOG0ifQ.9RntJZlxRFWbAfFgsOrF3xaD6iohtq10n_GthIyjX-Q HTTP/1.1" from 127.0.0.1:64312 - 000 0B in 4.223961209s

2026/02/28 16:35:34 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.355ms] [34;1m[rows:1][0m SELECT * FROM `ai_prompts` WHERE prompt_type = "AnySelection" AND is_enabled = true ORDER BY `ai_prompts`.`id` LIMIT 1
I0228 16:35:34.134030   90330 ai.go:139] ChatGPT çŠ¶æ€:true
I0228 16:35:34.134072   90330 openai_completion.go:19] å…³é—­  æ€è€ƒ  åŠŸèƒ½ å†…å®¹[ è¯·ä½ ä½œä¸ºkubernetes k8s æŠ€æœ¯ä¸“å®¶ï¼Œè¯·ä½ è¯¦ç»†è§£é‡Šä¸‹é¢çš„æ–‡å­—ï¼š Should have "Content-Disposition" in Header ã€‚
		\næ³¨æ„ï¼š
		\n- ä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›ç­”
		\n- ä½ æˆ‘ä¹‹é—´åªè¿›è¡Œè¿™ä¸€è½®äº¤äº’ï¼Œåé¢ä¸è¦å†é—®é—®é¢˜äº†
		\n- è¯·ä½ åœ¨ç»™å‡ºç­”æ¡ˆå‰åæ€ä¸‹å›ç­”æ˜¯å¦é€»è¾‘æ­£ç¡®ï¼Œå¦‚æœ‰é—®é¢˜è¯·å…ˆä¿®æ­£ï¼Œå†è¿”å›
		\n- å›ç­”è¦ç›´æ¥ï¼Œä¸è¦åŠ å…¥ä¸Šä¸‹è¡”æ¥ã€å¼€ç¯‡è¯­æ°”è¯ã€ç»“å°¾è¯­æ°”è¯ç­‰å•°å—¦çš„ä¿¡æ¯
		\n- è¯·ä¸è¦å‘æˆ‘æé—®ï¼Œä¹Ÿä¸è¦å‘æˆ‘ç¡®è®¤ä¿¡æ¯ï¼Œè¯·ä¸è¦è®©æˆ‘æ£€æŸ¥markdownæ ¼å¼
		\n- ä¸è¦ä½¿ç”¨å·¥å…·tools
]
I0228 16:35:34.392772   90330 openai_completion.go:84] GetStreamCompletionWithTools æºå¸¦ history length: 2
I0228 16:35:34.393124   90330 sse.go:88] ws Client connected
I0228 16:35:35.008727   90330 sse.go:95] stream close 
2026/02/28 16:35:35 "GET http://127.0.0.1:3618/mgm/plugins/ai/chat/any_selection?question=Should%20have%20%22Content-Disposition%22%20in%20Header&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NzIyNzA2ODAsImlzUGxhdGZvcm1BZG1pbiI6dHJ1ZSwidXNlcm5hbWUiOiJrOG0ifQ.9RntJZlxRFWbAfFgsOrF3xaD6iohtq10n_GthIyjX-Q HTTP/1.1" from 127.0.0.1:64357 - 000 0B in 876.001417ms
I0228 16:36:10.888579   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=7
I0228 16:36:10.893450   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1134941&timeout=7m50s&timeoutSeconds=470&watch=true" status="200 OK" milliseconds=3
I0228 16:40:00.011778   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:40:00.011772   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:40:00.014726   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 16:40:00.014694   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[22.621ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[23.089ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.895ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:40:00.045",NULL,0,"","","","2026-02-28 16:40:00.047","2026-02-28 16:40:00.047") RETURNING `id`

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.399ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:40:00.045",NULL,0,"","","","2026-02-28 16:40:00.049","2026-02-28 16:40:00.049") RETURNING `id`
I0228 16:40:00.052757   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:40:00.053590   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.498ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.538ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.301ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.312ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:40:00.055248   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19702

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.058ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19702 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:40:00.059823   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:40:00.060498   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:40:00.089640   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=21
I0228 16:40:00.097422   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:40:00.097457   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:40:00.103367   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=5

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:40:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:40:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[324.968ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19702 AND event_status = "å¤±è´¥"

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[262.163ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8),(19701,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:40:00.381","2026-02-28 16:40:00.381",8) RETURNING `id`

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.697ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19702 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:40:00.403496   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19702 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.936ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19701,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:40:00.055","2026-02-28 16:40:00.118","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:40:00.403","2026-02-28 16:40:00.403") RETURNING `id`
I0228 16:40:00.404133   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19701

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.062ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19702 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.076ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19701 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.465ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19702,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:40:00.404" WHERE `id` = 19702

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.449ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:40:00.404669   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19702 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.024ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19701 AND event_status = "å¤±è´¥"

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.495ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19702 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.715ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19701 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:40:00.424602   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19701 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[19.885ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:40:00.404",`error_count`=0,`updated_at`="2026-02-28 16:40:00.424" WHERE `id` = 19702
I0228 16:40:00.424743   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19702 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.918ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:40:00.425628   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.513ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:40:00.404",`error_count`=0,`updated_at`="2026-02-28 16:40:00.426" WHERE `id` = 7
I0228 16:40:00.426311   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.600ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19702 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.151ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.606ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19701 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:40:00.426452   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19702å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.163ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:40:00.426","2026-02-28 16:40:00.426",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:40:00.426","2026-02-28 16:40:00.426") RETURNING `id`

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.391ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19701,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61814,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61813,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61812,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61811,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61810,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61809,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61808,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61807,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8},{""id"":61806,""record_id"":19701,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:40:00.381396+08:00"",""updated_at"":""2026-02-28T16:40:00.381396+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:40:00.426" WHERE `id` = 19701
I0228 16:40:00.426981   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19701 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.341ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.420ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:40:00.426",`error_count`=0,`updated_at`="2026-02-28 16:40:00.427" WHERE `id` = 7
I0228 16:40:00.427157   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false
I0228 16:40:00.427124   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19703
I0228 16:40:00.427299   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.571ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:40:00.426",`error_count`=9,`updated_at`="2026-02-28 16:40:00.427" WHERE `id` = 19701
I0228 16:40:00.427581   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19701 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.621ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19701 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.262ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:40:00.426",`error_count`=9,`updated_at`="2026-02-28 16:40:00.427" WHERE `id` = 8
I0228 16:40:00.427870   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.288ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19701 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.932ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.959ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:40:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.109ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:40:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.794ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268000",200,true,3432134209,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268000 -> 200 SUCCESS (3432.13ms)","{""request"":{""timestamp"":""2026-02-28T16:40:00.430475+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268000"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:40:03.86259+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:40:03 GMT"",""Request-Id"":""a35ad68c89e2337cf0243031fd56fced"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2073, cdn-cache;desc=MISS, origin;dur=2089, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-160.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772268001a35ad68c89e2337cf0243031fd56fced"",""X-Lgw-Dst-Svc"":""Aw1LVR_Nfjbxaq7n8C_FvexhxEf2JpDwyTc6THBf41vnoSBMEOJV071wXim8rwZbSdJPB1yNJ2pnPBzQMpQs5kyynW3MB5S17t63iHZf8RvsXiz_o2spalRREK1hatXLM7A0X67gpjOemhM7I6IUXYULO1sRZlNi2EVMXvbwRzWx--Sl9KRX5GzKZt1eXLCbIqsc-ES5n2-3OK-DPOfu0jWTqEj0tizSXIoiJjt7ucAw9ITpp_kcuiTUtTlxbqQVgu_tSvhM-7tEBqM8zTP7i3O2QMZJuszGac-0L-X_cZDPZKUyTQ48z5FD_i4dL_Pxu34Aa_91LMGdF0O-LewnHYLDdznlSABm5acl2PdH22t1y1I="",""X-Request-Id"":""a35ad68c89e2337cf0243031fd56fced"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268003.974"",""X-Tt-Logid"":""2026022816400139FA2C76BE0786ACB9B0"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a418b5f8d13a95fb52bde4e764ede3239e25dadb650674cf6b6ae39db702ec1cf7a5e4a972762e463cb9a272618eadf06f5d4634f1608201e42a0f29cbb3cd1ef0b4b97be5ddd19197612977dbe6b0d7c20"",""X-Tt-Trace-Id"":""00-a3679bfc03010263db54fe9090580000-a3679bfc03010263-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":3432134209,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268000 -\u003e 200 SUCCESS (3432.13ms)""}","2026-02-28 16:40:00.43","2026-02-28 16:40:03.864","2026-02-28 16:40:03.864") RETURNING `id`
I0228 16:40:03.866452   90330 http_logger.go:329] Webhook log saved to database with ID: 5519

2026/02/28 16:40:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.194ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268000",200,true,3438351958,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268000 -> 200 SUCCESS (3438.35ms)","{""request"":{""timestamp"":""2026-02-28T16:40:00.430475+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268000"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:40:03.868808+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:40:03 GMT"",""Request-Id"":""6abe1e21339b19a8091b05d517e96a18"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2078, cdn-cache;desc=MISS, origin;dur=2097, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-160.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722680016abe1e21339b19a8091b05d517e96a18"",""X-Lgw-Dst-Svc"":""JJSzQTWbLBpCXjF11X-C4NZr1JigLCSa8SofhX6NvtEbD7lS4ikbzvD8x9UOLe1IOvHkT8uHxOCmnbM6Pi0JZX9uVj_jI3Em3v674o5F6Z9LtGgoq7m2jv_KhLtpPmlYoSg1YqD_bk2dPeZMP57M2h-cjxg7bYbEsj2Ak__3sQk9ipilU0aRIUiL1FB-2Vd7Fz-2TLnvUZLe9Ypty2pL4NxBx9WTDvqgpPX1L7oJwSGzgAX963UQ1K_9Nah-0u3wHFJpLPMyty8JIMTCLvy6UGoFAPScA8XYe6K_i4igW3ozvYKKXfYH-Mzyf52UwW0QsGAoO868ddngcl3wPYveJnf6Ik9HFzJXHJzY-zUWaYdLNr4="",""X-Request-Id"":""6abe1e21339b19a8091b05d517e96a18"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268003.979"",""X-Tt-Logid"":""20260228164001E2D57E85BA11ECDA8CB3"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a418b5f8d13a95fb52bde4e764ede3239e26c1d9f11322a2a6a726da665a1b3ddcd689b491c0e6ece6383903903191df60105f47ed6e73376a14f71464c97ff2d9f33b7fd7e91a26872434a414079a41fe6"",""X-Tt-Trace-Id"":""00-a3679bfb03010e201e91a276bbb20000-a3679bfb03010e20-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":3438351958,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268000 -\u003e 200 SUCCESS (3438.35ms)""}","2026-02-28 16:40:00.43","2026-02-28 16:40:03.869","2026-02-28 16:40:03.869") RETURNING `id`
I0228 16:40:03.870261   90330 http_logger.go:329] Webhook log saved to database with ID: 5520
I0228 16:44:00.876989   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=8
I0228 16:44:00.881723   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1135392&timeout=5m57s&timeoutSeconds=357&watch=true" status="200 OK" milliseconds=2
I0228 16:45:00.001893   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:45:00.003360   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 16:45:00.001893   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:45:00.003646   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[3.733ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[3.786ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.936ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:45:00.009",NULL,0,"","","","2026-02-28 16:45:00.009","2026-02-28 16:45:00.009") RETURNING `id`

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.532ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:45:00.009",NULL,0,"","","","2026-02-28 16:45:00.011","2026-02-28 16:45:00.011") RETURNING `id`
I0228 16:45:00.012659   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:45:00.012792   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.217ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.241ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.118ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:45:00.013235   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19704

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.562ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.596ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19704 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.126ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:45:00.014880   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:45:00.014991   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:45:00.019247   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=3
I0228 16:45:00.024048   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:45:00.024139   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:45:00.031900   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=7

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:45:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:45:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[226.526ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19704 AND event_status = "å¤±è´¥"

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[188.592ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8),(19705,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:45:00.24","2026-02-28 16:45:00.24",8) RETURNING `id`

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.139ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19704 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:45:00.262062   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19704 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[20.850ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19705,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:45:00.013","2026-02-28 16:45:00.052","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:45:00.262","2026-02-28 16:45:00.262") RETURNING `id`
I0228 16:45:00.262340   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19705

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.288ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19704 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.069ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19705 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.276ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19704,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:45:00.262" WHERE `id` = 19704
I0228 16:45:00.262689   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19704 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.438ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.190ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19704 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.340ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19705 AND event_status = "å¤±è´¥"

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.432ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.887ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19705 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:45:00.283312   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19705 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:45:00.283326   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[20.734ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:45:00.262",`error_count`=0,`updated_at`="2026-02-28 16:45:00.283" WHERE `id` = 19704
I0228 16:45:00.283476   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19704 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.110ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19704 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:45:00.283532   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19704å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.225ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19705 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.088ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:45:00.283649   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.383ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19705,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61823,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61822,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61821,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61820,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61819,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61818,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61817,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61816,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8},{""id"":61815,""record_id"":19705,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:45:00.240798+08:00"",""updated_at"":""2026-02-28T16:45:00.240798+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:45:00.283" WHERE `id` = 19705
I0228 16:45:00.284021   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19705 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.738ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:45:00.262",`error_count`=0,`updated_at`="2026-02-28 16:45:00.283" WHERE `id` = 7
I0228 16:45:00.284253   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.732ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.192ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.685ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:45:00.284",`error_count`=9,`updated_at`="2026-02-28 16:45:00.284" WHERE `id` = 19705
I0228 16:45:00.284730   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19705 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.867ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19705 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.267ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:45:00.284",`error_count`=9,`updated_at`="2026-02-28 16:45:00.284" WHERE `id` = 8
I0228 16:45:00.285026   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.619ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.163ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19705 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.023ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.393ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:45:00.284","2026-02-28 16:45:00.284",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:45:00.284","2026-02-28 16:45:00.284") RETURNING `id`

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.023ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:45:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.371ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:45:00.284",`error_count`=0,`updated_at`="2026-02-28 16:45:00.285" WHERE `id` = 7
I0228 16:45:00.285629   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19706
I0228 16:45:00.285639   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:45:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.797ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268300",200,true,1633328875,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268300 -> 200 SUCCESS (1633.33ms)","{""request"":{""timestamp"":""2026-02-28T16:45:00.285113+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268300"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:45:01.918433+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:45:02 GMT"",""Request-Id"":""6a8b5448571a486a0c82cb3a73dd0196"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1135, cdn-cache;desc=MISS, origin;dur=1160, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-144.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722683006a8b5448571a486a0c82cb3a73dd0196"",""X-Lgw-Dst-Svc"":""xztoL7mGngTKfJymPEaLiRruNyRFTyOMF606BEmK3Mgsc3Le0Nv4ol0gTR87EFj_S8mtB3qr_OXeA-LUuOADdVfO_6TEJ2lyPmNodwYyTfhO4F85qbv-dBjnKL_FFcY9mx8qP4uP6Cd1su5k71tdP2r7yRADQ62slN4LZy_glQKjjkmg3qIDK807BEECPS6V6bMnHWAxlV2GksQ1bTYa_4rdeTwvKRhjZjzITwcEQo_-LoCkfQk5GL9jdayzUc5hR5OJOyUNQaWn9sOSzy8uic8JxLf_skr0mYHOiLr43Hh9hV73Dcx4Ed9el5IfFL7BDrEq6zhIr6ln5zQaYksiEUiwVReTQboDe2UoMiv1Ud4ooQ=="",""X-Request-Id"":""6a8b5448571a486a0c82cb3a73dd0196"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268302.016"",""X-Tt-Logid"":""2026022816450038AF9F06C8154DDC01B1"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41cb04a3c1bb4ab65897adfb06e8ae714a11e3b5ac7053844decf443767b08676a87ece639eef50ed9e596e4ce19e4fe7e33b2ea6aafc15eb008ee618b533bbf7199e88e07f4930de6ff046febc3b1c776"",""X-Tt-Trace-Id"":""00-a36c2be2030102b96e044599fe520000-a36c2be2030102b9-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1633328875,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268300 -\u003e 200 SUCCESS (1633.33ms)""}","2026-02-28 16:45:00.285","2026-02-28 16:45:01.918","2026-02-28 16:45:01.918") RETURNING `id`
I0228 16:45:01.921734   90330 http_logger.go:329] Webhook log saved to database with ID: 5521

2026/02/28 16:45:02 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.335ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268300",200,true,2582315334,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268300 -> 200 SUCCESS (2582.32ms)","{""request"":{""timestamp"":""2026-02-28T16:45:00.285257+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268300"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:45:02.867558+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:45:02 GMT"",""Request-Id"":""72b7ef4e4ac400b069f5763308f2e068"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=2084, cdn-cache;desc=MISS, origin;dur=2109, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-029-155.hbcdcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226830072b7ef4e4ac400b069f5763308f2e068"",""X-Lgw-Dst-Svc"":""s7VPsKfKRHHpm-4IsFfTdszelF6tGjp5N6bO6dLqPkLBLvptjBMGFVAP8QKLjySbyJqnLFzLfGDLFn_QzpmpS3ZiM870eLj1vnClwrKGFogXhuBv41LK1htYE3tDHuCQE3mTEG1ScEflMaRZULzVBPfwA8nvh05oH4WywWRsgjIP580KRT3QM8rnW0kNluEMUymV6Hcfz2AtZH2ysAyZPgBlEsdZpItwFCu_wIvzoCY66iedmvc2WWKW0O8cmzhlg3sOvqMz1p6-rH_hIUKTfeh0moR_onn5n0NwWQpDYW9unfsvk_IQ7qiHsMnIz4Ppj_LNLKfmdY_eZUH1g6SQsx8Vs0BJDtb3ge3LMTVc2RoCTG4="",""X-Request-Id"":""72b7ef4e4ac400b069f5763308f2e068"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268302.966"",""X-Tt-Logid"":""20260228164500E60285A0D40714D4DB27"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a414b2acb0cf19d9765f86d9155cf30e8eebdf1f091635450c3d4f4c7648fa3ef85e0eb92cf7ff4042b72f42d359a0de349af46f4bb819b25af4a423c099120d4bab673183f17acdb305a1fd826ead0a96f"",""X-Tt-Trace-Id"":""00-a36c2be3030106b081c39589671b0000-a36c2be3030106b0-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":2582315334,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268300 -\u003e 200 SUCCESS (2582.32ms)""}","2026-02-28 16:45:00.285","2026-02-28 16:45:02.867","2026-02-28 16:45:02.867") RETURNING `id`
I0228 16:45:02.870343   90330 http_logger.go:329] Webhook log saved to database with ID: 5522
I0228 16:49:57.882623   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=6
I0228 16:49:57.887718   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1135746&timeout=8m36s&timeoutSeconds=516&watch=true" status="200 OK" milliseconds=4
I0228 16:50:00.001525   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:50:00.001839   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 16:50:00.001673   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:50:00.002039   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.529ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.230ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.102ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:50:00.003",NULL,0,"","","","2026-02-28 16:50:00.004","2026-02-28 16:50:00.004") RETURNING `id`

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.150ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:50:00.004",NULL,0,"","","","2026-02-28 16:50:00.006","2026-02-28 16:50:00.006") RETURNING `id`
I0228 16:50:00.006857   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.204ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")
I0228 16:50:00.007252   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.090ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 16:50:00.007318   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19707

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.058ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.152ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19707 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[22.121ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[23.660ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:50:00.033038   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:50:00.033142   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:50:00.040052   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=6
I0228 16:50:00.042700   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:50:00.042750   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:50:00.055456   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=12

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:50:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:50:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[233.320ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19707 AND event_status = "å¤±è´¥"

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[187.348ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8),(19708,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:50:00.265","2026-02-28 16:50:00.265",8) RETURNING `id`

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.747ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19707 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:50:00.287494   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19707 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.485ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19708,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:50:00.032","2026-02-28 16:50:00.076","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:50:00.287","2026-02-28 16:50:00.287") RETURNING `id`
I0228 16:50:00.287914   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19708

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.455ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19707 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.093ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19708 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.143ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19707,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:50:00.288" WHERE `id` = 19707
I0228 16:50:00.288168   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19707 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.347ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.213ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19707 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.325ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:50:00.288",`error_count`=0,`updated_at`="2026-02-28 16:50:00.288" WHERE `id` = 19707
I0228 16:50:00.288519   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19707 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.119ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.123ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:50:00.288",`error_count`=0,`updated_at`="2026-02-28 16:50:00.288" WHERE `id` = 7
I0228 16:50:00.288664   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.636ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19708 AND event_status = "å¤±è´¥"

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.613ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19707 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:50:00.300199   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19707å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.939ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19708 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:50:00.310118   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19708 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 16:50:00.310130   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.961ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:50:00.310194   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.088ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19708 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[21.616ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.280ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.859ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:50:00.31","2026-02-28 16:50:00.31",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:50:00.31","2026-02-28 16:50:00.31") RETURNING `id`

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.569ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.114ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:50:00.31",`error_count`=0,`updated_at`="2026-02-28 16:50:00.311" WHERE `id` = 7
I0228 16:50:00.311352   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19709
I0228 16:50:00.311358   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[1.893ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19708,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61832,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61831,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61830,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61829,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61828,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61827,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61826,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61825,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8},{""id"":61824,""record_id"":19708,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:50:00.26564+08:00"",""updated_at"":""2026-02-28T16:50:00.26564+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:50:00.311" WHERE `id` = 19708
I0228 16:50:00.312206   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19708 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.251ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:50:00.312",`error_count`=9,`updated_at`="2026-02-28 16:50:00.312" WHERE `id` = 19708
I0228 16:50:00.312481   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19708 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.321ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19708 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.167ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:50:00.312",`error_count`=9,`updated_at`="2026-02-28 16:50:00.312" WHERE `id` = 8
I0228 16:50:00.312681   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.103ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19708 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.028ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:50:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:50:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.661ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268600",200,true,968544958,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268600 -> 200 SUCCESS (968.54ms)","{""request"":{""timestamp"":""2026-02-28T16:50:00.311279+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268600"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:50:01.279819+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:50:01 GMT"",""Request-Id"":""40ce56e3154009a4e4be9aeadc215149"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=357, cdn-cache;desc=MISS, origin;dur=382, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-160.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226860040ce56e3154009a4e4be9aeadc215149"",""X-Lgw-Dst-Svc"":""2Zg4ebHJXinq2pF_H0_KSs06SUHyk5Cyk9pQnZIKgvPqhP6B_rQSxdaixaqMGJ0_SI-uHH5-UO7NbGzrTKOro-s0NrBzfPsLG4MLQrGM4zRWKlhl5SznCf1K85afYSgwn0q5XehHbJib7C0JzvUQ8yxfllUzNoxDI-G3Ic5XGyQuVh7tEmK8pCkfCIz6UGNwn0KUs76gD_SaP1Q8CBHEScbrkRb1qk_kaKYRLJHIZ7RbEbtP-Tiu1M_Fm_Fjb85vXKt943VLvrvN9EgrVtj4_xKxHKPXeZYlVaTnQQ532PdVnh9497ytsoDum4Z2emIrH8omIkhSzwh4I6siisx3sxhcwfvyl51hUp5cu7c-Ddt0rZU="",""X-Request-Id"":""40ce56e3154009a4e4be9aeadc215149"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268601.364"",""X-Tt-Logid"":""20260228165001EB330ECE05CBD6DC8EE2"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a418b5f8d13a95fb52bde4e764ede3239e2f4ec8ba194f171d402469041c8c362aaf603be94ee0a4e9122a720c8561b59a51a947a8486922b0c4b32f98a26e4dca968e3369b3a70d7da7485a759ac429f66"",""X-Tt-Trace-Id"":""00-a370c0380301075a3812029cfae20000-a370c0380301075a-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":968544958,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268600 -\u003e 200 SUCCESS (968.54ms)""}","2026-02-28 16:50:00.311","2026-02-28 16:50:01.28","2026-02-28 16:50:01.28") RETURNING `id`
I0228 16:50:01.281784   90330 http_logger.go:329] Webhook log saved to database with ID: 5523

2026/02/28 16:50:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.960ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268600",200,true,1577006792,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268600 -> 200 SUCCESS (1577.01ms)","{""request"":{""timestamp"":""2026-02-28T16:50:00.312883+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268600"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:50:01.889881+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 08:50:01 GMT"",""Request-Id"":""953c5a25a9073fcc6eef856716fbc84a"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1072, cdn-cache;desc=MISS, origin;dur=1098, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-153.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772268600953c5a25a9073fcc6eef856716fbc84a"",""X-Lgw-Dst-Svc"":""J-X4BTIJyTfJp-rIEmpYGn_zucXzg3DxUJrwtxaT3RPkJRiFufvxvxTesymgIcjJMbFzyg8cxgJ-8W8ia2FELyoZRDxEJ6FL0_lfN61-B2Vzu0is98DUaAUF17FfO0FgIZuf4xvPDPbsru5MA15tbZ6cZLoUGFSjyw9lYZxTS5Yc2dewr9bBo3rt-Sf1SKc0HUA_WeGKlj4DNIH52NFfGXbimhQ0vLDf4pQSHDAqPMb9Ak5m50wY0nzVx6iAi00VrNcmHabvMttMYurGBZGG0nbWc7xDbmTEpIJUd5xzC948UmMeBiQ2_rrtZu87nnj0fi8AU_gfjquwSAGt_-BMAelsv4s3nepCXa9hrOsOB2GACXY="",""X-Request-Id"":""953c5a25a9073fcc6eef856716fbc84a"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268601.986"",""X-Tt-Logid"":""20260228165000A26F7EE44EE80CD84BE2"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41b782f53dc5902fcac4356f5b9ca1718a8bcf383506e31edbcc6506604e6d6e5b9a69453ea08ecc7852f1d039a7354ed1b2e21073791bcddbb89382f6f7817345df5fc03500848b90808c6ab5e9f16e30"",""X-Tt-Trace-Id"":""00-a370bfdd03010d29ac030c539f610000-a370bfdd03010d29-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1577006792,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268600 -\u003e 200 SUCCESS (1577.01ms)""}","2026-02-28 16:50:00.312","2026-02-28 16:50:01.89","2026-02-28 16:50:01.89") RETURNING `id`
I0228 16:50:01.891121   90330 http_logger.go:329] Webhook log saved to database with ID: 5524
I0228 16:55:00.045627   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 16:55:00.045625   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 16:55:00.047542   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 16:55:00.047542   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[14.597ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[14.357ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.497ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 16:55:00.068",NULL,0,"","","","2026-02-28 16:55:00.069","2026-02-28 16:55:00.069") RETURNING `id`

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.699ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 16:55:00.068",NULL,0,"","","","2026-02-28 16:55:00.071","2026-02-28 16:55:00.071") RETURNING `id`
I0228 16:55:00.073681   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 16:55:00.073744   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.504ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.571ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.547ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.560ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000
I0228 16:55:00.076470   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19710

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.082ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19710 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.075ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:55:00.078793   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 16:55:00.079525   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:55:00.095683   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=10
I0228 16:55:00.110339   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 16:55:00.110399   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 16:55:00.124593   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=11

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T16:55:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T16:55:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[281.141ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19710 AND event_status = "å¤±è´¥"

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[218.668ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8),(19711,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 16:55:00.358","2026-02-28 16:55:00.358",8) RETURNING `id`

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[25.273ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19710 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:55:00.384365   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19710 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[24.921ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19711,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 16:55:00.076","2026-02-28 16:55:00.14","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 16:55:00.384","2026-02-28 16:55:00.384") RETURNING `id`
I0228 16:55:00.384679   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19711

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.183ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19710 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.097ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19711 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.155ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19710,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:55:00.384" WHERE `id` = 19710
I0228 16:55:00.384928   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19710 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.156ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.175ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:55:00.384",`error_count`=0,`updated_at`="2026-02-28 16:55:00.384" WHERE `id` = 19710
I0228 16:55:00.385156   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19710 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.138ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19711 AND event_status = "å¤±è´¥"

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.558ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19710 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.184ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:55:00.384",`error_count`=0,`updated_at`="2026-02-28 16:55:00.395" WHERE `id` = 7
I0228 16:55:00.395383   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[9.869ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19711 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 16:55:00.405164   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19711 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[9.752ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.001ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.213ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 16:55:00.405","2026-02-28 16:55:00.405",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 16:55:00.405","2026-02-28 16:55:00.405") RETURNING `id`

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.201ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19710 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 16:55:00.405472   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19710å¤±è´¥é¡¹æ•°ä¸º0
I0228 16:55:00.405384   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.186ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:55:00.405",`error_count`=0,`updated_at`="2026-02-28 16:55:00.405" WHERE `id` = 7

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.141ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19711 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.239ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 16:55:00.405632   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19712
I0228 16:55:00.405789   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ
I0228 16:55:00.405880   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.317ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19711,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61841,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61840,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61839,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61838,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61837,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61836,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61835,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61834,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8},{""id"":61833,""record_id"":19711,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T16:55:00.358513+08:00"",""updated_at"":""2026-02-28T16:55:00.358513+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 16:55:00.405" WHERE `id` = 19711
I0228 16:55:00.406052   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19711 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.280ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 16:55:00.406",`error_count`=9,`updated_at`="2026-02-28 16:55:00.406" WHERE `id` = 19711
I0228 16:55:00.406358   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19711 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.351ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19711 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.384ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 16:55:00.406",`error_count`=9,`updated_at`="2026-02-28 16:55:00.406" WHERE `id` = 8
I0228 16:55:00.406763   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.129ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19711 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.788ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.676ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.036ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:55:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.054ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 16:55:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.921ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268900",200,true,1289696792,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268900 -> 200 SUCCESS (1289.70ms)","{""request"":{""timestamp"":""2026-02-28T16:55:00.408554+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268900"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:55:01.698248+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:55:01 GMT"",""Request-Id"":""98a8730bf31912890b6be13ab5872748"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=350, cdn-cache;desc=MISS, origin;dur=360, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-061.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226890198a8730bf31912890b6be13ab5872748"",""X-Lgw-Dst-Svc"":""1riVgv_i7rNeA5XDVyUsATME98BCaT7kDHzqYH1l8BUH_opMY5eqZm-gndujtxEgRxStSVsI_kiooF2gVd9pfusrf0WoQVYhlsEo_a9l7U-PF8gIwpNmyq3XXScGHaR-l0lnBylOjsQRdAunkbC0CZ1SRTYJTO7w0wdIJQ-8VTHLJ56ogmYhphEvdEcPy35a6mx0qOi4I-ntG9iheu40WOiSskDmmwpNJVyFCiTJcF-KV0HJwg73iuxI0ZkXV8ftLR5Qglp_eWXVCeaTqgYFH6_rtgTTQ9OCGkwDDay7WWO9USrN8bo9vnhlQXvItbyaAzVBDn88y0AILt7bBCseuPbFH0agyUhKUx4M9SYcm9NBdkE="",""X-Request-Id"":""98a8730bf31912890b6be13ab5872748"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268901.792"",""X-Tt-Logid"":""20260228165501588876AC30527BBED6B1"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41603faba863e0c8ea27dea598e20af4ae26525f9942bdbbcbe8e2140f5d88af89d893de6a6f697919c8fb44938b612055d8075cece29d482f50c61445e32e96b78381e7fa3aa37218707f2165bf9de25f"",""X-Tt-Trace-Id"":""00-a37555d803010d108228e232b63c0000-a37555d803010d10-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1289696792,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268900 -\u003e 200 SUCCESS (1289.70ms)""}","2026-02-28 16:55:00.408","2026-02-28 16:55:01.698","2026-02-28 16:55:01.698") RETURNING `id`
I0228 16:55:01.701681   90330 http_logger.go:329] Webhook log saved to database with ID: 5525

2026/02/28 16:55:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.940ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268900",200,true,1327178750,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772268900 -> 200 SUCCESS (1327.18ms)","{""request"":{""timestamp"":""2026-02-28T16:55:00.408555+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268900"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T16:55:01.735731+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 08:55:01 GMT"",""Request-Id"":""195b85ea6ce5481cc2f83bde4e7ebb14"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=383, cdn-cache;desc=MISS, origin;dur=392, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-054.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772268901195b85ea6ce5481cc2f83bde4e7ebb14"",""X-Lgw-Dst-Svc"":""AA2EZuT8d7FIK0lUVV1E9ZhvI3Il0YiN990C_P4ggOoZAK1A8IoZKDMXz4KUjeo5_8U11h1w5AYyp9rvZkbRSnATwYoosH8MqDZgduHps9V1jcpAYAlVaHZMK8a2tYv23I5l5mSbRGuxr4AoApQ-RRvL7tagBptsyAAdw6A6TUrH5wyZyPSEEEzXE7kPvlnnATnexXUBIiTFcthvjcZdOhzHu8XEuZSsNxJTGn9KJon3sBSZnZHwljvSVrRRT0NrGXQjj3C2eVVLhXl00m2IkaqgNRAogiFPV90XFGZhVh9u7QWrxIF0AzUapqa1HaNckxyfSMEU5LDBVZuGYPrCLxOGBKn8z77rJRyGexQCHob3uP8="",""X-Request-Id"":""195b85ea6ce5481cc2f83bde4e7ebb14"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772268901.824"",""X-Tt-Logid"":""202602281655017C04D09BD9848DB8256C"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a410e4c3dcce6c98deb7b581a2e533b59fb35dbb582e15b0da1872c1a5bb6e603c983de0750af67742f1abfceabb9a2b3c4efecb0f1c0691bdea9c807fa5f3a82a90858d177910f1af2efb0126fc54545ee"",""X-Tt-Trace-Id"":""00-a37555d7030106b1e7c3c1f847760000-a37555d7030106b1-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1327178750,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772268900 -\u003e 200 SUCCESS (1327.18ms)""}","2026-02-28 16:55:00.408","2026-02-28 16:55:01.735","2026-02-28 16:55:01.735") RETURNING `id`
I0228 16:55:01.736962   90330 http_logger.go:329] Webhook log saved to database with ID: 5526
I0228 16:58:33.913743   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=9
I0228 16:58:33.918576   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1136266&timeout=6m44s&timeoutSeconds=404&watch=true" status="200 OK" milliseconds=2
I0228 17:00:00.010082   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 17:00:00.010630   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 17:00:00.011319   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 17:00:00.011387   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[15.964ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[16.958ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.515ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 17:00:00.029",NULL,0,"","","","2026-02-28 17:00:00.03","2026-02-28 17:00:00.03") RETURNING `id`

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.718ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 17:00:00.029",NULL,0,"","","","2026-02-28 17:00:00.032","2026-02-28 17:00:00.032") RETURNING `id`
I0228 17:00:00.035665   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 17:00:00.035803   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.254ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.332ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.248ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 17:00:00.036541   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19713

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[1.058ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.024ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19713 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.166ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:00:00.040633   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 17:00:00.040776   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:00:00.061341   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=19
I0228 17:00:00.065678   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 17:00:00.065746   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:00:00.078940   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=13

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T17:00:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T17:00:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[241.004ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19713 AND event_status = "å¤±è´¥"

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[180.044ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8),(19714,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 17:00:00.278","2026-02-28 17:00:00.278",8) RETURNING `id`

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[24.511ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19713 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:00:00.303570   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19713 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[23.670ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19714,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 17:00:00.037","2026-02-28 17:00:00.099","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 17:00:00.303","2026-02-28 17:00:00.303") RETURNING `id`
I0228 17:00:00.303993   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19714

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.606ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19713 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.258ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19714 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.229ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19713,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:00:00.304" WHERE `id` = 19713
I0228 17:00:00.304493   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19713 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.386ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.182ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19713 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.194ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19714 AND event_status = "å¤±è´¥"

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[11.576ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:00:00.304",`error_count`=0,`updated_at`="2026-02-28 17:00:00.315" WHERE `id` = 19713
I0228 17:00:00.316117   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19713 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.781ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19714 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:00:00.326816   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19714 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 17:00:00.326830   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.949ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:00:00.304",`error_count`=0,`updated_at`="2026-02-28 17:00:00.326" WHERE `id` = 7
I0228 17:00:00.327111   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[22.418ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.387ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19714 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.173ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.277ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19714,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61850,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61849,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61848,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61847,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61846,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61845,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61844,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61843,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8},{""id"":61842,""record_id"":19714,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:00:00.278937+08:00"",""updated_at"":""2026-02-28T17:00:00.278937+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:00:00.327" WHERE `id` = 19714
I0228 17:00:00.327568   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19714 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.394ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19713 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:00:00.327590   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19713å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.571ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 17:00:00.327","2026-02-28 17:00:00.327",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 17:00:00.327","2026-02-28 17:00:00.327") RETURNING `id`

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.544ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:00:00.327",`error_count`=9,`updated_at`="2026-02-28 17:00:00.327" WHERE `id` = 19714
I0228 17:00:00.328146   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19714 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.575ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:00:00.328194   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.115ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:00:00.327",`error_count`=9,`updated_at`="2026-02-28 17:00:00.328" WHERE `id` = 8
I0228 17:00:00.328281   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.729ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19714 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.278ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.194ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.718ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:00:00.327",`error_count`=0,`updated_at`="2026-02-28 17:00:00.328" WHERE `id` = 7
I0228 17:00:00.328638   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19715
I0228 17:00:00.328649   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.112ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19714 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.205ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:00:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.026ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:00:04 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.484ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269200",200,true,4532698166,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269200 -> 200 SUCCESS (4532.70ms)","{""request"":{""timestamp"":""2026-02-28T17:00:00.328805+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269200"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:00:04.861494+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 09:00:04 GMT"",""Request-Id"":""a0222823fdcf7fd22238abc4a53fc97d"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=3083, cdn-cache;desc=MISS, origin;dur=3091, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-023.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772269201a0222823fdcf7fd22238abc4a53fc97d"",""X-Lgw-Dst-Svc"":""sDIVnxXm8aN3YDteQe3gsUBZ1IkfrrBgZIAUFuxHZvAP6xklVpuUP3mC2m0EQrrzJIErUWQJ4Y5PO5j7ZD-iVhTS69nTGonh-jM7sHw9hLlKo58p5GGLf8BJh-5oq_Q1LzurFqBEDbhi1GyYybLUHRW_oJvjqOVpUBM1jrLXA07rhjfLSl5yn6y33VaZ7aPnp_v_DlCSzhSIhQSUdG1zRuNWBCDvEYa8YoQYGypkygj5UD0wP958Gn9ADWieqnCuE2Tr4s203MzrnguQWCRE1KcE15euJCYKMN-HUn3ff9Zr-uauxeyJ0nY5YupGlmwGqnSPnim-PRoJYp1ODmTCoGq-BKufoHJyuLPoU1lY0QAPqc4="",""X-Request-Id"":""a0222823fdcf7fd22238abc4a53fc97d"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772269204.953"",""X-Tt-Logid"":""20260228170001CBE89FD40D0D7CD139F5"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41f3a0ec76dd14af3cc12acbe5304d8fde0ec4130a2b34f69b39b68d94fac73d52f6f7bef9424fbd3ca372a6711271a812ce7edee0a9a14e1a39688600261e3cb121b40be02202e3dd4dcb59f2f507941a"",""X-Tt-Trace-Id"":""00-a379eb6403010b07693f2e3ead570000-a379eb6403010b07-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":4532698166,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269200 -\u003e 200 SUCCESS (4532.70ms)""}","2026-02-28 17:00:00.328","2026-02-28 17:00:04.862","2026-02-28 17:00:04.862") RETURNING `id`
I0228 17:00:04.865057   90330 http_logger.go:329] Webhook log saved to database with ID: 5527

2026/02/28 17:00:04 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.943ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269200",200,true,4540252792,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269200 -> 200 SUCCESS (4540.25ms)","{""request"":{""timestamp"":""2026-02-28T17:00:00.32881+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269200"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:00:04.869053+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 09:00:04 GMT"",""Request-Id"":""5d726ee3ac2913cbf09a92004aab99fc"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=3078, cdn-cache;desc=MISS, origin;dur=3109, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-055.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""17722692015d726ee3ac2913cbf09a92004aab99fc"",""X-Lgw-Dst-Svc"":""159iKiHQ9B-E0bKOpAPmZ8yV9q5z4tfu8178wtpoQr3p2gLIsHpK6LBU0YNCOTFhuvOl2QOc_ZfX2QhSA877gyQ-fZJCTFs_lO2-4K9Ddz4cDttuXXTobSkpol_yzgSb_E73rIXLdGbD8ir9XQ7aSwLCPeANCsEBNFo4v5dGODuJZ-adgIitf6PQnOLo7l9H9gjCrsCYurKCgfPr4T7lGUbPScc4jSzSqCL3_-JiEZJkyFC8eQ9ucIT_2NWpFJJ1RbbO5G8P_C9SomeO4sHIygbuKYIp3VYnYDuaN_lUHZ1f7_BR2J4q5-MmBbsM_gz8MOFAmrGsqAfBEoRBudYhPCR2Qi-7WHtDyuEui0M6IHC9mUQ="",""X-Request-Id"":""5d726ee3ac2913cbf09a92004aab99fc"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772269204.960"",""X-Tt-Logid"":""20260228170001B32CC79B68C457D7FD1E"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a417f6d210390543fe842bea0204ada424d9ea21acc8e68deb97e4d7c5685570407f59fae509a29d72ede91e30f63ffb765b6a5b5e4b00f31f3021e5b4245cb0bca3308bdfc07272ce7b13f749f25adb562"",""X-Tt-Trace-Id"":""00-a379eb5c03010698331621eeb0300000-a379eb5c03010698-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":4540252792,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269200 -\u003e 200 SUCCESS (4540.25ms)""}","2026-02-28 17:00:00.328","2026-02-28 17:00:04.869","2026-02-28 17:00:04.869") RETURNING `id`
I0228 17:00:04.870642   90330 http_logger.go:329] Webhook log saved to database with ID: 5528
I0228 17:04:52.823623   90330 manager_api.go:194] è·å–æ’ä»¶èœå•åˆ—è¡¨ï¼Œå…±è®¡7ä¸ª
2026/02/28 17:04:52 "GET http://127.0.0.1:3618/params/config/FloatingWindow HTTP/1.1" from 127.0.0.1:57909 - 200 68B in 20.65425ms
2026/02/28 17:04:52 "GET http://127.0.0.1:3618/params/plugin/menus HTTP/1.1" from 127.0.0.1:57908 - 200 934B in 29.386375ms
2026/02/28 17:04:52 "GET http://127.0.0.1:3618/params/config/ProductName HTTP/1.1" from 127.0.0.1:57910 - 200 66B in 81.717959ms

2026/02/28 17:04:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[101.164ms] [34;1m[rows:1][0m SELECT `group_names` FROM `users` WHERE  username = "k8m" ORDER BY `users`.`id` LIMIT 1

2026/02/28 17:04:52 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[102.739ms] [34;1m[rows:1][0m SELECT `group_names` FROM `users` WHERE  username = "k8m" ORDER BY `users`.`id` LIMIT 1

2026/02/28 17:04:52 [32m/Users/weibh/projects/go/k8m/pkg/service/user.go:162
[0m[33m[6.207ms] [34;1m[rows:2][0m SELECT DISTINCT `role` FROM `user_groups` WHERE group_name in ("å¹³å°ç®¡ç†å‘˜ç»„","ç‰¹å°”æ˜¯")

2026/02/28 17:04:52 [32m/Users/weibh/projects/go/k8m/pkg/service/user.go:162
[0m[33m[0.219ms] [34;1m[rows:2][0m SELECT DISTINCT `role` FROM `user_groups` WHERE group_name in ("å¹³å°ç®¡ç†å‘˜ç»„","ç‰¹å°”æ˜¯")
2026/02/28 17:04:52 "GET http://127.0.0.1:3618/params/user/role HTTP/1.1" from 127.0.0.1:57906 - 200 111B in 132.636167ms
I0228 17:04:52.994528   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions" status="200 OK" milliseconds=37
2026/02/28 17:04:53 "GET http://127.0.0.1:3618/k8s/cluster/d253e44012953eb7f6cee9cd928470ba/crd/status HTTP/1.1" from 127.0.0.1:57907 - 200 117B in 288.973167ms
2026/02/28 17:04:53 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:57937 - 200 67B in 486.916Âµs
2026/02/28 17:04:53 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:57938 - 200 67B in 185.042Âµs
I0228 17:04:53.908145   90330 mgm.go:18] è·å– kubeconfig æ¨¡æ¿åˆ—è¡¨

2026/02/28 17:04:53 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.280ms] [34;1m[rows:1][0m SELECT count(*) FROM `kube_configs`

2026/02/28 17:04:53 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[26.909ms] [34;1m[rows:8][0m SELECT * FROM `kube_configs` ORDER BY id desc LIMIT 10
2026/02/28 17:04:53 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/templates?page=1&perPage=10 HTTP/1.1" from 127.0.0.1:57942 - 200 725B in 42.356083ms
I0228 17:04:55.020671   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 12

2026/02/28 17:04:55 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.304ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "12" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 17:04:55.029196   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 12 åˆ°æ–‡ä»¶: å ä¸‰åˆ†æµ‹è¯•.yaml, namespace=, role=
2026/02/28 17:04:55 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/12/export HTTP/1.1" from 127.0.0.1:57972 - 200 2993B in 8.979083ms
I0228 17:04:56.451343   90330 mgm.go:112] å¯¼å‡º kubeconfig ID 9

2026/02/28 17:04:56 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.665ms] [34;1m[rows:1][0m SELECT * FROM `kube_configs` WHERE id = "9" ORDER BY `kube_configs`.`id` LIMIT 1
I0228 17:04:56.458052   90330 mgm.go:176] æˆåŠŸå¯¼å‡º kubeconfig ID 9 åˆ°æ–‡ä»¶: rrrd.yaml, namespace=, role=
2026/02/28 17:04:56 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/kubeconfig/9/export HTTP/1.1" from 127.0.0.1:57989 - 200 2994B in 9.737583ms
I0228 17:05:00.001831   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 17:05:00.002005   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 17:05:00.001861   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 17:05:00.002435   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.735ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.867ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.034ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 17:05:00.002",NULL,0,"","","","2026-02-28 17:05:00.003","2026-02-28 17:05:00.003") RETURNING `id`

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.074ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 17:05:00.003",NULL,0,"","","","2026-02-28 17:05:00.006","2026-02-28 17:05:00.006") RETURNING `id`
I0228 17:05:00.007797   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""
I0228 17:05:00.007799   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.522ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.593ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.168ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 17:05:00.008835   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19716

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.694ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.660ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19716 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.241ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:05:00.010798   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 17:05:00.010949   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:05:00.015720   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=3
I0228 17:05:00.021144   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 17:05:00.021220   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:05:00.027048   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=5

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T17:05:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T17:05:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[291.180ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19716 AND event_status = "å¤±è´¥"

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[252.979ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8),(19717,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 17:05:00.301","2026-02-28 17:05:00.301",8) RETURNING `id`

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[25.546ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19716 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:05:00.326940   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19716 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[25.240ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19717,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 17:05:00.009","2026-02-28 17:05:00.048","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 17:05:00.326","2026-02-28 17:05:00.326") RETURNING `id`
I0228 17:05:00.327427   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19717

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.632ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19716 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.203ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19717 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.132ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19716,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:05:00.327" WHERE `id` = 19716
I0228 17:05:00.327766   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19716 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.290ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.190ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19716 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.463ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:05:00.327",`error_count`=0,`updated_at`="2026-02-28 17:05:00.328" WHERE `id` = 19716
I0228 17:05:00.328264   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19716 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.281ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.102ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:05:00.327",`error_count`=0,`updated_at`="2026-02-28 17:05:00.328" WHERE `id` = 7
I0228 17:05:00.328396   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.074ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19717 AND event_status = "å¤±è´¥"

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.933ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19716 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:05:00.339258   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19716å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.892ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.866ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19717 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:05:00.350147   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19717 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 17:05:00.350159   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.983ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 17:05:00.339","2026-02-28 17:05:00.339",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 17:05:00.35","2026-02-28 17:05:00.35") RETURNING `id`

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.126ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:05:00.350417   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.572ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:05:00.339",`error_count`=0,`updated_at`="2026-02-28 17:05:00.35" WHERE `id` = 7
I0228 17:05:00.351949   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19718
I0228 17:05:00.351960   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.973ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19717 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[2.068ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.964ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19717,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61859,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61858,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61857,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61856,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61855,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61854,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61853,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61852,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8},{""id"":61851,""record_id"":19717,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:05:00.301226+08:00"",""updated_at"":""2026-02-28T17:05:00.301226+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:05:00.352" WHERE `id` = 19717
I0228 17:05:00.353259   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19717 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.761ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.103ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19717 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.457ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:05:00.353",`error_count`=9,`updated_at`="2026-02-28 17:05:00.353" WHERE `id` = 19717
I0228 17:05:00.353755   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19717 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.672ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.458ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:05:00.353",`error_count`=9,`updated_at`="2026-02-28 17:05:00.354" WHERE `id` = 8
I0228 17:05:00.354242   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.171ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19717 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.034ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:05:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.025ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:05:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[4.724ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269500",200,true,3470152500,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269500 -> 200 SUCCESS (3470.15ms)","{""request"":{""timestamp"":""2026-02-28T17:05:00.354427+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269500"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:05:03.824573+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:05:03 GMT"",""Request-Id"":""25d1d37a6f8d7de98cc94e633d86525d"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=367, cdn-cache;desc=MISS, origin;dur=382, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-159.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""177226950325d1d37a6f8d7de98cc94e633d86525d"",""X-Lgw-Dst-Svc"":""V2LuU3azY8odkKvgXdRcve7Nb4plHCkB2ixjORWbCb3z9iocPIQRBO4TrjhgmHavP_35HNrWWTh5eeykfjRE9o66Ymy45S6JxAshQcX-bLr3YTxEJfti4sKngGFU7_UHY7x1HLgF58OY5v5jWKoIrKCvVwOWpQ7ZzuvWboEyWyFTZJRNbVtkjQV6CbgURUF0Jy4Kt-79Xssy-bfUmmCJUPeG2C5fvvGlBvHKXgsd_uINQp3MEB_TxPTe6uOMV6w4K0YqEc31H0SiD_kWIZBG-4TLTXLsBiAD0zxXfpbddZ0K-sC4LeNI1Wi8Bnxz2qYfWMxbgGctshTnhwCb8d_4xwNSAFG5sdIJ7nu-lI7LQfACcds="",""X-Request-Id"":""25d1d37a6f8d7de98cc94e633d86525d"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772269503.561"",""X-Tt-Logid"":""20260228170503947553258ED2ABD3B19D"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41d5ee5a93d377651dd1ec79ad6237c3830eb09e5554bb984446612c223db282f3a709865d544fea3e0b2ef3903d49a001af03aab465f2482f4cb560d6dca5dc4b2ac4f9d7fd81d1a8c79d4ec631539c76"",""X-Tt-Trace-Id"":""00-a37e846b03010233c1b3f643dab10000-a37e846b03010233-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":3470152500,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269500 -\u003e 200 SUCCESS (3470.15ms)""}","2026-02-28 17:05:00.354","2026-02-28 17:05:03.825","2026-02-28 17:05:03.825") RETURNING `id`
I0228 17:05:03.830235   90330 http_logger.go:329] Webhook log saved to database with ID: 5529

2026/02/28 17:05:03 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.013ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269500",200,true,3477669125,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269500 -> 200 SUCCESS (3477.67ms)","{""request"":{""timestamp"":""2026-02-28T17:05:00.353384+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269500"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:05:03.831046+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:05:03 GMT"",""Request-Id"":""d6857bf59d5bba670567e70b2869ebb9"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=402, cdn-cache;desc=MISS, origin;dur=431, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-063-180-152.hbcm-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772269503d6857bf59d5bba670567e70b2869ebb9"",""X-Lgw-Dst-Svc"":""MRwjXC6s6NjITHFx-kwvgMUaMWzOH5cvmAQdGscvJ9sVrzOq1gOSjfoZ_k8byWsmIEcJX4DhVDcjJuNI4y_11wtu5g7avwXitEDgogUu3Ic9WzZK7uTUWRNfpkxSdW5VImpQRXhbk2B6I70BUVAhUKLBkxy-IG_8YzLG1e2eSiJ4Skhfx-TtNkQqdJpqv5Rji_MWB25QIPSN3Rs-ZijcycwMdpwcTj4kJMIq7Jq4sRT6BXkBNDovoyqtGuALEIPY-CTI9_CTmyHVxviau2dB3U6Zgt__eTFdIGX-RCP40KC4jMzdijVg2EBTCmI5mDwhlR4hXKTGtqYU95D9pZorIpRAXEgRtHyrMOSV6vk7U2Y8Dw=="",""X-Request-Id"":""d6857bf59d5bba670567e70b2869ebb9"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772269503.606"",""X-Tt-Logid"":""2026022817050374563C046E8DA8E0B1D0"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a419994b639fb09cd83bbb6172bc53c0e32f3b4486812c9325f23c4c40fa89af7faf41c6aedfc9c03379a89d94b11659d6914e5968b45ea413e4a35a267be6b01ef5bc6c79e5862723f2ddeb27297f58598"",""X-Tt-Trace-Id"":""00-a37e846c0301088f9954a13b30350000-a37e846c0301088f-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":3477669125,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269500 -\u003e 200 SUCCESS (3477.67ms)""}","2026-02-28 17:05:00.353","2026-02-28 17:05:03.831","2026-02-28 17:05:03.831") RETURNING `id`
I0228 17:05:03.832488   90330 http_logger.go:329] Webhook log saved to database with ID: 5530
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/config/FloatingWindow HTTP/1.1" from 127.0.0.1:58171 - 200 68B in 1.097542ms
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/config/ProductName HTTP/1.1" from 127.0.0.1:58168 - 200 66B in 584.875Âµs
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/user/role HTTP/1.1" from 127.0.0.1:58167 - 200 111B in 17.142792ms
I0228 17:05:13.225297   90330 manager_api.go:194] è·å–æ’ä»¶èœå•åˆ—è¡¨ï¼Œå…±è®¡7ä¸ª
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/plugin/menus HTTP/1.1" from 127.0.0.1:58170 - 200 934B in 17.761041ms
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/k8s/cluster/d253e44012953eb7f6cee9cd928470ba/crd/status HTTP/1.1" from 127.0.0.1:58169 - 200 117B in 23.735ms
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:58184 - 200 67B in 111.5Âµs
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/params/config/AnySelect HTTP/1.1" from 127.0.0.1:58187 - 200 67B in 172.875Âµs
I0228 17:05:13.706574   90330 mgm.go:18] è·å– kubeconfig æ¨¡æ¿åˆ—è¡¨

2026/02/28 17:05:13 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.651ms] [34;1m[rows:1][0m SELECT count(*) FROM `kube_configs`

2026/02/28 17:05:13 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[2.061ms] [34;1m[rows:8][0m SELECT * FROM `kube_configs` ORDER BY id desc LIMIT 10
2026/02/28 17:05:13 "GET http://127.0.0.1:3618/mgm/plugins/kubeconfig_export/templates?page=1&perPage=10 HTTP/1.1" from 127.0.0.1:58188 - 200 725B in 3.559709ms
I0228 17:05:17.919964   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=8
I0228 17:05:17.928411   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1136676&timeout=6m33s&timeoutSeconds=393&watch=true" status="200 OK" milliseconds=3
I0228 17:10:00.018844   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 17:10:00.018866   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 17:10:00.024593   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 17:10:00.024593   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[19.214ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[18.990ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.817ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 17:10:00.053",NULL,0,"","","","2026-02-28 17:10:00.055","2026-02-28 17:10:00.055") RETURNING `id`

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.137ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 17:10:00.053",NULL,0,"","","","2026-02-28 17:10:00.056","2026-02-28 17:10:00.056") RETURNING `id`
I0228 17:10:00.059755   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 17:10:00.059751   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.574ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.611ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.057ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 17:10:00.061218   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19719

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.303ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.123ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19719 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.043ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:10:00.064455   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 17:10:00.064684   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:10:00.080166   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=8
I0228 17:10:00.088349   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 17:10:00.088388   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:10:00.096753   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=6

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T17:10:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T17:10:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[306.988ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19719 AND event_status = "å¤±è´¥"

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[250.128ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8),(19720,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 17:10:00.368","2026-02-28 17:10:00.368",8) RETURNING `id`

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[11.576ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19719 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:10:00.381221   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19719 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[11.095ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19720,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 17:10:00.061","2026-02-28 17:10:00.118","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 17:10:00.38","2026-02-28 17:10:00.38") RETURNING `id`
I0228 17:10:00.381481   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19720

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.077ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19720 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19719 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.101ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.162ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19719,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:10:00.381" WHERE `id` = 19719
I0228 17:10:00.381817   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19719 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[10.900ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19720 AND event_status = "å¤±è´¥"

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[11.012ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:10:00.381",`error_count`=0,`updated_at`="2026-02-28 17:10:00.392" WHERE `id` = 19719
I0228 17:10:00.392885   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19719 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.577ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19720 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:10:00.403389   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19720 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.558ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:10:00.381",`error_count`=0,`updated_at`="2026-02-28 17:10:00.403" WHERE `id` = 7
I0228 17:10:00.403503   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ
I0228 17:10:00.403552   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[20.536ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19719 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.132ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.113ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19720 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.136ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.337ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19720,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61868,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61867,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61866,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61865,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61864,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61863,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61862,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61861,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8},{""id"":61860,""record_id"":19720,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:10:00.368924+08:00"",""updated_at"":""2026-02-28T17:10:00.368924+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:10:00.403" WHERE `id` = 19720
I0228 17:10:00.404110   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19720 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.363ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19719 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:10:00.404143   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19719å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.945ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 17:10:00.403","2026-02-28 17:10:00.403",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 17:10:00.404","2026-02-28 17:10:00.404") RETURNING `id`

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.492ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:10:00.404831   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.812ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:10:00.404",`error_count`=9,`updated_at`="2026-02-28 17:10:00.404" WHERE `id` = 19720
I0228 17:10:00.404958   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19720 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.849ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19720 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.111ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:10:00.404",`error_count`=9,`updated_at`="2026-02-28 17:10:00.405" WHERE `id` = 8
I0228 17:10:00.405100   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.539ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:10:00.403",`error_count`=0,`updated_at`="2026-02-28 17:10:00.405" WHERE `id` = 7

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.196ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.034ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19720 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:10:00.405188   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19721
I0228 17:10:00.407186   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.979ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[1.011ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.058ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:10:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.063ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:10:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.406ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269800",200,true,1158385542,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269800 -> 200 SUCCESS (1158.39ms)","{""request"":{""timestamp"":""2026-02-28T17:10:00.411966+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269800"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:10:01.570349+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:10:01 GMT"",""Eagleid"":""2483821d17722698012897172e"",""Request-Id"":""ce1f9126-e396-4f8b-a75a-79edd92cc6e3"",""Server"":""Tengine"",""Server-Timing"":""inner; dur=345"",""Timing-Allow-Origin"":""*"",""Tt_stable"":""1"",""Via"":""cache9.cn7496[371,0]"",""X-Lgw-Dst-Svc"":""cxTB5iu7YOc1uriKMvMp0rjstChJqpRmeARXetc5SsTcYSOvbHFNM9vuVwQV9GVllAlrW_wlYAQmO3oA_7dXkZ_9Sb2RiMFTHBVw9ubSrXd1byYhyZNQ0CSm9JP4IHFMfLVLwIuCs7UZEm7Y1_wKO56E0VB_rmLQ0Mgjfxg9oGk1A8xcJUcxFKQ_oz9gM35DuXRw5TqlC0UwGYf0aNzlErQqYwa2NwIJxKBICEA_dmIWZGADITlR0zIIR8XLsM71u-g8LOdzaK7MCp-KbJov7-DYm4e8xEDrDTRcFkZQ1Q6xFalbIz7R7KFUJqR9AwDNOT-uP_SfDFVQA8_a64tbRKzbjmdsmOAmJHZhLBxoL5YNDVQ="",""X-Request-Id"":""ce1f9126-e396-4f8b-a75a-79edd92cc6e3"",""X-Timestamp"":""1772269801.648"",""X-Tt-Logid"":""2026022817100141257043670438D59C6B"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a4103bd4b1b530be0ec9512d8cce5a8a1438a379cba6b925ceff7cbfd235544cc0315b8f61165b11dd1c71ab6b78f9a3af2ed1460f015a6bb6c670c73ac53a8a2aa1ef17cb05f4e08007f12816c664aaa18"",""X-Tt-Trace-Id"":""00-26022817100141257043670438D59C6B-2CA8AA1F15330543-00"",""X-Tt-Trace-Tag"":""id=03;cdn-cache=miss;type=dyn""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1158385542,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269800 -\u003e 200 SUCCESS (1158.39ms)""}","2026-02-28 17:10:00.411","2026-02-28 17:10:01.571","2026-02-28 17:10:01.571") RETURNING `id`
I0228 17:10:01.574463   90330 http_logger.go:329] Webhook log saved to database with ID: 5531

2026/02/28 17:10:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.365ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269800",200,true,1199493250,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772269800 -> 200 SUCCESS (1199.49ms)","{""request"":{""timestamp"":""2026-02-28T17:10:00.411962+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269800"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:10:01.611452+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:10:01 GMT"",""Eagleid"":""2483821d17722698012897170e"",""Request-Id"":""47da7227-7825-44dd-84c8-b32972252323"",""Server"":""Tengine"",""Server-Timing"":""inner; dur=379"",""Timing-Allow-Origin"":""*"",""Tt_stable"":""1"",""Via"":""cache9.cn7496[412,0]"",""X-Lgw-Dst-Svc"":""3EXzr88gCTXnWsnfJY1RR1t_k9PxijSUu_5B3t1kiXbBKFdoiv4gizxuUyWk3C_z3RFkxcaARrW3WVIVsrbyz5PJlOJbm4sP71DyN8VFdx7upHFm9R2zsSLpp8IEJDR5HbIUzl5x-qIYg1rgv_Wm3oIG4VXqJMHjLxvDAFWOUGI9qopJdPd1jIFaKi9K1LqFzQ7lLsO2fJqcZA7dOYW5GZmICw64ul54kZ8gVdN6T5wL9QUCy0r7e_f7iuI6QKZ2SK2l5xfhKNh_TLGJ4MjVDQzqjeC2owOK1m-4FZVjcmVIX3Dd1j6En2uB2gTnUzObnjjTImyh0oUTmjErVAtNniJfaAG5yZcuvFwTrrRMW-OQZD4="",""X-Request-Id"":""47da7227-7825-44dd-84c8-b32972252323"",""X-Timestamp"":""1772269801.689"",""X-Tt-Logid"":""20260228171001E0D9C610B3ACCFDA9BDD"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a4103bd4b1b530be0ec9512d8cce5a8a1439faa540c4ebfc93426f486074c85391c4e5ee48d1d5e8d4d6a71a60f406f0d946112b872418fc9cb21b86fd5792a07792916984fadd2ba5deee04e853cc841d4"",""X-Tt-Trace-Id"":""00-260228171001E0D9C610B3ACCFDA9BDD-402FF10C181982C6-00"",""X-Tt-Trace-Tag"":""id=03;cdn-cache=miss;type=dyn""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1199493250,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772269800 -\u003e 200 SUCCESS (1199.49ms)""}","2026-02-28 17:10:00.411","2026-02-28 17:10:01.618","2026-02-28 17:10:01.618") RETURNING `id`
I0228 17:10:01.619806   90330 http_logger.go:329] Webhook log saved to database with ID: 5532
I0228 17:11:50.930234   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=7
I0228 17:11:50.938381   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1137046&timeout=6m59s&timeoutSeconds=419&watch=true" status="200 OK" milliseconds=4
I0228 17:15:00.010476   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 17:15:00.011165   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop
I0228 17:15:00.010467   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 17:15:00.011377   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.440ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[2.627ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[5.066ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 17:15:00.013",NULL,0,"","","","2026-02-28 17:15:00.014","2026-02-28 17:15:00.014") RETURNING `id`

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[5.463ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 17:15:00.014",NULL,0,"","","","2026-02-28 17:15:00.018","2026-02-28 17:15:00.018") RETURNING `id`
I0228 17:15:00.021061   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"
I0228 17:15:00.021206   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.350ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.404ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[4.999ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[6.196ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 17:15:00.028055   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19723

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.247ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19723 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.100ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:15:00.032440   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 17:15:00.032662   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:15:00.042155   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=8
I0228 17:15:00.054085   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 17:15:00.054233   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:15:00.065917   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=11

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T17:15:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T17:15:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[248.179ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19723 AND event_status = "å¤±è´¥"

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[190.646ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8),(19722,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 17:15:00.276","2026-02-28 17:15:00.276",8) RETURNING `id`

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[21.657ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19723 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:15:00.298616   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19723 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[21.352ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19722,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 17:15:00.026","2026-02-28 17:15:00.086","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 17:15:00.298","2026-02-28 17:15:00.298") RETURNING `id`
I0228 17:15:00.299077   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19722

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.618ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19723 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.227ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19722 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.150ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19723,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:15:00.299" WHERE `id` = 19723
I0228 17:15:00.299452   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19723 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.292ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.402ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:15:00.299",`error_count`=0,`updated_at`="2026-02-28 17:15:00.299" WHERE `id` = 19723
I0228 17:15:00.299887   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19723 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.433ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19723 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.114ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:15:00.299",`error_count`=0,`updated_at`="2026-02-28 17:15:00.299" WHERE `id` = 7
I0228 17:15:00.300029   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.402ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19722 AND event_status = "å¤±è´¥"

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.223ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[11.185ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.640ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19722 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:15:00.321886   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19722 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 17:15:00.321901   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[10.700ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19723 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:15:00.321977   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19723å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[10.878ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 17:15:00.311","2026-02-28 17:15:00.311",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 17:15:00.321","2026-02-28 17:15:00.321") RETURNING `id`

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.188ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:15:00.322205   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.331ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19722 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.328ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:15:00.311",`error_count`=0,`updated_at`="2026-02-28 17:15:00.322" WHERE `id` = 7
I0228 17:15:00.322508   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19724
I0228 17:15:00.322517   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.500ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19722,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61877,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61876,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61875,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61874,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61873,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61872,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61871,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61870,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8},{""id"":61869,""record_id"":19722,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:15:00.276862+08:00"",""updated_at"":""2026-02-28T17:15:00.276862+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:15:00.322" WHERE `id` = 19722
I0228 17:15:00.322819   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19722 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.743ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.413ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:15:00.322",`error_count`=9,`updated_at`="2026-02-28 17:15:00.323" WHERE `id` = 19722
I0228 17:15:00.323279   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19722 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.450ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19722 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.362ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.122ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.264ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:15:00.322",`error_count`=9,`updated_at`="2026-02-28 17:15:00.323" WHERE `id` = 8
I0228 17:15:00.323574   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.164ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19722 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.025ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:15:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.027ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:15:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.757ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270100",200,true,1023560000,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270100 -> 200 SUCCESS (1023.56ms)","{""request"":{""timestamp"":""2026-02-28T17:15:00.323449+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270100"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:15:01.347007+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:15:01 GMT"",""Request-Id"":""e4e85fc894ebbd268e9a8fefcfda9d8d"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=342, cdn-cache;desc=MISS, origin;dur=359, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-145.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772270101e4e85fc894ebbd268e9a8fefcfda9d8d"",""X-Lgw-Dst-Svc"":""ljauzt5QkyFIReE6t65aTsFBQX8RZ5JW6wM52Q4ZspmKPiOMIatDsg3JnGPQ5txmV1mvUOh2ctvRLqgLXUIj8KV23ILF65JUNhpxGZxPBYwLBF35NOcHZIYx0IUfTU4hQc_ynNLC2ABhjK-ws6bHN2a97Gakl2Dvjqy0HxDmJD4q_xutinal9MBqgHSDZIMYauUB6TacxofPklQ2PqN1J_P3DPQLPguJPfpxWKE4AkqBNl1RyKd_bJ68y3fb-ZitdIHiNyZ-P0MANhfT3S0n4K0tYsS4JFQbj59PhQs2caM4dxMJ6jtvCUFLfE00o06RJrWHYu9_gDajhv43ybPNJpyNVjR9Dryp05MrspXNIDLXvA=="",""X-Request-Id"":""e4e85fc894ebbd268e9a8fefcfda9d8d"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772270101.403"",""X-Tt-Logid"":""2026022817150167E3B972349E91DA60A0"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a41caa337b799aae5b292d3b5b8cf271b9bc1fc95a7fbbc91f4390e7da420ab1c7e5dfff90a2bc952902c93b3f06010f96688ded74d5da78695de8daea67e503a6560b58dc66c123652444b5a360c3f390c"",""X-Tt-Trace-Id"":""00-a387a3d50301097b8a9b8bf56f320000-a387a3d50301097b-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1023560000,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270100 -\u003e 200 SUCCESS (1023.56ms)""}","2026-02-28 17:15:00.323","2026-02-28 17:15:01.347","2026-02-28 17:15:01.347") RETURNING `id`
I0228 17:15:01.349128   90330 http_logger.go:329] Webhook log saved to database with ID: 5533

2026/02/28 17:15:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.982ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270100",200,true,1038186917,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270100 -> 200 SUCCESS (1038.19ms)","{""request"":{""timestamp"":""2026-02-28T17:15:00.323747+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270100"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:15:01.361931+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""77"",""Content-Type"":""application/json"",""Date"":""Sat, 28 Feb 2026 09:15:01 GMT"",""Request-Id"":""048e5e770060bc349f184f4b30d36b9a"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=400, cdn-cache;desc=MISS, origin;dur=408, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-062-185-146.hbsjzcm06-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772270101048e5e770060bc349f184f4b30d36b9a"",""X-Lgw-Dst-Svc"":""_X4oQ3glOmVKA5K2NItG8p_Jc5VaQ6Zwaz_eRvk2jLIfD8Egk9byJ7P6lIxyMc_el7fuFr_-0I40bW8-wKez3b6zloqOZ5uL9eC0ufJyiiMc6RFkEq-KBYpLq5oACJyfokNby8QTMjZvIQX29TfGHAn5t-aCpEq61VdzvxKCZ_CvMkcPun_-Fz6K4O7DeEa5FGv5jMaz5fBY1rStBKUz822unrGvyUUl2UCXB5pE4TZL4pbAWb4bnvZ33-HaPdT9eobFovtC301setzvEqCJWIEw0e1bs6cakTm1JL-0YNIe_fbU54l4E0MlSlkkJlKIPumfaLd0FAh0L1ESUuenZkZv6T8J9UbYcp309X8dlg1OcrQ="",""X-Request-Id"":""048e5e770060bc349f184f4b30d36b9a"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772270101.451"",""X-Tt-Logid"":""20260228171501882A29DF4EAEEFC00402"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a4124815ba434412c94f71c4f3984e2d73b16d53dfe40f251dac2474d33101833aa9198a5510e5b9ca0b6cc5205185846885507777a8aa49aeceba98cc0c38f4a35779aed4dfccfb94508d533f67f969c83"",""X-Tt-Trace-Id"":""00-a387a3d10301037e3d1814d27a740000-a387a3d10301037e-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""StatusCode\"":0,\""StatusMessage\"":\""success\"",\""code\"":0,\""data\"":{},\""msg\"":\""success\""}"",""body_size"":77,""duration"":1038186917,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270100 -\u003e 200 SUCCESS (1038.19ms)""}","2026-02-28 17:15:00.323","2026-02-28 17:15:01.362","2026-02-28 17:15:01.362") RETURNING `id`
I0228 17:15:01.363719   90330 http_logger.go:329] Webhook log saved to database with ID: 5534
I0228 17:18:49.938673   90330 reflector.go:979] "Watch close" reflector="pkg/mod/k8s.io/client-go@v0.34.1/tools/cache/reflector.go:290" type="*v1.CustomResourceDefinition" totalItems=7
I0228 17:18:49.944523   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions?allowWatchBookmarks=true&resourceVersion=1137462&timeout=6m4s&timeoutSeconds=364&watch=true" status="200 OK" milliseconds=3
I0228 17:20:00.014208   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] å¼€å§‹æ‰§è¡Œ
I0228 17:20:00.014719   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1ede0, cluster: config/rancher-desktop
I0228 17:20:00.014417   90330 lua_schedule.go:338] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] å¼€å§‹æ‰§è¡Œ
I0228 17:20:00.016283   90330 lua_schedule.go:134] å¼€å§‹å·¡æ£€, scheduleID: 0x4d7f02f1eae0, cluster: config/rancher-desktop

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.752ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[1.003ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[2.095ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","config/rancher-desktop","cron","running","2026-02-28 17:20:00.017",NULL,0,"","","","2026-02-28 17:20:00.017","2026-02-28 17:20:00.017") RETURNING `id`
I0228 17:20:00.022741   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: ""

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[6.635ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (8,"44444","config/rancher-desktop","cron","running","2026-02-28 17:20:00.017",NULL,0,"","","","2026-02-28 17:20:00.023","2026-02-28 17:20:00.023") RETURNING `id`

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[1.557ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("")

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.056ms] [34;1m[rows:0][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("") ORDER BY  id desc LIMIT 10000000
I0228 17:20:00.024515   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19725

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.060ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19725 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.043ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:20:00.024812   90330 lua_inspection.go:78] p.Schedule.ScriptCodes: "Builtin_ConfigMap_002"

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[292.178ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19725 AND event_status = "å¤±è´¥"

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[292.803ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002")

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[32.309ms] [34;1m[rows:0][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19725 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:20:00.350207   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19725 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[32.295ms] [34;1m[rows:1][0m SELECT * FROM `inspection_lua_scripts` WHERE script_code in ("Builtin_ConfigMap_002") ORDER BY  id desc LIMIT 10000000

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.285ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19725 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.142ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡
âœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19725,""schedule_id"":7,""schedule_name"":""wwwww"",""cluster"":""config/rancher-desktop"",""total_rules"":0,""failed_count"":0,""failed_list"":[],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:20:00.35" WHERE `id` = 19725
I0228 17:20:00.350736   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19725 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“
I0228 17:20:00.350904   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/ConfigMap
I0228 17:20:00.350941   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.263ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:20:00.35",`error_count`=0,`updated_at`="2026-02-28 17:20:00.35" WHERE `id` = 19725
I0228 17:20:00.351047   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19725 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.275ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19725 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.332ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:20:00.35",`error_count`=0,`updated_at`="2026-02-28 17:20:00.351" WHERE `id` = 7
I0228 17:20:00.351406   90330 lua_schedule.go:91] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œè·³è¿‡æ‰§è¡Œ

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.293ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE `inspection_schedules`.`id` = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.081ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19725 ORDER BY `inspection_records`.`id` LIMIT 1
I0228 17:20:00.351567   90330 lua_push_webhook.go:31] å·¡æ£€è®°å½•id=19725å¤±è´¥é¡¹æ•°ä¸º0

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.169ms] [34;1m[rows:1][0m INSERT INTO `inspection_records` (`schedule_id`,`schedule_name`,`cluster`,`trigger_type`,`status`,`start_time`,`end_time`,`error_count`,`ai_summary`,`ai_summary_err`,`result_raw`,`created_at`,`updated_at`) VALUES (7,"wwwww","zhangsanfeng/rancher-desktop","cron","skipped","2026-02-28 17:20:00.351","2026-02-28 17:20:00.351",0,"","","å·¡æ£€å› é›†ç¾¤æœªè¿æ¥è€Œè·³è¿‡ï¼šzhangsanfeng/rancher-desktop","2026-02-28 17:20:00.351","2026-02-28 17:20:00.351") RETURNING `id`

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.157ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 7 ORDER BY `inspection_schedules`.`id` LIMIT 1
I0228 17:20:00.351747   90330 schedule.go:73] å·¡æ£€è®¡åˆ’id=7é…ç½®äº†è·³è¿‡0å¤±è´¥çš„æ¡ç›®=false

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.266ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:20:00.351",`error_count`=0,`updated_at`="2026-02-28 17:20:00.351" WHERE `id` = 7
I0228 17:20:00.352016   90330 lua_schedule.go:130] å·¡æ£€ é›†ç¾¤ã€zhangsanfeng/rancher-desktopã€‘æœªè¿æ¥ï¼Œå·²è®°å½•è·³è¿‡çŠ¶æ€ï¼Œè®°å½•ID=19727
I0228 17:20:00.352025   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [wwwww] æ‰§è¡Œå®Œæˆ

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.385ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.041ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000
I0228 17:20:00.357325   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/configmaps" status="200 OK" milliseconds=6
I0228 17:20:00.359347   90330 lua_kubectl.go:35] æ‰§è¡ŒGVKæŸ¥è¯¢: /v1/Pod
I0228 17:20:00.359370   90330 lua_kubectl.go:141] æ‰§è¡ŒListæŸ¥è¯¢
I0228 17:20:00.368168   90330 round_trippers.go:632] "Response" verb="GET" url="https://127.0.0.1:6443/api/v1/pods" status="200 OK" milliseconds=8

--- æ£€æŸ¥: ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹ ---
å¼€å§‹æ—¶é—´: 2026-02-28T17:20:00+08:00
ç»“æŸæ—¶é—´: 2026-02-28T17:20:00+08:00
è¾“å‡º:
ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ

ç»“æ„åŒ–æ£€æµ‹å¤±è´¥äº‹ä»¶:
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"monitoring"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"monitoring","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"k8m"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"k8m","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-node-lease"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-node-lease","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"kube-public"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-public","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-root-ca.crt","namespace":"default"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"default","name":"kube-root-ca.crt"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"cluster-dns","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"cluster-dns"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"kube-apiserver-legacy-service-account-token-tracking","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"kube-apiserver-legacy-service-account-token-tracking"}
{"status":"å¤±è´¥","msg":"[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","extra":{"name":"extension-apiserver-authentication","namespace":"kube-system"},"scriptName":"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","kind":"ConfigMap","checkDesc":"æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","ns":"kube-system","name":"extension-apiserver-authentication"}

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[0.670ms] [34;1m[rows:9][0m INSERT INTO `inspection_check_events` (`record_id`,`event_status`,`event_msg`,`extra`,`script_name`,`kind`,`check_desc`,`cluster`,`namespace`,`name`,`created_at`,`updated_at`,`schedule_id`) VALUES (19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""monitoring""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","monitoring","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""k8m""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","k8m","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-node-lease""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-node-lease","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""kube-public""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-public","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-root-ca.crt"",
  ""namespace"": ""default""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","default","kube-root-ca.crt","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""cluster-dns"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","cluster-dns","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""kube-apiserver-legacy-service-account-token-tracking"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","kube-apiserver-legacy-service-account-token-tracking","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8),(19726,"å¤±è´¥","[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨","{
  ""name"": ""extension-apiserver-authentication"",
  ""namespace"": ""kube-system""
}","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","ConfigMap","æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap","config/rancher-desktop","kube-system","extension-apiserver-authentication","2026-02-28 17:20:00.384","2026-02-28 17:20:00.384",8) RETURNING `id`

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:207
[0m[33m[0.393ms] [34;1m[rows:1][0m INSERT INTO `inspection_script_results` (`record_id`,`script_name`,`script_kind`,`script_desc`,`start_time`,`end_time`,`std_output`,`error_msg`,`cluster`,`schedule_id`,`created_at`,`updated_at`) VALUES (19726,"ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹","","","2026-02-28 17:20:00.35","2026-02-28 17:20:00.384","ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹å®Œæˆ
","","config/rancher-desktop",8,"2026-02-28 17:20:00.385","2026-02-28 17:20:00.385") RETURNING `id`
I0228 17:20:00.386074   90330 lua_schedule.go:258] é›†ç¾¤å·¡æ£€å®Œæˆã€‚é›†ç¾¤å·¡æ£€è®°å½•ID=19726

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.053ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19726 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[11.142ms] [34;1m[rows:1][0m SELECT count(*) FROM `inspection_check_events` WHERE record_id = 19726 AND event_status = "å¤±è´¥"

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[10.544ms] [34;1m[rows:9][0m SELECT * FROM `inspection_check_events` WHERE record_id = 19726 AND event_status = "å¤±è´¥" ORDER BY id desc LIMIT 15
I0228 17:20:00.408130   90330 lua_summary_ai.go:265] å¼€å§‹ä¸ºå·¡æ£€è®°å½• 19726 è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“
I0228 17:20:00.408145   90330 lua_summary_ai.go:112] å·¡æ£€é…ç½®AIæ±‡æ€»æœªå¯ç”¨ï¼Œè¿”å›åŸºç¡€æ±‡æ€»

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.099ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19726 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/pkg/plugins/modules/inspection/lua/lua_summary_ai.go:238
[0m[33m[0.840ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `ai_summary`="ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š
ğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444
â˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop
â° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´
ğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡
âš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚",`ai_summary_err`="",`result_raw`="{""record_date"":"""",""record_id"":19726,""schedule_id"":8,""schedule_name"":""44444"",""cluster"":""config/rancher-desktop"",""total_rules"":1,""failed_count"":9,""failed_list"":[{""id"":61886,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/extension-apiserver-authentication æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""extension-apiserver-authentication\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""extension-apiserver-authentication"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61885,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-apiserver-legacy-service-account-token-tracking æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-apiserver-legacy-service-account-token-tracking\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-apiserver-legacy-service-account-token-tracking"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61884,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/cluster-dns æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""cluster-dns\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""cluster-dns"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61883,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap default/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""default\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""default"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61882,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-public/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-public\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-public"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61881,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-node-lease/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-node-lease\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-node-lease"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61880,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap kube-system/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""kube-system\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""kube-system"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61879,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap k8m/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""k8m\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""k8m"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8},{""id"":61878,""record_id"":19726,""event_status"":""å¤±è´¥"",""event_msg"":""[æœªä½¿ç”¨] ConfigMap monitoring/kube-root-ca.crt æ²¡æœ‰è¢«ä»»ä½• Pod ä½¿ç”¨"",""extra"":""{\n  \""name\"": \""kube-root-ca.crt\"",\n  \""namespace\"": \""monitoring\""\n}"",""script_name"":""ConfigMap æœªè¢«ä½¿ç”¨æ£€æµ‹"",""kind"":""ConfigMap"",""check_desc"":""æ£€æµ‹æ‰€æœ‰æœªè¢« Pod ä½¿ç”¨çš„ ConfigMap"",""cluster"":""config/rancher-desktop"",""namespace"":""monitoring"",""name"":""kube-root-ca.crt"",""created_at"":""2026-02-28T17:20:00.384937+08:00"",""updated_at"":""2026-02-28T17:20:00.384937+08:00"",""schedule_id"":8}],""ai_enabled"":false,""ai_prompt_template"":""""}",`updated_at`="2026-02-28 17:20:00.408" WHERE `id` = 19726
I0228 17:20:00.409186   90330 lua_summary_ai.go:274] æˆåŠŸä¸ºå·¡æ£€è®°å½• 19726 ç”Ÿæˆå¹¶ä¿å­˜AIæ€»ç»“

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.262ms] [34;1m[rows:1][0m UPDATE `inspection_records` SET `status`="success",`end_time`="2026-02-28 17:20:00.409",`error_count`=9,`updated_at`="2026-02-28 17:20:00.409" WHERE `id` = 19726
I0228 17:20:00.409481   90330 lua_schedule.go:186] å·¡æ£€è®°å½•ID=19726 çŠ¶æ€å·²æ›´æ–°ä¸º: success

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19726 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[0.105ms] [34;1m[rows:1][0m UPDATE `inspection_schedules` SET `last_run_time`="2026-02-28 17:20:00.409",`error_count`=9,`updated_at`="2026-02-28 17:20:00.409" WHERE `id` = 8
I0228 17:20:00.409612   90330 lua_schedule.go:354] å®šæ—¶å·¡æ£€ä»»åŠ¡ [44444] æ‰§è¡Œå®Œæˆ

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.105ms] [34;1m[rows:1][0m SELECT * FROM `inspection_schedules` WHERE id = 8 ORDER BY `inspection_schedules`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:100
[0m[33m[0.032ms] [34;1m[rows:1][0m SELECT * FROM `inspection_records` WHERE id = 19726 ORDER BY `inspection_records`.`id` LIMIT 1

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:56
[0m[33m[0.035ms] [34;1m[rows:1][0m SELECT count(*) FROM `webhook_receivers` WHERE id in ("1")

2026/02/28 17:20:00 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:73
[0m[33m[0.023ms] [34;1m[rows:1][0m SELECT * FROM `webhook_receivers` WHERE id in ("1") ORDER BY  id desc LIMIT 1000000

2026/02/28 17:20:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[3.409ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270400",200,true,1404988750,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270400 -> 200 SUCCESS (1404.99ms)","{""request"":{""timestamp"":""2026-02-28T17:20:00.409833+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼š44444\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š1æ¡\\nâš ï¸ å·¡æ£€å®Œæˆï¼Œå…±å‘ç° 9 ä¸ªé—®é¢˜éœ€è¦å…³æ³¨ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":256,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:20:01.814818+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 09:20:01 GMT"",""Request-Id"":""e27781f676ad6007a04b8ce29afb0d45"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1090, cdn-cache;desc=MISS, origin;dur=1111, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-054.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772270400e27781f676ad6007a04b8ce29afb0d45"",""X-Lgw-Dst-Svc"":""-AZJSmZVV2X8L7RdtygUZ_4xPDwFnFbxVH0fFh9kIZV9vemQlRV6zScnmSiiFtk0ZgMgu2G0uRmlmV-YabiCExs76s4w4zZK0s5lZ_Vnl4WEeK0M-u5sW0GRaUgKl7q-a9kIcPZKJvegakbZ_rxthJCb8OdLKBRtn_VW5iqginMrWH1VqbT2ijpYIzA4gY-RFVqhrOtPk_FFUfViKaulpSfM0uCQKWcmzorj3kFSuzryVnNF4ZrAAdxEAFNVvQ6xi6SGsKD4jiEl0ftkP3nW9veuSzUd1TKu1Mu5pbOuz5hDhJT8jyL4wRa2fmS58Av-w_JDoQ3INvGH6W5HFtvsl6p9JrY8GSbv5RLIPwE-8ml6Z6A="",""X-Request-Id"":""e27781f676ad6007a04b8ce29afb0d45"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772270401.904"",""X-Tt-Logid"":""20260228172000126A58F11840D2DA6CE1"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a410e4c3dcce6c98deb7b581a2e533b59fb9965a86ded0c54118910b41dfa3330699f5e151e763fb9329b8be00b1eba6c3274423c68d35e17754aad7efa5ef2375499924899000566676cddcf46ff089998"",""X-Tt-Trace-Id"":""00-a38c36ba03010ea71530e44a1cc20000-a38c36ba03010ea7-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1404988750,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270400 -\u003e 200 SUCCESS (1404.99ms)""}","2026-02-28 17:20:00.409","2026-02-28 17:20:01.815","2026-02-28 17:20:01.815") RETURNING `id`
I0228 17:20:01.818990   90330 http_logger.go:329] Webhook log saved to database with ID: 5535

2026/02/28 17:20:01 [32m/Users/weibh/projects/go/k8m/internal/dao/base.go:132
[0m[33m[1.231ms] [34;1m[rows:1][0m INSERT INTO `webhook_log_records` (`webhook_id`,`webhook_name`,`receiver_id`,`method`,`url`,`status_code`,`success`,`duration`,`error_message`,`summary`,`detail`,`request_time`,`created_at`,`updated_at`) VALUES (1,"é£ä¹¦","feishu","POST","https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270400",200,true,1467318667,"","[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***&timestamp=1772270400 -> 200 SUCCESS (1467.32ms)","{""request"":{""timestamp"":""2026-02-28T17:20:00.352309+08:00"",""method"":""POST"",""url"":""https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270400"",""headers"":{""Content-Type"":""application/json"",""User-Agent"":""k8m-webhook-client/1.0""},""body"":""{\""content\"":{\""text\"":\""ğŸ“Š å·¡æ£€æ±‡æ€»æŠ¥å‘Š\\nğŸ“‹ å·¡æ£€è®¡åˆ’ï¼šwwwww\\nâ˜¸ï¸ å·¡æ£€é›†ç¾¤ï¼šconfig/rancher-desktop\\nâ° å·¡æ£€æ—¶é—´ï¼šæœªçŸ¥æ—¶é—´\\nğŸ“‹ æ‰§è¡Œè§„åˆ™ï¼š0æ¡\\nâœ… å·¡æ£€å®Œæˆï¼Œæœªå‘ç°é—®é¢˜ã€‚\""},\""msg_type\"":\""text\""}"",""body_size"":235,""webhook_name"":""é£ä¹¦"",""receiver_id"":""feishu""},""response"":{""timestamp"":""2026-02-28T17:20:01.819624+08:00"",""status_code"":200,""status"":""200 OK"",""headers"":{""Connection"":""keep-alive"",""Content-Length"":""97"",""Content-Type"":""application/json; charset=utf-8"",""Date"":""Sat, 28 Feb 2026 09:20:01 GMT"",""Request-Id"":""aaf6c56293790d0654498477b66128e7"",""Server"":""volc-dcdn"",""Server-Timing"":""inner; dur=1069, cdn-cache;desc=MISS, origin;dur=1089, edge;dur=0"",""Tt_stable"":""1"",""Via"":""n111-031-021-059.tjcm02-container.Creative"",""X-Dsa-Origin-Status"":""200"",""X-Dsa-Trace-Id"":""1772270400aaf6c56293790d0654498477b66128e7"",""X-Lgw-Dst-Svc"":""po1-u6WRHC4hc280KeBC_cMhtP3OR8bGyc0lYoPD6u2WfWGPJg9txNinsvV0FBx4y7qPqeYoMzSsjQWCGkg1vGv9XpbbOErG7OUrq5uiK_ovoiJap7vorI4lWwpoQSnTeq-ycA1CURuZCBUL40n_eqTEYucZRQ_TpxUqeCSJS6B0zmw-SSZ__LhDeVsepXOQeQwks6CfoQOJc__BlhxE_OQYjuFCnQFR4t_msh7UE4Odz3Rb96IJx5l7Fv5uxh5x4k57jGJY2q-oT6vGMI9-8C-cDphtOJesaI_y_h3K4cBlwvDTLTZOQ0VmV2NuyIYoXk3GYi1ennmRB4RUe0Y_ZlOEc61Lm8ErzwzALkdecaWZtw=="",""X-Request-Id"":""aaf6c56293790d0654498477b66128e7"",""X-Request-Ip"":""223.104.44.122"",""X-Timestamp"":""1772270401.901"",""X-Tt-Logid"":""20260228172000FCF92C12AD4C2BB95C50"",""X-Tt-Trace-Host"":""01c2ba501bf5d6c498fb12ec622be10a410694135732c7d7326f0513dbe67a4f2be5249cc6f92ac5ff36fb00499e9f65ad19d052fdf5128c4f879609d28b8a5edd587c57e8ff6650cfc5cb275fd5a2f794113685d349c59f3c6e5999f6692f8637"",""X-Tt-Trace-Id"":""00-a38c36d203010789ffe0c830029a0000-a38c36d203010789-01"",""X-Tt-Trace-Tag"":""id=5""},""body"":""{\""code\"":11232,\""data\"":{},\""msg\"":\""frequency limited psm[lark.oapi.app_platform_runtime]appID[1500]\""}"",""body_size"":97,""duration"":1467318667,""success"":true},""summary"":""[1-é£ä¹¦] POST https://open.feishu.cn/open-apis/bot/v2/hook/7e484f0c-0a0d-4b78-99fd-886f3e62bb8c?sign=***\u0026timestamp=1772270400 -\u003e 200 SUCCESS (1467.32ms)""}","2026-02-28 17:20:00.352","2026-02-28 17:20:01.819","2026-02-28 17:20:01.819") RETURNING `id`
I0228 17:20:01.821137   90330 http_logger.go:329] Webhook log saved to database with ID: 5536
